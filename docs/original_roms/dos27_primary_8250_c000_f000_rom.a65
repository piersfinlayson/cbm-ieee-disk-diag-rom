; This 8250 disassembly was sourced from:
; http://www.zimmers.net/anonftp/pub/cbm/firmware/drives/old/8050/d/8250rom.dis
; which claims it refers to the 901887-01 and 901888-01 ROMs - DOS 2.7 8x50.
;
; According to http://www.6502.org/users/andre/petindex/drives/roms/
; there were 2.5, 2.6 and 2.7 versions of the DOS ROMs for the 8050/8250.
;
; I have fiddled a bit with the formatting and added some comments.
;
; Notes:
;
; The zeropage is tested after some external chip register initialization
; - The start vector is $F2B7.
; - The zeropage test is at $F2DB.
; - The ROM also tests the ROMs (like DOS 1) and shared RAM (which from
;   memory DOS 1 doesn't do).
; - I also appears to copy a diagnostics routine to the secondary CPU.
;
; I will speculate that perhaps the optional Commodore DOS 1 $D000 ROM
; (which I have not been able to find), did shared RAM testing as well.
; Maybe when it finished it JMPed to a location that allowed the drive to
; boot afterwards.
usrjmp = $0
usrjmp+1 = $1
bmpnt = $2
bmpnt+1 = $3
t0_temp = $4
t1 = $5
t2 = $6
t3 = $7
tmp_fdc = $8
ip = $A
ip+1 = $B
lsnadr = $C
tlkadr = $D
lsnact = $E
tlkact = $F
lsntlk? = $10
prgtrk = $11
drvnum = $12
track = $13
sector = $14
lindx = $15
sa = $16
orgsa = $17
data = $18
r0 = $19
r1 = $1A
r2 = $1B
r3 = $1C
r4 = $1D
result = $1E
result+1 = $1F
result+2 = $20
result+3 = $21
accum+1 = $23
accum+2 = $24
accum+3 = $25
accum+4 = $26
dirbuf = $27
dirbuf+1 = $28
buftab_0 = $29
buftab_0+1 = $2A
L37 = $37
io_via40_pb_fdc = $40
io_diskdata_read_fdc = $41
io_via40_ddrb_fdc = $42
L44 = $44
cb_buftab_cmdbuf = $45
buftab_errbuf? = $47
cb+3 = $48
buf0 = $49
io_via40_acr_fdc = $4B
io_via40_pcr_fdc = $4C
io_via40_ifr_fdc = $4D
L4F = $4F
L50 = $50
buf1 = $51
recl = $59
rech = $61
nr = $69
rs = $71
ss = $79
io_diskdata_write_fdc = $80
f1ptr = $81
recptr = $82
ssnum = $83
ssind = $84
relptr = $85
entsec = $86
entsec+1 = $87
L8A = $8A
entind = $8B
entind+1 = $8C
io_riot80_t8_fdc = $8F
fildrv = $90
fildrv+1 = $91
fildrv+4 = $94
pattyp = $95
pattyp+1 = $96
L97 = $97
filtyp = $9A
chnrdy = $A2
LA3 = $A3
LA8 = $A8
LA9 = $A9
eoiflg = $AA
jobnum = $AB
lintab = $AC
LBA = $BA
LBB = $BB
LBC = $BC
LBD = $BD
LBE = $BE
chndat = $BF
chndat+errchn = $C6
lstchr = $C7
LC9 = $C9
LCD = $CD
lstchr+errchn = $CE
type = $CF
LD1 = $D1
LDB = $DB
LDF = $DF
LE5 = $E5
LE6 = $E6
LE7 = $E7
LE9 = $E9
LEB = $EB
LED = $ED
LEE = $EE
LF0 = $F0
LF1 = $F1
LF2 = $F2
LF3 = $F3
LF6 = $F6
LFA = $FA
LFC = $FC
io_ieee_data_in = $200
io_ieee_data_out = $202
io_ieee_data_out_ddr = $203
io_ieee_ctl = $280
io_ieee_ctl_ddr = $281
io_dskcnt = $282
io_dskcnt_ddr = $283
io_ifr? = $287
fdc_resetphase_fdc = $400
L401 = $401
L402 = $402
header_dskid_fdc = $421
header_dskid_fdc+1 = $422
header_track_fdc = $423
header_sector_fdc = $424
hwdep_1099_maxsecperzone = $499
headergap_size_fdc = $49D
L49E = $49E
min_sync_length_fdc = $4A5
wpsw_fdc = $4A6
nsides?_fdc = $4AC
trknum_side0?_fdc-1 = $4AF
trknum_side0?_fdc = $4B0
trknum_side1?_fdc-1 = $4B3
drive_type_fdc = $4EA
steps?_fdc = $4EB
phases_per_track? = $4EE
L521 = $521
L59C = $59C
L5B3 = $5B3
L67F = $67F
L681 = $681
L6A9 = $6A9
L776 = $776
L782 = $782
L7A4 = $7A4
L7A6 = $7A6
L7BF = $7BF
L7F8 = $7F8
L827 = $827
L870 = $870
L871 = $871
L872 = $872
L873 = $873
L874 = $874
L875 = $875
L876 = $876
L877 = $877
L878 = $878
L879 = $879
L87A = $87A
L87B = $87B
L87C = $87C
L87D = $87D
L87E = $87E
L87F = $87F
fdc_resetphase = $1000
jobs = $1003
hdrs_dskid = $1021
hdrs_dskid+1 = $1022
hdrs_track = $1023
hdrs_sector = $1024
hwdep_1099_maxsecperzone = $1099
vernum = $109F
phase = $10A1
nzones = $10A4
wpsw = $10A6
wpsw+1 = $10A7
killp_flag = $10AB
nsides? = $10AC
hwdep_10ad_fmt_trk_?? = $10AD
trknum_side0?-1 = $10AF
trknum_side0? = $10B0
trknum_side1?-1 = $10B3
bamtrack? = $10C0
L10C1 = $10C1
hwdep_bamsecs? = $10C5
dirtrack = $10CA
bamsiz = $10CB
hwdep_10cc = $10CC
hwdep_10cd_bamlowtrkoff = $10CD
positionofdiskname = $10CE
L10CF = $10CF
L10D0 = $10D0
L10D8 = $10D8
L10E0 = $10E0
maxtrk = $10E9
drive_type = $10EA
mintrk_side2? = $10ED
i2nmi = $10F0
i2nmi+1 = $10F1
nmiflag = $10F2
autofg = $10F3
secinc = $10F4
revcnt = $10F5
iidle = $10F6
L10F7 = $10F7
buff0 = $1100
L1101 = $1101
L1102 = $1102
L1103 = $1103
L17A2 = $17A2
buff0_shadow = $1D00
buff1_shadow = $1E00
buff2_shadow = $1F00
buff3 = $2000
formatcode_2070 = $2070
formatcode_2073 = $2073
formatcode_2075 = $2075
L27B1 = $27B1
dskver0_buf = $4102
dskver1_buf = $4202
cmdbuf = $4300
cmdbuf+1 = $4301
cmdbuf+2 = $4302
cmdbuf+3 = $4303
cmdbuf+4 = $4304
cmdbuf+5 = $4305
cmdbuf+6 = $4306
cmdnum = $433B
strsiz = $433C
tempsa = $433D
cmd = $433E
lstsec? = $433F
bufuse = $4340
bufuse+1 = $4341
dskid = $4342
dskid+1 = $4343
mdirty = $4346
entfnd = $4348
L4349 = $4349
cmdwat = $434A
linuse = $434B
L434C = $434C
rec = $434D
trkss = $434E
secss = $434F
lstjob = $4350
dsec = $435F
dind = $4367
wbam? = $436F
prgdrv = $4370
prgsec = $4371
wlindx = $4372
nbtmp = $4374
nbtmp+1 = $4375
cmdsiz = $4376
char = $4377
limit = $4378
f1cnt = $4379
f2cnt = $437A
f2ptr = $437B
filtbl = $437C
filtbl+1 = $437D
filtbl+5 = $4381
filtrk = $4382
filtrk+1 = $4383
filtrk+4 = $4386
filsec = $4387
filsec+1 = $4388
filsec+2 = $4389
patflg = $438C
image = $438D
drvcnt = $438E
drvflg = $438F
lstdrv = $4390
found? = $4391
dirsec = $4392
delsec = $4393
delind = $4394
lstbuf = $4395
index = $4396
filcnt = $4397
typflg = $4398
mode = $4399
jobrtn = $439A
eptr = $439B
toff = $439C
ndbl = $439D
ndbh = $439F
nodrv = $43A1
L43A3 = $43A3
2c77_FF_2c154_00? = $43A4
nambuf-1 = $43B7
nambuf = $43B8
nambuf+1 = $43B9
nambuf+2 = $43BA
L43CA = $43CA
L43CB = $43CB
errbuf = $43DC
L78A9 = $78A9
L90A5 = $90A5
L90A9 = $90A9
.ORG $C000
C000          formatcode_0500:
C000 A9 00      LDA #$0
C002 8D 77 08   STA L877
C005 AD AC 04   LDA nsides?_fdc
C008 8D 78 08   STA L878
C00B A6 13      LDX track
C00D AD 70 08   LDA L870
C010 8D 7B 08   STA L87B
C013 95 21      STA result+3,X
C015 AD B0 04   LDA trknum_side0?_fdc
C018 8D 76 08   STA L876
C01B A5 82      LDA recptr
C01D 09 10      ORA #$10
C01F 85 82      STA recptr
C021 A9 03      LDA #$3
C023 8D 7E 08   STA L87E
C026 A9 30      LDA #$30
C028 8D 7F 08   STA L87F
C02B 20 76 07   JSR L776
C02E A5 82      LDA recptr
C030 29 08      AND #$8
C032 F0 03      BEQ LC037
C034          LC034:
C034 4C F8 07   JMP L7F8
C037          LC037:
C037 20 A6 07   JSR L7A6
C03A A9 DE      LDA #$DE
C03C A2 FF      LDX #$FF
C03E          LC03E:
C03E 50 FE      BVC LC03E
C040          LC040:
C040 B8         CLV
C041 86 80      STX io_diskdata_write_fdc
C043 85 4C      STA io_via40_pcr_fdc
C045 A0 04      LDY #$4
C047 A9 FC      LDA #$FC
C049          LC049:
C049 50 FE      BVC LC049
C04B          LC04B:
C04B B8         CLV
C04C 88         DEY
C04D 10 FA      BPL LC049
C04F          LC04F:
C04F 85 4C      STA io_via40_pcr_fdc
C051 A5 40      LDA io_via40_pb_fdc
C053 29 BF      AND #$BF
C055 85 40      STA io_via40_pb_fdc
C057 A9 40      LDA #$40
C059 09 01      ORA #$1
C05B 85 4B      STA io_via40_acr_fdc
C05D A2 E8      LDX #$E8
C05F 86 44      STX L44
C061 A2 03      LDX #$3
C063 A0 00      LDY #$0
C065          LC065:
C065 A5 40      LDA io_via40_pb_fdc
C067 30 FC      BMI LC065
C069          LC069:
C069 A5 40      LDA io_via40_pb_fdc
C06B 10 FC      BPL LC069
C06D          LC06D:
C06D 86 45      STX cb_buftab_cmdbuf
C06F          LC06F:
C06F A5 44      LDA L44
C071          LC071:
C071 A5 40      LDA io_via40_pb_fdc
C073 10 0C      BPL LC081
C075          LC075:
C075 A5 4D      LDA io_via40_ifr_fdc
C077 0A         ASL A
C078 10 F7      BPL LC071
C07A          LC07A:
C07A C8         INY
C07B D0 F2      BNE LC06F
C07D          LC07D:
C07D F0 18      BEQ LC097
C07F          LC07F:
C07F A5 44      LDA L44
C081          LC081:
C081 A5 40      LDA io_via40_pb_fdc
C083 30 0A      BMI LC08F
C085          LC085:
C085 A5 4D      LDA io_via40_ifr_fdc
C087 0A         ASL A
C088 10 F7      BPL LC081
C08A          LC08A:
C08A C8         INY
C08B D0 F2      BNE LC07F
C08D          LC08D:
C08D F0 08      BEQ LC097
C08F          LC08F:
C08F C0 C5      CPY #$C5
C091 90 04      BCC LC097
C093          LC093:
C093 C0 CC      CPY #$CC
C095 90 05      BCC LC09C
C097          LC097:
C097 A9 0C      LDA #$C
C099 4C F8 07   JMP L7F8
C09C          LC09C:
C09C AD 70 08   LDA L870
C09F 4D 21 04   EOR header_dskid_fdc
C0A2 4D 22 04   EOR header_dskid_fdc+1
C0A5 8D 72 08   STA L872
C0A8 A9 00      LDA #$0
C0AA 8D 71 08   STA L871
C0AD 20 BF 07   JSR L7BF
C0B0 20 A6 07   JSR L7A6
C0B3 A9 DE      LDA #$DE
C0B5 A2 FF      LDX #$FF
C0B7          LC0B7:
C0B7 50 FE      BVC LC0B7
C0B9          LC0B9:
C0B9 B8         CLV
C0BA 86 80      STX io_diskdata_write_fdc
C0BC 85 4C      STA io_via40_pcr_fdc
C0BE A2 08      LDX #$8
C0C0 A9 DC      LDA #$DC
C0C2 A0 03      LDY #$3
C0C4          LC0C4:
C0C4 50 FE      BVC LC0C4
C0C6          LC0C6:
C0C6 B8         CLV
C0C7 88         DEY
C0C8 D0 FA      BNE LC0C4
C0CA          LC0CA:
C0CA 50 FE      BVC LC0CA
C0CC          LC0CC:
C0CC B8         CLV
C0CD 86 80      STX io_diskdata_write_fdc
C0CF 85 4C      STA io_via40_pcr_fdc
C0D1 AD 72 08   LDA L872
C0D4 A2 FF      LDX #$FF
C0D6          LC0D6:
C0D6 50 FE      BVC LC0D6
C0D8          LC0D8:
C0D8 B8         CLV
C0D9 85 80      STA io_diskdata_write_fdc
C0DB 4D 71 08   EOR L871
C0DE AC 71 08   LDY L871
C0E1 EE 71 08   INC L871
C0E4          LC0E4:
C0E4 50 FE      BVC LC0E4
C0E6          LC0E6:
C0E6 B8         CLV
C0E7 84 80      STY io_diskdata_write_fdc
C0E9 4D 71 08   EOR L871
C0EC 8D 72 08   STA L872
C0EF AD 70 08   LDA L870
C0F2          LC0F2:
C0F2 50 FE      BVC LC0F2
C0F4          LC0F4:
C0F4 B8         CLV
C0F5 85 80      STA io_diskdata_write_fdc
C0F7 AD 22 04   LDA header_dskid_fdc+1
C0FA AC 21 04   LDY header_dskid_fdc
C0FD          LC0FD:
C0FD 50 FE      BVC LC0FD
C0FF          LC0FF:
C0FF B8         CLV
C100          formatcode_0500+$0100:
C100 85 80      STA io_diskdata_write_fdc
C102          LC102:
C102 50 FE      BVC LC102
C104          LC104:
C104 B8         CLV
C105 84 80      STY io_diskdata_write_fdc
C107 A9 0F      LDA #$F
C109          LC109:
C109 50 FE      BVC LC109
C10B          LC10B:
C10B B8         CLV
C10C 85 80      STA io_diskdata_write_fdc
C10E A9 DE      LDA #$DE
C110 AC 9D 04   LDY headergap_size_fdc
C113          LC113:
C113 50 FE      BVC LC113
C115          LC115:
C115 B8         CLV
C116 88         DEY
C117 D0 FA      BNE LC113
C119          LC119:
C119 50 FE      BVC LC119
C11B          LC11B:
C11B B8         CLV
C11C 86 80      STX io_diskdata_write_fdc
C11E 85 4C      STA io_via40_pcr_fdc
C120 A0 03      LDY #$3
C122          LC122:
C122 50 FE      BVC LC122
C124          LC124:
C124 B8         CLV
C125 88         DEY
C126 D0 FA      BNE LC122
C128          LC128:
C128 50 FE      BVC LC128
C12A          LC12A:
C12A B8         CLV
C12B A9 DC      LDA #$DC
C12D A2 07      LDX #$7
C12F          LC12F:
C12F 50 FE      BVC LC12F
C131          LC131:
C131 B8         CLV
C132 86 80      STX io_diskdata_write_fdc
C134 85 4C      STA io_via40_pcr_fdc
C136 A0 FF      LDY #$FF
C138 AD 73 08   LDA L873
C13B          LC13B:
C13B 50 FE      BVC LC13B
C13D          LC13D:
C13D B8         CLV
C13E 85 80      STA io_diskdata_write_fdc
C140          LC140:
C140 50 FE      BVC LC140
C142          LC142:
C142 B8         CLV
C143 88         DEY
C144 D0 FA      BNE LC140
C146          LC146:
C146 A9 00      LDA #$0
C148          LC148:
C148 50 FE      BVC LC148
C14A          LC14A:
C14A B8         CLV
C14B 85 80      STA io_diskdata_write_fdc
C14D AC 74 08   LDY L874
C150 A2 FC      LDX #$FC
C152          LC152:
C152 50 FE      BVC LC152
C154          LC154:
C154 B8         CLV
C155 88         DEY
C156 D0 FA      BNE LC152
C158          LC158:
C158 50 FE      BVC LC158
C15A          LC15A:
C15A B8         CLV
C15B AD 71 08   LDA L871
C15E CD 77 08   CMP L877
C161 F0 03      BEQ LC166
C163          LC163:
C163 4C B3 05   JMP L5B3
C166          LC166:
C166 86 4C      STX io_via40_pcr_fdc
C168 A9 64      LDA #$64
C16A 85 44      STA L44
C16C A9 00      LDA #$0
C16E 85 45      STA cb_buftab_cmdbuf
C170          LC170:
C170 A5 4D      LDA io_via40_ifr_fdc
C172 0A         ASL A
C173 10 FB      BPL LC170
C175          LC175:
C175 A9 10      LDA #$10
C177 8D 7D 08   STA L87D
C17A A9 01      LDA #$1
C17C 8D 71 08   STA L871
C17F A2 C8      LDX #$C8
C181          LC181:
C181 20 27 08   JSR L827
C184 C9 08      CMP #$8
C186 F0 08      BEQ LC190
C188          LC188:
C188 CA         DEX
C189 D0 F6      BNE LC181
C18B          LC18B:
C18B A9 02      LDA #$2
C18D 4C F8 07   JMP L7F8
C190          LC190:
C190 50 FE      BVC LC190
C192          LC192:
C192 B8         CLV
C193 A5 41      LDA io_diskdata_read_fdc
C195 8D 72 08   STA L872
C198          LC198:
C198 50 FE      BVC LC198
C19A          LC19A:
C19A B8         CLV
C19B A5 41      LDA io_diskdata_read_fdc
C19D CD 71 08   CMP L871
C1A0 D0 DF      BNE LC181
C1A2          LC1A2:
C1A2 4D 72 08   EOR L872
C1A5 A0 03      LDY #$3
C1A7          LC1A7:
C1A7 50 FE      BVC LC1A7
C1A9          LC1A9:
C1A9 B8         CLV
C1AA 45 41      EOR io_diskdata_read_fdc
C1AC 88         DEY
C1AD D0 F8      BNE LC1A7
C1AF          LC1AF:
C1AF A8         TAY
C1B0 F0 05      BEQ LC1B7
C1B2          LC1B2:
C1B2 A9 09      LDA #$9
C1B4 4C F8 07   JMP L7F8
C1B7          LC1B7:
C1B7 20 27 08   JSR L827
C1BA C9 07      CMP #$7
C1BC F0 05      BEQ LC1C3
C1BE          LC1BE:
C1BE A9 04      LDA #$4
C1C0 4C F8 07   JMP L7F8
C1C3          LC1C3:
C1C3 A0 00      LDY #$0
C1C5 98         TYA
C1C6          LC1C6:
C1C6 50 FE      BVC LC1C6
C1C8          LC1C8:
C1C8 B8         CLV
C1C9 45 41      EOR io_diskdata_read_fdc
C1CB 88         DEY
C1CC D0 F8      BNE LC1C6
C1CE          LC1CE:
C1CE 50 FE      BVC LC1CE
C1D0          LC1D0:
C1D0 B8         CLV
C1D1 45 41      EOR io_diskdata_read_fdc
C1D3 F0 05      BEQ LC1DA
C1D5          LC1D5:
C1D5 A9 05      LDA #$5
C1D7 4C F8 07   JMP L7F8
C1DA          LC1DA:
C1DA EE 71 08   INC L871
C1DD AD 71 08   LDA L871
C1E0 CD 77 08   CMP L877
C1E3 F0 03      BEQ LC1E8
C1E5          LC1E5:
C1E5 4C 7F 06   JMP L67F
C1E8          LC1E8:
C1E8 C9 01      CMP #$1
C1EA F0 2C      BEQ LC218
C1EC          LC1EC:
C1EC 20 27 08   JSR L827
C1EF C9 08      CMP #$8
C1F1 D0 13      BNE LC206
C1F3          LC1F3:
C1F3 AC 7A 08   LDY L87A
C1F6 D0 08      BNE formatcode_0500+$0200
C1F8          LC1F8:
C1F8 AC 79 08   LDY L879
C1FB CC 75 08   CPY L875
C1FE 90 0C      BCC LC20C
C200          formatcode_0500+$0200:
C200 EE 74 08   INC L874
C203 4C 9C 05   JMP L59C
C206          LC206:
C206 CE 74 08   DEC L874
C209 4C 9C 05   JMP L59C
C20C          LC20C:
C20C A0 01      LDY #$1
C20E 8C 77 08   STY L877
C211 88         DEY
C212 8C 71 08   STY L871
C215 4C 7F 06   JMP L67F
C218          LC218:
C218 CE 78 08   DEC L878
C21B F0 15      BEQ LC232
C21D          LC21D:
C21D A5 82      LDA recptr
C21F 29 EF      AND #$EF
C221 85 82      STA recptr
C223 AE 76 08   LDX L876
C226 CA         DEX
C227 8A         TXA
C228 18         CLC
C229 6D 70 08   ADC L870
C22C 8D 70 08   STA L870
C22F 4C 9C 05   JMP L59C
C232          LC232:
C232 A5 82      LDA recptr
C234 09 10      ORA #$10
C236 85 82      STA recptr
C238 AD AC 04   LDA nsides?_fdc
C23B 8D 78 08   STA L878
C23E AE 7B 08   LDX L87B
C241 E8         INX
C242 EC 76 08   CPX L876
C245 F0 23      BEQ LC26A
C247          LC247:
C247 8E 70 08   STX L870
C24A 8E 7B 08   STX L87B
C24D A0 FF      LDY #$FF
C24F AD FA FF   LDA innmi
C252 D0 01      BNE LC255
C254          LC254:
C254 88         DEY
C255          LC255:
C255 20 82 07   JSR L782
C258 A9 03      LDA #$3
C25A 8D 7E 08   STA L87E
C25D 4C 9C 05   JMP L59C
C260          LC260:
C260 AE 76 08   LDX L876
C263 CA         DEX
C264 8E 76 08   STX L876
C267 4C 21 05   JMP L521
C26A          LC26A:
C26A A6 13      LDX track
C26C AD 7B 08   LDA L87B
C26F 95 21      STA result+3,X
C271 A9 01      LDA #$1
C273 6C 02 FC   JMP (ierrr_fdc)
C276          formatcode_0776_fdc:
C276 78         SEI
C277 A6 13      LDX track
C279 BD A4 07   LDA L7A4,X
C27C 05 40      ORA io_via40_pb_fdc
C27E 85 40      STA io_via40_pb_fdc
C280 A0 5C      LDY #$5C
C282 A6 13      LDX track
C284 A9 40      LDA #$40
C286 95 04      STA t0_temp,X
C288 98         TYA
C289 9D EB 04   STA steps?_fdc,X
C28C AD EE 04   LDA phases_per_track?
C28F 95 23      STA accum+1,X
C291          LC291:
C291 78         SEI
C292 A5 01      LDA usrjmp+1
C294 95 02      STA bmpnt,X
C296 D6 02      DEC bmpnt,X
C298 58         CLI
C299 BD EB 04   LDA steps?_fdc,X
C29C D0 F3      BNE LC291
C29E          LC29E:
C29E B5 23      LDA accum+1,X
C2A0 D0 EF      BNE LC291
C2A2          LC2A2:
C2A2 78         SEI
C2A3 60         RTS
C2A4 0C 03      .BYTE $C,$3
C2A6          formatcode_07a6_fdc:
C2A6 A2 00      LDX #$0
C2A8 A0 00      LDY #$0
C2AA A9 DC      LDA #$DC
C2AC          LC2AC:
C2AC 50 FE      BVC LC2AC
C2AE          LC2AE:
C2AE B8         CLV
C2AF 86 80      STX io_diskdata_write_fdc
C2B1 85 4C      STA io_via40_pcr_fdc
C2B3 A2 32      LDX #$32
C2B5          LC2B5:
C2B5 50 FE      BVC LC2B5
C2B7          LC2B7:
C2B7 B8         CLV
C2B8 88         DEY
C2B9 D0 FA      BNE LC2B5
C2BB          LC2BB:
C2BB CA         DEX
C2BC D0 F7      BNE LC2B5
C2BE          LC2BE:
C2BE 60         RTS
C2BF          formatcode_07bf_fdc:
C2BF A2 04      LDX #$4
C2C1 AD 70 08   LDA L870
C2C4 CD B0 04   CMP trknum_side0?_fdc
C2C7 B0 08      BCS LC2D1
C2C9          LC2C9:
C2C9 DD AF 04   CMP trknum_side0?_fdc-1,X
C2CC CA         DEX
C2CD B0 FA      BCS LC2C9
C2CF          LC2CF:
C2CF 90 06      BCC LC2D7
C2D1          LC2D1:
C2D1 DD B3 04   CMP trknum_side1?_fdc-1,X
C2D4 CA         DEX
C2D5 B0 FA      BCS LC2D1
C2D7          LC2D7:
C2D7 BD 99 04   LDA hwdep_1099_maxsecperzone,X
C2DA 8D 77 08   STA L877
C2DD CD 7C 08   CMP L87C
C2E0 F0 15      BEQ LC2F7
C2E2          LC2E2:
C2E2 8D 7C 08   STA L87C
C2E5 AD 9E 04   LDA L49E
C2E8 8D 74 08   STA L874
C2EB A5 82      LDA recptr
C2ED 29 F9      AND #$F9
C2EF 85 82      STA recptr
C2F1 8A         TXA
C2F2 0A         ASL A
C2F3 05 82      ORA recptr
C2F5 85 82      STA recptr
C2F7          LC2F7:
C2F7 60         RTS
C2F8          formatcode_07f8_fdc:
C2F8 C9 0C      CMP #$C
C2FA F0 28      BEQ LC324
C2FC          LC2FC:
C2FC C9 08      CMP #$8
C2FE F0 24      BEQ LC324
C300          formatcode_0500+$0300:
C300 CE 7F 08   DEC L87F
C303 F0 13      BEQ LC318
C305          LC305:
C305 CE 7D 08   DEC L87D
C308 F0 03      BEQ LC30D
C30A          LC30A:
C30A 4C 81 06   JMP L681
C30D          LC30D:
C30D CE 7E 08   DEC L87E
C310 F0 06      BEQ LC318
C312          LC312:
C312 AD 70 08   LDA L870
C315 4C 9C 05   JMP L59C
C318          LC318:
C318 AE 70 08   LDX L870
C31B AC 71 08   LDY L871
C31E 8E 23 04   STX header_track_fdc
C321 8C 24 04   STY header_sector_fdc
C324          LC324:
C324 6C 02 FC   JMP (ierrr_fdc)
C327          formatcode_0827_fdc:
C327 A5 40      LDA io_via40_pb_fdc
C329 29 BF      AND #$BF
C32B 85 40      STA io_via40_pb_fdc
C32D A0 00      LDY #$0
C32F 8C 79 08   STY L879
C332 8C 7A 08   STY L87A
C335          LC335:
C335 A5 40      LDA io_via40_pb_fdc
C337 10 14      BPL LC34D
C339          LC339:
C339 50 FA      BVC LC335
C33B          LC33B:
C33B B8         CLV
C33C EE 79 08   INC L879
C33F D0 F4      BNE LC335
C341          LC341:
C341 EE 7A 08   INC L87A
C344 D0 EF      BNE LC335
C346          LC346:
C346 68         PLA
C347 68         PLA
C348 A9 03      LDA #$3
C34A 4C F8 07   JMP L7F8
C34D          LC34D:
C34D AC A5 04   LDY min_sync_length_fdc
C350          LC350:
C350 A5 40      LDA io_via40_pb_fdc
C352 30 E1      BMI LC335
C354          LC354:
C354 88         DEY
C355 D0 F9      BNE LC350
C357          LC357:
C357 09 40      ORA #$40
C359 85 40      STA io_via40_pb_fdc
C35B A5 41      LDA io_diskdata_read_fdc
C35D B8         CLV
C35E          LC35E:
C35E 50 FE      BVC LC35E
C360          LC360:
C360 B8         CLV
C361 A5 41      LDA io_diskdata_read_fdc
C363 60         RTS
C364          LC364:
C364 AA         TAX
C365 AA         TAX
C366 AA         TAX
C367 AA         TAX
C368 AA         TAX
C369 AA         TAX
C36A AA         TAX
C36B AA         TAX
C36C AA         TAX
C36D AA         TAX
C36E AA         TAX
C36F AA         TAX
C370          formatcode_2070:
C370 A2 3F      LDX #$3F
C372 9A         TXS
C373          formatcode_2073:
C373 D8         CLD
C375          formatcode_2075 = * + 1
C374 A9 00      LDA #$0
C376 A8         TAY
C377 A2 3F      LDX #$3F
C379          LC379:
C379 8A         TXA
C37A 95 00      STA usrjmp,X
C37C CA         DEX
C37D 10 FA      BPL LC379
C37F          LC37F:
C37F A2 3F      LDX #$3F
C381          LC381:
C381 F6 00      INC usrjmp,X
C383 C8         INY
C384 D0 FB      BNE LC381
C386          LC386:
C386 8A         TXA
C387 D5 00      CMP usrjmp,X
C389 D0 27      BNE LC3B2
C38B          LC38B:
C38B 55 00      EOR usrjmp,X
C38D 95 00      STA usrjmp,X
C38F B5 00      LDA usrjmp,X
C391 D0 1F      BNE LC3B2
C393          LC393:
C393 CA         DEX
C394 10 EB      BPL LC381
C396          LC396:
C396 E8         INX
C397 86 00      STX usrjmp
C399 86 01      STX usrjmp+1
C39B A8         TAY
C39C A2 04      LDX #$4
C39E 18         CLC
C39F          LC39F:
C39F C6 01      DEC usrjmp+1
C3A1          LC3A1:
C3A1 71 00      ADC (usrjmp),Y
C3A3 C8         INY
C3A4 D0 FB      BNE LC3A1
C3A6          LC3A6:
C3A6 CA         DEX
C3A7 D0 F6      BNE LC39F
C3A9          LC3A9:
C3A9 69 00      ADC #$0
C3AB C5 01      CMP usrjmp+1
C3AD F0 08      BEQ LC3B7
C3AF A0 FE 2C   .BYTE $A0,$FE,$2C
C3B2          LC3B2:
C3B2 A0 FF 4C   .BYTE $A0,$FF,$4C
C3B5          LC3B5:
C3B5 06 FC      ASL LFC
C3B7          LC3B7:
C3B7 86 83      STX ssnum
C3B9 CA         DEX
C3BA 86 40      STX io_via40_pb_fdc
C3BC 86 81      STX f1ptr
C3BE A2 7F      LDX #$7F
C3C0 86 42      STX io_via40_ddrb_fdc
C3C2 A2 FC      LDX #$FC
C3C4 86 4C      STX io_via40_pcr_fdc
C3C6 A2 01      LDX #$1
C3C8 86 4B      STX io_via40_acr_fdc
C3CA A2 0E      LDX #$E
C3CC 8E 01 04   STX L401
C3CF A2 2D      LDX #$2D
C3D1 8E 02 04   STX L402
C3D4 A2 04      LDX #$4
C3D6 86 1A      STX r1
C3D8 A2 02      LDX #$2
C3DA A5 82      LDA recptr
C3DC 29 40      AND #$40
C3DE F0 01      BEQ LC3E1
C3E0          LC3E0:
C3E0 CA         DEX
C3E1          LC3E1:
C3E1 8E AC 04   STX nsides?_fdc
C3E4 A2 01      LDX #$1
C3E6 A5 82      LDA recptr
C3E8 29 10      AND #$10
C3EA D0 01      BNE LC3ED
C3EC          LC3EC:
C3EC CA         DEX
C3ED          LC3ED:
C3ED 8E EA 04   STX drive_type_fdc
C3F0 D0 03      BNE LC3F5
C3F2          LC3F2:
C3F2 A2 07      LDX #$7
C3F5          LC3F5 = * + 1
              ; Instruction parameter jumped to.
C3F4 2C A2 17   BIT L17A2
C3F7 86 83      STX ssnum
C3F9 A2 03      LDX #$3
C3FB 8E EE 04   STX phases_per_track?
C3FE A2 05      LDX #$5
C400 AD EA 04   LDA drive_type_fdc
C403 F0 05      BEQ LC40A
C405          LC405:
C405 8E EE 04   STX phases_per_track?
C408 CA         DEX
C409 CA         DEX
C40A          LC40A:
C40A 8E 00 04   STX fdc_resetphase_fdc
C40D 86 8F      STX io_riot80_t8_fdc
C40F 6C 00 FC   JMP (itop_fdc)
C412          LC412:
C413          LC413 = * + 1
              ; Instruction parameter jumped to.
C412 2C A2 FF   BIT LFFA2
C415 9A         TXS
C416 AD 82 02   LDA io_dskcnt
C419 29 C7      AND #$C7
C41B 8D 82 02   STA io_dskcnt
C41E AD 82 02   LDA io_dskcnt
C421 29 07      AND #$7
C423 09 48      ORA #$48
C425 85 0D      STA tlkadr
C427 49 60      EOR #$60
C429 85 0C      STA lsnadr
C42B A2 00      LDX #$0
C42D A0 00      LDY #$0
C42F          LC42F:
C42F A9 00      LDA #$0
C431 95 29      STA buftab_0,X
C433 E8         INX
C434 B9 DE DB   LDA bufind,Y
C437 95 29      STA buftab_0,X
C439 E8         INX
C43A C8         INY
C43B C0 0E      CPY #$E
C43D D0 F0      BNE LC42F
C43F          LC43F:
C43F A9 00      LDA #$0
C441 95 29      STA buftab_0,X
C443 E8         INX
C444 A9 43      LDA #$43
C446 95 29      STA buftab_0,X
C448 E8         INX
C449 A9 DC      LDA #$DC
C44B 95 29      STA buftab_0,X
C44D E8         INX
C44E A9 43      LDA #$43
C450 95 29      STA buftab_0,X
C452 A9 FF      LDA #$FF
C454 A2 12      LDX #$12
C456          LC456:
C456 95 AC      STA lintab,X
C458 CA         DEX
C459 10 FB      BPL LC456
C45B          LC45B:
C45B A2 07      LDX #$7
C45D          LC45D:
C45D 95 49      STA buf0,X
C45F 95 51      STA buf1,X
C461 95 79      STA ss,X
C463 CA         DEX
C464 10 F7      BPL LC45D
C466          LC466:
C466 A9 0E      LDA #$E
C468 85 4F      STA L4F
C46A A9 0F      LDA #$F
C46C 85 50      STA L50
C46E A9 07      LDA #$7
C470 85 BC      STA LBC
C472 A9 86      LDA #$86
C474 85 BB      STA LBB
C476 A9 3F      LDA #$3F
C478 8D 4B 43   STA linuse
C47B A9 01      LDA #$1
C47D 85 A8      STA LA8
C47F A9 88      LDA #$88
C481 85 A9      STA LA9
C483 A9 00      LDA #$0
C485 8D 40 43   STA bufuse
C488 A9 F0      LDA #$F0
C48A 8D 41 43   STA bufuse+1
C48D 20 78 D3   JSR LD378
C490 A9 A3      LDA #$A3
C492 8D F0 10   STA i2nmi
C495 A9 F3      LDA #$F3
C497 8D F1 10   STA i2nmi+1
C49A A9 05      LDA #$5
C49C 8D F4 10   STA secinc
C49F A9 05      LDA #$5
C4A1 8D F5 10   STA revcnt
C4A4 AE EA 10   LDX drive_type
C4A7 BD 50 FF   LDA rom_bamsiz,X
C4AA 8D CB 10   STA bamsiz
C4AD BD 52 FF   LDA rom_hwdep_10cc,X
C4B0 8D CC 10   STA hwdep_10cc
C4B3 BD 54 FF   LDA rom_hwdep_10cd,X
C4B6 8D CD 10   STA hwdep_10cd_bamlowtrkoff
C4B9 BD 56 FF   LDA rom_positionofdiskname,X
C4BC 8D CE 10   STA positionofdiskname
C4BF AD EA 10   LDA drive_type
C4C2 F0 70      BEQ setver_dos2a
C4C4          setver_dos2c:
C4C4 A9 27      LDA #$27
C4C6 8D CA 10   STA dirtrack
C4C9 A9 43      LDA #$43
C4CB 8D 9F 10   STA vernum
C4CE A2 04      LDX #$4
C4D0 AD AC 10   LDA nsides?
C4D3 4A         LSR A
C4D4 D0 04      BNE setver_dos2c_154
C4D6          LC4D6:
C4D6 CA         DEX
C4D7 CA         DEX
C4D8 D0 1F      BNE setver_dos2c_77
C4DA          setver_dos2c_154:
C4DA BD C0 FF   LDA rom_154_bamdirtracks?,X
C4DD 9D C0 10   STA bamtrack?,X
C4E0 BD C5 FF   LDA rom_154_bamdirsecs?,X
C4E3 9D C5 10   STA hwdep_bamsecs?,X
C4E6 CA         DEX
C4E7 10 F1      BPL setver_dos2c_154
C4E9          LC4E9:
C4E9 E8         INX
C4EA 8E A4 43   STX 2c77_FF_2c154_00?
C4ED A9 9B      LDA #$9B
C4EF 8D E9 10   STA maxtrk
C4F2 A9 4D      LDA #$4D
C4F4 8D ED 10   STA mintrk_side2?
C4F7 D0 1C      BNE LC515
C4F9          setver_dos2c_77:
C4F9 BD BA FF   LDA rom_77_bamdirtracks?,X
C4FC 9D C0 10   STA bamtrack?,X
C4FF BD BD FF   LDA rom_77_bamdirsecs?,X
C502 9D C5 10   STA hwdep_bamsecs?,X
C505 CA         DEX
C506 10 F1      BPL setver_dos2c_77
C508          LC508:
C508 8E A4 43   STX 2c77_FF_2c154_00?
C50B A9 4E      LDA #$4E
C50D 8D E9 10   STA maxtrk
C510 A2 00      LDX #$0
C512 8E ED 10   STX mintrk_side2?
C515          LC515:
C515 A2 06      LDX #$6
C517 BD B3 FF   LDA rom_2c_maxsecperzone,X
C51A 8D AD 10   STA hwdep_10ad_fmt_trk_??
C51D CA         DEX
C51E          LC51E:
C51E BD B3 FF   LDA rom_2c_maxsecperzone,X
C521 9D 99 10   STA hwdep_1099_maxsecperzone,X
C524 CA         DEX
C525 10 F7      BPL LC51E
C527          LC527:
C527 A2 07      LDX #$7
C529          LC529:
C529 BD AB FF   LDA LFFAB,X
C52C 9D B0 10   STA trknum_side0?,X
C52F CA         DEX
C530 10 F7      BPL LC529
C532          LC532:
C532 30 3C      BMI LC570
C534          setver_dos2a:
C534 A9 01      LDA #$1
C536 8D AC 10   STA nsides?
C539 A9 12      LDA #$12
C53B 8D CA 10   STA dirtrack
C53E 8D C0 10   STA bamtrack?
C541 A9 41      LDA #$41
C543 8D 9F 10   STA vernum
C546 A9 24      LDA #$24
C548 8D E9 10   STA maxtrk
C54B A9 00      LDA #$0
C54D 8D ED 10   STA mintrk_side2?
C550 8D C5 10   STA hwdep_bamsecs?
C553 A2 06      LDX #$6
C555 BD A4 FF   LDA rom_2a_maxsecperzone,X
C558 8D AD 10   STA hwdep_10ad_fmt_trk_??
C55B CA         DEX
C55C          LC55C:
C55C BD A4 FF   LDA rom_2a_maxsecperzone,X
C55F 9D 99 10   STA hwdep_1099_maxsecperzone,X
C562 CA         DEX
C563 10 F7      BPL LC55C
C565          LC565:
C565 A2 03      LDX #$3
C567          LC567:
C567 BD A0 FF   LDA LFFA0,X
C56A 9D B0 10   STA trknum_side0?,X
C56D CA         DEX
C56E 10 F7      BPL LC567
C570          LC570:
C570 A2 07      LDX #$7
C572          LC572:
C572 BD CA FF   LDA LFFCA,X
C575 9D A4 10   STA nzones,X
C578 CA         DEX
C579 10 F7      BPL LC572
C57B          LC57B:
C57B A9 90      LDA #$90
C57D 8D F6 10   STA iidle
C580 A9 C5      LDA #$C5
C582 8D F7 10   STA L10F7
C585 A9 73      LDA #$73
C587 20 4A F1   JSR errts0
C58A 8D 87 02   STA io_ifr?
C58D 4C A3 F1   JMP boot
C590          idle_j:
C590 AD 4A 43   LDA cmdwat
C593 F0 0C      BEQ idl01
C595          LC595:
C595 78         SEI
C596 A9 00      LDA #$0
C598 8D 4A 43   STA cmdwat
C59B 8D F2 10   STA nmiflag
C59E 20 B9 C7   JSR parsxq
C5A1          idl01:
C5A1 58         CLI
C5A2 A9 0E      LDA #$E
C5A4 85 07      STA t3
C5A6 A9 00      LDA #$0
C5A8 85 04      STA t0_temp
C5AA 85 05      STA t1
C5AC          idl02:
C5AC A6 07      LDX t3
C5AE B5 AC      LDA lintab,X
C5B0 C9 FF      CMP #$FF
C5B2 F0 10      BEQ idl3
C5B4          LC5B4:
C5B4 29 3F      AND #$3F
C5B6 85 15      STA lindx
C5B8 20 BB E8   JSR getact
C5BB AA         TAX
C5BC BD 50 43   LDA lstjob,X
C5BF 29 01      AND #$1
C5C1 AA         TAX
C5C2 F6 04      INC t0_temp,X
C5C4          idl3:
C5C4 C6 07      DEC t3
C5C6 10 E4      BPL idl02
C5C8          LC5C8:
C5C8 A0 0B      LDY #$B
C5CA          LC5CA:
C5CA B9 03 10   LDA jobs,Y
C5CD 10 05      BPL idl5
C5CF          LC5CF:
C5CF 29 01      AND #$1
C5D1 AA         TAX
C5D2 F6 04      INC t0_temp,X
C5D4          idl5:
C5D4 88         DEY
C5D5 10 F3      BPL LC5CA
C5D7          LC5D7:
C5D7 78         SEI
C5D8 A5 12      LDA drvnum
C5DA 48         PHA
C5DB AD 82 02   LDA io_dskcnt
C5DE 29 E7      AND #$E7
C5E0 48         PHA
C5E1 A9 00      LDA #$0
C5E3 85 12      STA drvnum
C5E5 A5 04      LDA t0_temp
C5E7 F0 0C      BEQ idl7
C5E9          LC5E9:
C5E9 AD A6 10   LDA wpsw
C5EC F0 03      BEQ LC5F1
C5EE          LC5EE:
C5EE 20 35 DA   JSR cldchn
C5F1          LC5F1:
C5F1 68         PLA
C5F2 09 10      ORA #$10
C5F4 48         PHA
C5F5          idl7:
C5F5 E6 12      INC drvnum
C5F7 A5 05      LDA t1
C5F9 F0 0C      BEQ LC607
C5FB          LC5FB:
C5FB AD A7 10   LDA wpsw+1
C5FE F0 03      BEQ LC603
C600          LC600:
C600 20 35 DA   JSR cldchn
C603          LC603:
C603 68         PLA
C604 09 08      ORA #$8
C606 48         PHA
C607          LC607:
C607 68         PLA
C608 8D 82 02   STA io_dskcnt
C60B 68         PLA
C60C 85 12      STA drvnum
C60E 4C A1 C5   JMP idl01
C611          sysirq:
C611 A2 FF      LDX #$FF
C613 8E 3B 43   STX cmdnum
C616 9A         TXS
C617 AD 87 02   LDA io_ifr?
C61A A9 18      LDA #$18
C61C 0D 80 02   ORA io_ieee_ctl
C61F 8D 80 02   STA io_ieee_ctl
C622 A9 FF      LDA #$FF
C624 8D 02 02   STA io_ieee_data_out
C627          LC627:
C627 A9 07      LDA #$7
C629 0D 80 02   ORA io_ieee_ctl
C62C 8D 80 02   STA io_ieee_ctl
C62F          LC62F:
C62F 2C 80 02   BIT io_ieee_ctl
C632 50 04      BVC LC638
C634          LC634:
C634 30 F9      BMI LC62F
C636          LC636:
C636 10 7B      BPL atns20
C638          LC638:
C638 A9 FB      LDA #$FB
C63A 2D 80 02   AND io_ieee_ctl
C63D 8D 80 02   STA io_ieee_ctl
C640 29 20      AND #$20
C642 85 AA      STA eoiflg
C644 AD 00 02   LDA io_ieee_data_in
C647 49 FF      EOR #$FF
C649 85 18      STA data
C64B A9 FD      LDA #$FD
C64D 2D 80 02   AND io_ieee_ctl
C650 8D 80 02   STA io_ieee_ctl
C653 A0 00      LDY #$0
C655 A5 18      LDA data
C657 29 60      AND #$60
C659 C9 40      CMP #$40
C65B F0 29      BEQ LC686
C65D          LC65D:
C65D C9 20      CMP #$20
C65F F0 06      BEQ LC667
C661          LC661:
C661 C9 60      CMP #$60
C663 F0 2F      BEQ LC694
C665          LC665:
C665 D0 44      BNE LC6AB
C667          LC667:
C667 A5 18      LDA data
C669 C5 0C      CMP lsnadr
C66B F0 0B      BEQ LC678
C66D          LC66D:
C66D C9 3F      CMP #$3F
C66F D0 02      BNE LC673
C671          LC671:
C671 84 0E      STY lsnact
C673          LC673:
C673 84 10      STY lsntlk?
C675 4C AB C6   JMP LC6AB
C678          LC678:
C678 85 0E      STA lsnact
C67A 84 0F      STY tlkact
C67C          LC67C:
C67C A9 20      LDA #$20
C67E 85 16      STA sa
C680 85 17      STA orgsa
C682 85 10      STA lsntlk?
C684 D0 25      BNE LC6AB
C686          LC686:
C686 84 0F      STY tlkact
C688 A5 18      LDA data
C68A C5 0D      CMP tlkadr
C68C D0 E5      BNE LC673
C68E          LC68E:
C68E 85 0F      STA tlkact
C690 84 0E      STY lsnact
C692 F0 E8      BEQ LC67C
C694          LC694:
C694 A5 10      LDA lsntlk?
C696 F0 13      BEQ LC6AB
C698          LC698:
C698 A5 18      LDA data
C69A 85 17      STA orgsa
C69C 48         PHA
C69D 29 0F      AND #$F
C69F 85 16      STA sa
C6A1 68         PLA
C6A2 29 F0      AND #$F0
C6A4 C9 E0      CMP #$E0
C6A6 D0 03      BNE LC6AB
C6A8          LC6A8:
C6A8 20 0D E3   JSR close
C6AB          LC6AB:
C6AB 2C 80 02   BIT io_ieee_ctl
C6AE 50 FB      BVC LC6AB
C6B0          LC6B0:
C6B0 4C 27 C6   JMP LC627
C6B3          atns20:
C6B3 A5 0E      LDA lsnact
C6B5 F0 0F      BEQ atn100
C6B7          LC6B7:
C6B7 A9 FA      LDA #$FA
C6B9 2D 80 02   AND io_ieee_ctl
C6BC 8D 80 02   STA io_ieee_ctl
C6BF 58         CLI
C6C0 20 D9 C6   JSR listen?
C6C3 4C 27 FF   JMP idle
C6C6          atn100:
C6C6 A9 FC      LDA #$FC
C6C8 2D 80 02   AND io_ieee_ctl
C6CB 8D 80 02   STA io_ieee_ctl
C6CE A5 0F      LDA tlkact
C6D0 F0 04      BEQ atn110
C6D2          LC6D2:
C6D2 58         CLI
C6D3 20 69 C7   JSR talk
C6D6          atn110:
C6D6 4C 27 FF   JMP idle
C6D9          listen?:
C6D9 A9 04      LDA #$4
C6DB 0D 80 02   ORA io_ieee_ctl
C6DE 8D 80 02   STA io_ieee_ctl
C6E1          LC6E1:
C6E1 2C 80 02   BIT io_ieee_ctl
C6E4 70 FB      BVS LC6E1
C6E6          LC6E6:
C6E6 20 56 D8   JSR fndwch
C6E9 B0 05      BCS LC6F0
C6EB          LC6EB:
C6EB B5 A2      LDA chnrdy,X
C6ED 6A         ROR A
C6EE B0 49      BCS LC739
C6F0          LC6F0:
C6F0 A5 17      LDA orgsa
C6F2 29 F0      AND #$F0
C6F4 C9 F0      CMP #$F0
C6F6 F0 41      BEQ LC739
C6F8          LC6F8:
C6F8 A5 16      LDA sa
C6FA C9 01      CMP #$1
C6FC F0 0E      BEQ LC70C
C6FE          LC6FE:
C6FE 2C 80 02   BIT io_ieee_ctl
C701 50 FB      BVC LC6FE
C703          LC703:
C703 A9 FD      LDA #$FD
C705 2D 80 02   AND io_ieee_ctl
C708 8D 80 02   STA io_ieee_ctl
C70B 60         RTS
C70C          LC70C:
C70C A9 FB      LDA #$FB
C70E 2D 80 02   AND io_ieee_ctl
C711 8D 80 02   STA io_ieee_ctl
C714 A9 FD      LDA #$FD
C716 2D 80 02   AND io_ieee_ctl
C719 8D 80 02   STA io_ieee_ctl
C71C          LC71C:
C71C 2C 80 02   BIT io_ieee_ctl
C71F 50 FB      BVC LC71C
C721          LC721:
C721 A9 02      LDA #$2
C723 0D 80 02   ORA io_ieee_ctl
C726 8D 80 02   STA io_ieee_ctl
C729 A9 04      LDA #$4
C72B 0D 80 02   ORA io_ieee_ctl
C72E 8D 80 02   STA io_ieee_ctl
C731          LC731:
C733          lsn30 = * + 2
C731 2C 80 02   BIT io_ieee_ctl
C734 50 FB      BVC LC731
C736          LC736:
C736 4C 0C C7   JMP LC70C
C739          LC739:
C739 A9 FB      LDA #$FB
C73B 2D 80 02   AND io_ieee_ctl
C73E 8D 80 02   STA io_ieee_ctl
C741 29 20      AND #$20
C743 85 AA      STA eoiflg
C745 AD 00 02   LDA io_ieee_data_in
C748 49 FF      EOR #$FF
C74A 85 18      STA data
C74C 78         SEI
C74D A9 FD      LDA #$FD
C74F 2D 80 02   AND io_ieee_ctl
C752 8D 80 02   STA io_ieee_ctl
C755          LC755:
C755 2C 80 02   BIT io_ieee_ctl
C758 50 FB      BVC LC755
C75A          LC75A:
C75A A9 02      LDA #$2
C75C 0D 80 02   ORA io_ieee_ctl
C75F 8D 80 02   STA io_ieee_ctl
C762 20 10 D7   JSR put
C765 58         CLI
C766 4C D9 C6   JMP listen?
C769          talk:
C769 20 3B D8   JSR fndrch
C76C B0 06      BCS notlk
C76E          LC76E:
C76E A6 15      LDX lindx
C770 B5 A2      LDA chnrdy,X
C772 30 01      BMI tlk05
C774          notlk:
C774 60         RTS
C775          tlk05:
C775 2C 82 02   BIT io_dskcnt
C778 10 FB      BPL tlk05
C77A          LC77A:
C77A B5 BF      LDA chndat,X
C77C 49 FF      EOR #$FF
C77E 8D 02 02   STA io_ieee_data_out
C781 B5 A2      LDA chnrdy,X
C783 09 E7      ORA #$E7
C785 2D 80 02   AND io_ieee_ctl
C788 8D 80 02   STA io_ieee_ctl
C78B          LC78B:
C78B 2C 82 02   BIT io_dskcnt
C78E 10 0D      BPL LC79D
C790          LC790:
C790 50 F9      BVC LC78B
C792          LC792:
C792 A9 18      LDA #$18
C794 0D 80 02   ORA io_ieee_ctl
C797 8D 80 02   STA io_ieee_ctl
C79A 4C 27 FF   JMP idle
C79D          LC79D:
C79D 20 84 DA   JSR LDA84
C7A0          LC7A0:
C7A0 2C 82 02   BIT io_dskcnt
C7A3 50 FB      BVC LC7A0
C7A5          LC7A5:
C7A5 A9 FF      LDA #$FF
C7A7 8D 02 02   STA io_ieee_data_out
C7AA A9 18      LDA #$18
C7AC 0D 80 02   ORA io_ieee_ctl
C7AF 8D 80 02   STA io_ieee_ctl
C7B2          LC7B2:
C7B2 2C 82 02   BIT io_dskcnt
C7B5 70 FB      BVS LC7B2
C7B7          LC7B7:
C7B7 50 B5      BVC LC76E
C7B9          parsxq:
C7B9 20 45 F1   JSR okerr
C7BC A5 17      LDA orgsa
C7BE 10 09      BPL ps5
C7C0          LC7C0:
C7C0 29 0F      AND #$F
C7C2 C9 0F      CMP #$F
C7C4 F0 03      BEQ ps5
C7C6          LC7C6:
C7C6 4C 01 E0   JMP open
C7C9          ps5:
C7C9 20 18 C9   JSR cmdset
C7CC B1 45      LDA (cb_buftab_cmdbuf),Y
C7CE 8D 77 43   STA char
C7D1 A2 0B      LDX #$B
C7D3          ps10:
C7D3 BD 58 FF   LDA cmdtbl,X
C7D6 CD 77 43   CMP char
C7D9 F0 08      BEQ ps20
C7DB          LC7DB:
C7DB CA         DEX
C7DC 10 F5      BPL ps10
C7DE          LC7DE:
C7DE A9 31      LDA #$31
C7E0 4C 2D FF   JMP cmderr
C7E3          ps20:
C7E3 8E 3B 43   STX cmdnum
C7E6 E0 09      CPX #$9
C7E8 90 03      BCC LC7ED
C7EA          LC7EA:
C7EA 20 53 C8   JSR tagcmd
C7ED          LC7ED:
C7ED AE 3B 43   LDX cmdnum
C7F0 BD 64 FF   LDA cjumpl,X
C7F3 85 04      STA t0_temp
C7F5 BD 70 FF   LDA cjumph,X
C7F8 85 05      STA t1
C7FA 6C 04 00   JMP (t0_temp)
C7FD          endcmd:
C7FD AD 6F 43   LDA wbam?
C800 D0 2B      BNE cmderr_j
C802          LC802:
C802 A0 00      LDY #$0
C804 98         TYA
C805 84 13      STY track
C807          scrend:
C807 84 14      STY sector
C809 84 45      STY cb_buftab_cmdbuf
C80B 20 1E FF   JSR errmsg
C80E 20 53 F9   JSR erroff
C811 A5 12      LDA drvnum
C813 8D 90 43   STA lstdrv
C816 AA         TAX
C817 A9 00      LDA #$0
C819 9D A1 43   STA nodrv,X
C81C 20 22 C8   JSR clrcb
C81F 4C B2 DB   JMP freich
C822          clrcb:
C822 A0 39      LDY #$39
C824 A9 00      LDA #$0
C826          LC826:
C826 99 00 43   STA cmdbuf,Y
C829 88         DEY
C82A 10 FA      BPL LC826
C82C          LC82C:
C82C 60         RTS
C82D          cmderr_j:
C82D A0 00      LDY #$0
C82F 84 13      STY track
C831 84 14      STY sector
C833 4C 30 FF   JMP cmder2
C836          simprs:
C836 A2 00      LDX #$0
C838 8E 7C 43   STX filtbl
C83B A9 3A      LDA #$3A
C83D 20 CD C8   JSR parse
C840 F0 05      BEQ LC847
C842          LC842:
C842 88         DEY
C843 88         DEY
C844 8C 7C 43   STY filtbl
C847          LC847:
C847 4C CA C9   JMP LC9CA
C84A          prscln:
C84A A0 00      LDY #$0
C84C A2 00      LDX #$0
C84E A9 3A      LDA #$3A
C850 4C CD C8   JMP parse
C853          tagcmd:
C853 20 4A C8   JSR prscln
C856 D0 05      BNE LC85D
C858          LC858:
C858 A9 34      LDA #$34
C85A 4C 2D FF   JMP cmderr
C85D          LC85D:
C85D 88         DEY
C85E 88         DEY
C85F 8C 7C 43   STY filtbl
C862 8A         TXA
C863 D0 F3      BNE LC858
C865          LC865:
C865 A9 3D      LDA #$3D
C867 20 CD C8   JSR parse
C86A 8A         TXA
C86B F0 02      BEQ LC86F
C86D          LC86D:
C86D A9 40      LDA #$40
C86F          LC86F:
C86F 09 21      ORA #$21
C871 8D 8D 43   STA image
C874 E8         INX
C875 8E 79 43   STX f1cnt
C878 8E 7A 43   STX f2cnt
C87B AD 8C 43   LDA patflg
C87E F0 0D      BEQ LC88D
C880          LC880:
C880 A9 80      LDA #$80
C882 0D 8D 43   ORA image
C885 8D 8D 43   STA image
C888 A9 00      LDA #$0
C88A 8D 8C 43   STA patflg
C88D          LC88D:
C88D 98         TYA
C88E F0 29      BEQ LC8B9
C890          LC890:
C890 9D 7C 43   STA filtbl,X
C893 AD 79 43   LDA f1cnt
C896 8D 7B 43   STA f2ptr
C899 A9 8D      LDA #$8D
C89B 20 CD C8   JSR parse
C89E E8         INX
C89F 8E 7A 43   STX f2cnt
C8A2 CA         DEX
C8A3 AD 8C 43   LDA patflg
C8A6 F0 02      BEQ LC8AA
C8A8          LC8A8:
C8A8 A9 08      LDA #$8
C8AA          LC8AA:
C8AA EC 79 43   CPX f1cnt
C8AD F0 02      BEQ LC8B1
C8AF          LC8AF:
C8AF 09 04      ORA #$4
C8B1          LC8B1:
C8B1 09 03      ORA #$3
C8B3 4D 8D 43   EOR image
C8B6 8D 8D 43   STA image
C8B9          LC8B9:
C8B9 AD 8D 43   LDA image
C8BC AE 3B 43   LDX cmdnum
C8BF 3D 74 FF   AND LFF74,X
C8C2 D0 01      BNE LC8C5
C8C4          LC8C4:
C8C4 60         RTS
C8C5          LC8C5:
C8C5 8D 6F 43   STA wbam?
C8C8 A9 30      LDA #$30
C8CA 4C 2D FF   JMP cmderr
C8CD          parse:
C8CD 8D 77 43   STA char
C8D0          LC8D0:
C8D0 CC 76 43   CPY cmdsiz
C8D3 B0 2E      BCS LC903
C8D5          LC8D5:
C8D5 B1 45      LDA (cb_buftab_cmdbuf),Y
C8D7 C8         INY
C8D8 CD 77 43   CMP char
C8DB F0 28      BEQ LC905
C8DD          LC8DD:
C8DD C9 2A      CMP #$2A
C8DF F0 04      BEQ LC8E5
C8E1          LC8E1:
C8E1 C9 3F      CMP #$3F
C8E3 D0 03      BNE LC8E8
C8E5          LC8E5:
C8E5 EE 8C 43   INC patflg
C8E8          LC8E8:
C8E8 C9 2C      CMP #$2C
C8EA D0 E4      BNE LC8D0
C8EC          LC8EC:
C8EC 98         TYA
C8ED 9D 7D 43   STA filtbl+1,X
C8F0 AD 8C 43   LDA patflg
C8F3 29 7F      AND #$7F
C8F5 F0 07      BEQ LC8FE
C8F7          LC8F7:
C8F7 A9 80      LDA #$80
C8F9 95 95      STA pattyp,X
C8FB 8D 8C 43   STA patflg
C8FE          LC8FE:
C8FE E8         INX
C8FF E0 04      CPX #$4
C901 90 CD      BCC LC8D0
C903          LC903:
C903 A0 00      LDY #$0
C905          LC905:
C905 AD 76 43   LDA cmdsiz
C908 9D 7D 43   STA filtbl+1,X
C90B AD 8C 43   LDA patflg
C90E 29 7F      AND #$7F
C910 F0 04      BEQ LC916
C912          LC912:
C912 A9 80      LDA #$80
C914 95 95      STA pattyp,X
C916          LC916:
C916 98         TYA
C917 60         RTS
C918          cmdset:
C918 A4 45      LDY cb_buftab_cmdbuf
C91A F0 14      BEQ LC930
C91C          LC91C:
C91C 88         DEY
C91D F0 10      BEQ LC92F
C91F          LC91F:
C91F B9 00 43   LDA cmdbuf,Y
C922 C9 0D      CMP #$D
C924 F0 0A      BEQ LC930
C926          LC926:
C926 88         DEY
C927 B9 00 43   LDA cmdbuf,Y
C92A C9 0D      CMP #$D
C92C F0 02      BEQ LC930
C92E          LC92E:
C92E C8         INY
C92F          LC92F:
C92F C8         INY
C930          LC930:
C930 8C 76 43   STY cmdsiz
C933 C0 3B      CPY #$3B
C935 A0 FF      LDY #$FF
C937 90 08      BCC LC941
C939          LC939:
C939 8C 3B 43   STY cmdnum
C93C A9 32      LDA #$32
C93E 4C 2D FF   JMP cmderr
C941          LC941:
C941 A0 00      LDY #$0
C943 98         TYA
C944 85 45      STA cb_buftab_cmdbuf
C946 8D 4D 43   STA rec
C949 85 CF      STA type
C94B 8D 98 43   STA typflg
C94E 85 81      STA f1ptr
C950 8D 7B 43   STA f2ptr
C953 8D 79 43   STA f1cnt
C956 8D 7A 43   STA f2cnt
C959 8D 8C 43   STA patflg
C95C 8D 6F 43   STA wbam?
C95F A2 05      LDX #$5
C961          LC961:
C961 9D 7B 43   STA f2ptr,X
C964 95 85      STA relptr,X
C966 95 8A      STA L8A,X
C968 95 8F      STA io_riot80_t8_fdc,X
C96A 95 94      STA fildrv+4,X
C96C 9D 81 43   STA filtbl+5,X
C96F 9D 86 43   STA filtrk+4,X
C972 CA         DEX
C973 D0 EC      BNE LC961
C975          LC975:
C975 60         RTS
C976          onedrv:
C976 AD 7A 43   LDA f2cnt
C979 8D 79 43   STA f1cnt
C97C A9 01      LDA #$1
C97E 8D 7A 43   STA f2cnt
C981 8D 7B 43   STA f2ptr
C984          alldrs:
C984 AC 90 43   LDY lstdrv
C987 A2 00      LDX #$0
C989          LC989:
C989 86 81      STX f1ptr
C98B BD 7C 43   LDA filtbl,X
C98E 20 A0 C9   JSR LC9A0
C991 A6 81      LDX f1ptr
C993 9D 7C 43   STA filtbl,X
C996 98         TYA
C997 95 90      STA fildrv,X
C999 E8         INX
C99A EC 7A 43   CPX f2cnt
C99D 90 EA      BCC LC989
C99F          LC99F:
C99F 60         RTS
C9A0          LC9A0:
C9A0 AA         TAX
C9A1 A9 3A      LDA #$3A
C9A3 DD 01 43   CMP cmdbuf+1,X
C9A6 F0 0C      BEQ LC9B4
C9A8          LC9A8:
C9A8 DD 00 43   CMP cmdbuf,X
C9AB D0 16      BNE LC9C3
C9AD          LC9AD:
C9AD E8         INX
C9AE          LC9AE:
C9AE 98         TYA
C9AF          LC9AF:
C9AF 29 01      AND #$1
C9B1          LC9B1:
C9B1 A8         TAY
C9B2 8A         TXA
C9B3 60         RTS
C9B4          LC9B4:
C9B4 BD 00 43   LDA cmdbuf,X
C9B7 E8         INX
C9B8 E8         INX
C9B9 C9 30      CMP #$30
C9BB F0 F2      BEQ LC9AF
C9BD          LC9BD:
C9BD C9 31      CMP #$31
C9BF F0 EE      BEQ LC9AF
C9C1          LC9C1:
C9C1 D0 EB      BNE LC9AE
C9C3          LC9C3:
C9C3 98         TYA
C9C4 09 80      ORA #$80
C9C6 29 81      AND #$81
C9C8 D0 E7      BNE LC9B1
C9CA          LC9CA:
C9CA A9 00      LDA #$0
C9CC 8D 8D 43   STA image
C9CF AC 7C 43   LDY filtbl
C9D2          LC9D2:
C9D2 B1 45      LDA (cb_buftab_cmdbuf),Y
C9D4 20 20 CA   JSR tst0v1
C9D7 10 12      BPL LC9EB
C9D9          LC9D9:
C9D9 C8         INY
C9DA CC 76 43   CPY cmdsiz
C9DD B0 06      BCS LC9E5
C9DF          LC9DF:
C9DF AC 76 43   LDY cmdsiz
C9E2 88         DEY
C9E3 D0 ED      BNE LC9D2
C9E5          LC9E5:
C9E5 CE 8D 43   DEC image
C9E8 AD 90 43   LDA lstdrv
C9EB          LC9EB:
C9EB 29 01      AND #$1
C9ED 85 12      STA drvnum
C9EF 4C 21 FF   JMP setlda
C9F2          togdrv:
C9F2 A5 12      LDA drvnum
C9F4 49 01      EOR #$1
C9F6 29 01      AND #$1
C9F8 85 12      STA drvnum
C9FA 60         RTS
C9FB          fs1set:
C9FB A0 00      LDY #$0
C9FD AD 79 43   LDA f1cnt
CA00 CD 7A 43   CMP f2cnt
CA03 F0 16      BEQ LCA1B
CA05          LCA05:
CA05 CE 7A 43   DEC f2cnt
CA08 AC 7A 43   LDY f2cnt
CA0B B9 7C 43   LDA filtbl,Y
CA0E A8         TAY
CA0F B1 45      LDA (cb_buftab_cmdbuf),Y
CA11 A0 04      LDY #$4
CA13          LCA13:
CA13 D9 8A FF   CMP type_dspur,Y
CA16 F0 03      BEQ LCA1B
CA18          LCA18:
CA18 88         DEY
CA19 D0 F8      BNE LCA13
CA1B          LCA1B:
CA1B 98         TYA
CA1C 8D 98 43   STA typflg
CA1F 60         RTS
CA20          tst0v1:
CA20 C9 30      CMP #$30
CA22 F0 06      BEQ LCA2A
CA24          LCA24:
CA24 C9 31      CMP #$31
CA26 F0 02      BEQ LCA2A
CA28          LCA28:
CA28 09 80      ORA #$80
CA2A          LCA2A:
CA2A 29 81      AND #$81
CA2C 60         RTS
CA2D          optsch:
CA2D A9 00      LDA #$0
CA2F 85 04      STA t0_temp
CA31 8D 8F 43   STA drvflg
CA34 48         PHA
CA35 AE 7A 43   LDX f2cnt
CA38          LCA38:
CA38 68         PLA
CA39 05 04      ORA t0_temp
CA3B 48         PHA
CA3C A9 01      LDA #$1
CA3E 85 04      STA t0_temp
CA40 CA         DEX
CA41 30 0F      BMI LCA52
CA43          LCA43:
CA43 B5 90      LDA fildrv,X
CA45 10 04      BPL LCA4B
CA47          LCA47:
CA47 06 04      ASL t0_temp
CA49 06 04      ASL t0_temp
CA4B          LCA4B:
CA4B 4A         LSR A
CA4C 90 EA      BCC LCA38
CA4E          LCA4E:
CA4E 06 04      ASL t0_temp
CA50 D0 E6      BNE LCA38
CA52          LCA52:
CA52 68         PLA
CA53 AA         TAX
CA54 BD A2 CA   LDA schtbl-1,X
CA57 48         PHA
CA58 29 03      AND #$3
CA5A 8D 8E 43   STA drvcnt
CA5D 68         PLA
CA5E 0A         ASL A
CA5F 10         .BYTE $10
CA60          LCA60:
CA60 3E A5 90   ROL L90A5,X
CA63 29 01      AND #$1
CA65 85 12      STA drvnum
CA67 AD 8E 43   LDA drvcnt
CA6A F0 2B      BEQ LCA97
CA6C          LCA6C:
CA6C 20 18 FF   JSR autoi
CA6F F0 12      BEQ LCA83
CA71          LCA71:
CA71 20 F2 C9   JSR togdrv
CA74 A9 00      LDA #$0
CA76 8D 8E 43   STA drvcnt
CA79 20 18 FF   JSR autoi
CA7C F0 1E      BEQ LCA9C
CA7E          LCA7E:
CA7E A9 74      LDA #$74
CA80 20 2D FF   JSR cmderr
CA83          LCA83:
CA83 20 F2 C9   JSR togdrv
CA86 20 18 FF   JSR autoi
CA89 08         PHP
CA8A 20 F2 C9   JSR togdrv
CA8D 28         PLP
CA8E F0 0C      BEQ LCA9C
CA90          LCA90:
CA90 A9 00      LDA #$0
CA92 8D 8E 43   STA drvcnt
CA95 F0 05      BEQ LCA9C
CA97          LCA97:
CA97 20 18 FF   JSR autoi
CA9A D0 E2      BNE LCA7E
CA9C          LCA9C:
CA9C 4C 21 FF   JMP setlda
CA9F 2A 4C 63   .BYTE $2A,$4C,$63
CAA2          schtbl-1:
CAA3          schtbl = * + 1
CAA2 CA 00 80   .BYTE $CA,$0,$80
CAA5 41 01 01   .BYTE $41,$1,$1
CAA8 01 01 81   .BYTE $1,$1,$81
CAAB 81 81 81   .BYTE $81,$81,$81
CAAE 42 42 42   .BYTE $42,$42,$42
CAB1 42         .BYTE $42
CAB2          lookup:
CAB2 20 2D CA   JSR optsch
CAB5          LCAB5:
CAB5 A9 00      LDA #$0
CAB7 8D 94 43   STA delind
CABA 20 0F CC   JSR srchst
CABD D0 19      BNE LCAD8
CABF          LCABF:
CABF CE 8E 43   DEC drvcnt
CAC2 10 01      BPL LCAC5
CAC4          LCAC4:
CAC4 60         RTS
CAC5          LCAC5:
CAC5 A9 01      LDA #$1
CAC7 8D 8F 43   STA drvflg
CACA 20 F2 C9   JSR togdrv
CACD 20 21 FF   JSR setlda
CAD0 4C B5 CA   JMP LCAB5
CAD3          LCAD3:
CAD3 20 7D CC   JSR search
CAD6 F0 10      BEQ LCAE8
CAD8          LCAD8:
CAD8 20 3B CB   JSR LCB3B
CADB AD 91 43   LDA found?
CADE F0 01      BEQ LCAE1
CAE0          LCAE0:
CAE0 60         RTS
CAE1          LCAE1:
CAE1 AD 48 43   LDA entfnd
CAE4 30 ED      BMI LCAD3
CAE6          LCAE6:
CAE6 10 F0      BPL LCAD8
CAE8          LCAE8:
CAE8 AD 91 43   LDA found?
CAEB F0 D2      BEQ LCABF
CAED          LCAED:
CAED 60         RTS
CAEE          ffre:
CAEE 20 6A CC   JSR LCC6A
CAF1 F0 1A      BEQ LCB0D
CAF3          LCAF3:
CAF3 D0 28      BNE LCB1D
CAF5          LCAF5:
CAF5 A9 01      LDA #$1
CAF7 8D 8F 43   STA drvflg
CAFA 20 F2 C9   JSR togdrv
CAFD 20 21 FF   JSR setlda
CB00          ffst:
CB00 A9 00      LDA #$0
CB02 8D 94 43   STA delind
CB05 20 0F CC   JSR srchst
CB08 D0 13      BNE LCB1D
CB0A          LCB0A:
CB0A 8D 91 43   STA found?
CB0D          LCB0D:
CB0D AD 91 43   LDA found?
CB10 D0 28      BNE LCB3A
CB12          LCB12:
CB12 CE 8E 43   DEC drvcnt
CB15 10 DE      BPL LCAF5
CB17          LCB17:
CB17 60         RTS
CB18          LCB18:
CB18 20 7D CC   JSR search
CB1B F0 F0      BEQ LCB0D
CB1D          LCB1D:
CB1D 20 3B CB   JSR LCB3B
CB20 AE 48 43   LDX entfnd
CB23 10 07      BPL LCB2C
CB25          LCB25:
CB25 AD 91 43   LDA found?
CB28 F0 EE      BEQ LCB18
CB2A          LCB2A:
CB2A D0 0E      BNE LCB3A
CB2C          LCB2C:
CB2C AD 98 43   LDA typflg
CB2F F0 09      BEQ LCB3A
CB31          LCB31:
CB31 B5 95      LDA pattyp,X
CB33 29 07      AND #$7
CB35 CD 98 43   CMP typflg
CB38 D0 DE      BNE LCB18
CB3A          LCB3A:
CB3A 60         RTS
CB3B          LCB3B:
CB3B A2 FF      LDX #$FF
CB3D 8E 48 43   STX entfnd
CB40 E8         INX
CB41 8E 8C 43   STX patflg
CB44 20 EC CB   JSR LCBEC
CB47 F0 06      BEQ LCB4F
CB49          LCB49:
CB49 60         RTS
CB4A          LCB4A:
CB4A 20 F7 CB   JSR LCBF7
CB4D D0 FA      BNE LCB49
CB4F          LCB4F:
CB4F A5 12      LDA drvnum
CB51 55 90      EOR fildrv,X
CB53 4A         LSR A
CB54 90 0B      BCC LCB61
CB56          LCB56:
CB56 29 40      AND #$40
CB58 F0 F0      BEQ LCB4A
CB5A          LCB5A:
CB5A A9 02      LDA #$2
CB5C CD 8E 43   CMP drvcnt
CB5F F0 E9      BEQ LCB4A
CB61          LCB61:
CB61 BD 7C 43   LDA filtbl,X
CB64 AA         TAX
CB65 20 0C CD   JSR fndlmt
CB68 A0 03      LDY #$3
CB6A 4C 80 CB   JMP LCB80
CB6D          LCB6D:
CB6D BD 00 43   LDA cmdbuf,X
CB70 D1 27      CMP (dirbuf),Y
CB72 F0 0A      BEQ LCB7E
CB74          LCB74:
CB74 C9 3F      CMP #$3F
CB76 D0 D2      BNE LCB4A
CB78          LCB78:
CB78 B1 27      LDA (dirbuf),Y
CB7A C9 A0      CMP #$A0
CB7C F0 CC      BEQ LCB4A
CB7E          LCB7E:
CB7E E8         INX
CB7F C8         INY
CB80          LCB80:
CB80 EC 78 43   CPX limit
CB83 B0 09      BCS LCB8E
CB85          LCB85:
CB85 BD 00 43   LDA cmdbuf,X
CB88 C9 2A      CMP #$2A
CB8A F0 0C      BEQ LCB98
CB8C          LCB8C:
CB8C D0 DF      BNE LCB6D
CB8E          LCB8E:
CB8E C0 13      CPY #$13
CB90 B0 06      BCS LCB98
CB92          LCB92:
CB92 B1 27      LDA (dirbuf),Y
CB94 C9 A0      CMP #$A0
CB96 D0 B2      BNE LCB4A
CB98          LCB98:
CB98 AE 7B 43   LDX f2ptr
CB9B 8E 48 43   STX entfnd
CB9E B5 95      LDA pattyp,X
CBA0 29 80      AND #$80
CBA2 8D 8C 43   STA patflg
CBA5 AD 96 43   LDA index
CBA8 95 8B      STA entind,X
CBAA A5 14      LDA sector
CBAC 95 86      STA entsec,X
CBAE A0 00      LDY #$0
CBB0 B1 27      LDA (dirbuf),Y
CBB2 C8         INY
CBB3 48         PHA
CBB4 29 40      AND #$40
CBB6 85 04      STA t0_temp
CBB8 68         PLA
CBB9 29 DF      AND #$DF
CBBB 30 02      BMI LCBBF
CBBD          LCBBD:
CBBD 09 20      ORA #$20
CBBF          LCBBF:
CBBF 29 27      AND #$27
CBC1 05 04      ORA t0_temp
CBC3 85 04      STA t0_temp
CBC5 A9 80      LDA #$80
CBC7 35 95      AND pattyp,X
CBC9 05 04      ORA t0_temp
CBCB 95 95      STA pattyp,X
CBCD B5 90      LDA fildrv,X
CBCF 29 80      AND #$80
CBD1 05 12      ORA drvnum
CBD3 95 90      STA fildrv,X
CBD5 B1 27      LDA (dirbuf),Y
CBD7 9D 82 43   STA filtrk,X
CBDA C8         INY
CBDB B1 27      LDA (dirbuf),Y
CBDD 9D 87 43   STA filsec,X
CBE0 AD 4D 43   LDA rec
CBE3 D0 07      BNE LCBEC
CBE5          LCBE5:
CBE5 A0 15      LDY #$15
CBE7 B1 27      LDA (dirbuf),Y
CBE9 8D 4D 43   STA rec
CBEC          LCBEC:
CBEC A9 FF      LDA #$FF
CBEE 8D 91 43   STA found?
CBF1 AD 7A 43   LDA f2cnt
CBF4 8D 7B 43   STA f2ptr
CBF7          LCBF7:
CBF7 CE 7B 43   DEC f2ptr
CBFA 10 01      BPL LCBFD
CBFC          LCBFC:
CBFC 60         RTS
CBFD          LCBFD:
CBFD AE 7B 43   LDX f2ptr
CC00 B5 95      LDA pattyp,X
CC02 30 05      BMI LCC09
CC04          LCC04:
CC04 BD 82 43   LDA filtrk,X
CC07 D0 EE      BNE LCBF7
CC09          LCC09:
CC09 A9 00      LDA #$0
CC0B 8D 91 43   STA found?
CC0E 60         RTS
CC0F          srchst:
CC0F 20 18 FF   JSR autoi
CC12 A0 00      LDY #$0
CC14 8C 93 43   STY delsec
CC17 88         DEY
CC18 8C 48 43   STY entfnd
CC1B AD CA 10   LDA dirtrack
CC1E 85 13      STA track
CC20 A9 01      LDA #$1
CC22 85 14      STA sector
CC24 8D 95 43   STA lstbuf
CC27 20 4B DB   JSR opnird
CC2A          LCC2A:
CC2A AD 95 43   LDA lstbuf
CC2D D0 01      BNE sr15
CC2F          LCC2F:
CC2F 60         RTS
CC30          sr15:
CC30 A9 07      LDA #$7
CC32 8D 97 43   STA filcnt
CC35 A9 00      LDA #$0
CC37 20 CE DB   JSR drdbyt
CC3A 8D 95 43   STA lstbuf
CC3D          sr20:
CC3D 20 C0 DB   JSR getpnt
CC40 CE 97 43   DEC filcnt
CC43 A0 00      LDY #$0
CC45 B1 27      LDA (dirbuf),Y
CC47 D0 18      BNE LCC61
CC49          LCC49:
CC49 AD 93 43   LDA delsec
CC4C D0 2F      BNE search
CC4E          LCC4E:
CC4E 20 14 E7   JSR curblk
CC51 A5 14      LDA sector
CC53 8D 93 43   STA delsec
CC56 A5 27      LDA dirbuf
CC58 AE 94 43   LDX delind
CC5B 8D 94 43   STA delind
CC5E F0 1D      BEQ search
CC60          LCC60:
CC60 60         RTS
CC61          LCC61:
CC61 A2 01      LDX #$1
CC63 EC 94 43   CPX delind
CC66 D0 2D      BNE sr50
CC68          LCC68:
CC68 F0 13      BEQ search
CC6A          LCC6A:
CC6A AD CA 10   LDA dirtrack
CC6D 85 13      STA track
CC6F AD 92 43   LDA dirsec
CC72 85 14      STA sector
CC74 20 4B DB   JSR opnird
CC77 AD 96 43   LDA index
CC7A 20 A0 DB   JSR setpnt
CC7D          search:
CC7D A9 FF      LDA #$FF
CC7F 8D 48 43   STA entfnd
CC82 AD 97 43   LDA filcnt
CC85 30 08      BMI LCC8F
CC87          LCC87:
CC87 A9 20      LDA #$20
CC89 20 14 D9   JSR incptr
CC8C 4C 3D CC   JMP sr20
CC8F          LCC8F:
CC8F 20 23 DB   JSR nxtbuf
CC92 4C 2A CC   JMP LCC2A
CC95          sr50:
CC95 A5 27      LDA dirbuf
CC97 8D 96 43   STA index
CC9A 20 14 E7   JSR curblk
CC9D A5 14      LDA sector
CC9F 8D 92 43   STA dirsec
CCA2 60         RTS
CCA3          autoi_j:
CCA3 AD F3 10   LDA autofg
CCA6 D0 26      BNE auto2
CCA8          LCCA8:
CCA8 A6 12      LDX drvnum
CCAA 5E A6 10   LSR wpsw,X
CCAD 90 1F      BCC auto2
CCAF          LCCAF:
CCAF A9 FF      LDA #$FF
CCB1 8D 9A 43   STA jobrtn
CCB4 20 78 D7   JSR itrial
CCB7 A0 FF      LDY #$FF
CCB9 C9 02      CMP #$2
CCBB F0 06      BEQ auto1
CCBD          LCCBD:
CCBD C9 03      CMP #$3
CCBF F0 02      BEQ auto1
CCC1          LCCC1:
CCC1 A0 00      LDY #$0
CCC3          auto1:
CCC3 A6 12      LDX drvnum
CCC5 98         TYA
CCC6 9D A1 43   STA nodrv,X
CCC9 D0 03      BNE auto2
CCCB          LCCCB:
CCCB 20 89 D7   JSR initdr
CCCE          auto2:
CCCE A6 12      LDX drvnum
CCD0 BD A1 43   LDA nodrv,X
CCD3 60         RTS
CCD4          trname:
CCD4 48         PHA
CCD5 20 0C CD   JSR fndlmt
CCD8 20 EE CC   JSR trcmbf
CCDB 68         PLA
CCDC 38         SEC
CCDD ED 3C 43   SBC strsiz
CCE0 AA         TAX
CCE1 F0 0A      BEQ LCCED
CCE3          LCCE3:
CCE3 90 08      BCC LCCED
CCE5          LCCE5:
CCE5 A9 A0      LDA #$A0
CCE7          LCCE7:
CCE7 91 27      STA (dirbuf),Y
CCE9 C8         INY
CCEA CA         DEX
CCEB D0 FA      BNE LCCE7
CCED          LCCED:
CCED 60         RTS
CCEE          trcmbf:
CCEE 98         TYA
CCEF 0A         ASL A
CCF0 A8         TAY
CCF1 B9 29 00   LDA buftab_0,Y
CCF4 85 27      STA dirbuf
CCF6 B9 2A 00   LDA buftab_0+1,Y
CCF9 85 28      STA dirbuf+1
CCFB A0 00      LDY #$0
CCFD          LCCFD:
CCFD BD 00 43   LDA cmdbuf,X
CD00 91 27      STA (dirbuf),Y
CD02 C8         INY
CD03 F0 06      BEQ LCD0B
CD05          LCD05:
CD05 E8         INX
CD06 EC 78 43   CPX limit
CD09 90 F2      BCC LCCFD
CD0B          LCD0B:
CD0B 60         RTS
CD0C          fndlmt:
CD0C A9 00      LDA #$0
CD0E 8D 3C 43   STA strsiz
CD11 8A         TXA
CD12 48         PHA
CD13          LCD13:
CD13 BD 00 43   LDA cmdbuf,X
CD16 C9 2C      CMP #$2C
CD18 F0 14      BEQ LCD2E
CD1A          LCD1A:
CD1A C9 3D      CMP #$3D
CD1C F0 10      BEQ LCD2E
CD1E          LCD1E:
CD1E EE 3C 43   INC strsiz
CD21 E8         INX
CD22 A9 0F      LDA #$F
CD24 CD 3C 43   CMP strsiz
CD27 90 05      BCC LCD2E
CD29          LCD29:
CD29 EC 76 43   CPX cmdsiz
CD2C 90 E5      BCC LCD13
CD2E          LCD2E:
CD2E 8E 78 43   STX limit
CD31 68         PLA
CD32 AA         TAX
CD33 60         RTS
CD34          getnam:
CD34 A5 16      LDA sa
CD36 48         PHA
CD37 A5 15      LDA lindx
CD39 48         PHA
CD3A 20 44 CD   JSR gnsub
CD3D 68         PLA
CD3E 85 15      STA lindx
CD40 68         PLA
CD41 85 16      STA sa
CD43 60         RTS
CD44          gnsub:
CD44 A9 11      LDA #$11
CD46 85 16      STA sa
CD48 20 3B D8   JSR fndrch
CD4B 20 C0 DB   JSR getpnt
CD4E AD 48 43   LDA entfnd
CD51 10 0C      BPL LCD5F
CD53          LCD53:
CD53 AD 8F 43   LDA drvflg
CD56 D0 0C      BNE LCD64
CD58          LCD58:
CD58 20 6C CE   JSR msgfre
CD5B 18         CLC
CD5C 4C 13 CE   JMP arts1
CD5F          LCD5F:
CD5F AD 8F 43   LDA drvflg
CD62 F0 1F      BEQ gn10
CD64          LCD64:
CD64 CE 8F 43   DEC drvflg
CD67 D0 0D      BNE gn051
CD69          LCD69:
CD69 CE 8F 43   DEC drvflg
CD6C 20 F2 C9   JSR togdrv
CD6F 20 6C CE   JSR msgfre
CD72 38         SEC
CD73 4C F2 C9   JMP togdrv
CD76          gn051:
CD76 A9 00      LDA #$0
CD78 8D 75 43   STA nbtmp+1
CD7B 8D 8F 43   STA drvflg
CD7E 20 1F CE   JSR newdir
CD81 38         SEC
CD82 60         RTS
CD83          gn10:
CD83 A2 18      LDX #$18
CD85 A0 1D      LDY #$1D
CD87 B1 27      LDA (dirbuf),Y
CD89 8D 75 43   STA nbtmp+1
CD8C F0 02      BEQ LCD90
CD8E          LCD8E:
CD8E A2 16      LDX #$16
CD90          LCD90:
CD90 88         DEY
CD91 B1 27      LDA (dirbuf),Y
CD93 8D 74 43   STA nbtmp
CD96 E0 16      CPX #$16
CD98 F0 0A      BEQ LCDA4
CD9A          LCD9A:
CD9A C9 0A      CMP #$A
CD9C 90 06      BCC LCDA4
CD9E          LCD9E:
CD9E CA         DEX
CD9F C9 64      CMP #$64
CDA1 90 01      BCC LCDA4
CDA3          LCDA3:
CDA3 CA         DEX
CDA4          LCDA4:
CDA4 20 14 CE   JSR blknb
CDA7 B1 27      LDA (dirbuf),Y
CDA9 48         PHA
CDAA 0A         ASL A
CDAB 10 05      BPL LCDB2
CDAD          LCDAD:
CDAD A9 3C      LDA #$3C
CDAF 9D B9 43   STA nambuf+1,X
CDB2          LCDB2:
CDB2 68         PLA
CDB3 29 0F      AND #$F
CDB5 A8         TAY
CDB6 B9 94 FF   LDA type_dspur3,Y
CDB9 9D B8 43   STA nambuf,X
CDBC CA         DEX
CDBD B9 8F FF   LDA type_dspur2,Y
CDC0 9D B8 43   STA nambuf,X
CDC3 CA         DEX
CDC4 B9 8A FF   LDA type_dspur,Y
CDC7 9D B8 43   STA nambuf,X
CDCA CA         DEX
CDCB CA         DEX
CDCC B0 05      BCS LCDD3
CDCE          LCDCE:
CDCE A9 2A      LDA #$2A
CDD0 9D B9 43   STA nambuf+1,X
CDD3          LCDD3:
CDD3 A9 A0      LDA #$A0
CDD5 9D B8 43   STA nambuf,X
CDD8 CA         DEX
CDD9 A0 12      LDY #$12
CDDB          LCDDB:
CDDB B1 27      LDA (dirbuf),Y
CDDD 9D B8 43   STA nambuf,X
CDE0 CA         DEX
CDE1 88         DEY
CDE2 C0 03      CPY #$3
CDE4 B0 F5      BCS LCDDB
CDE6          LCDE6:
CDE6 A9 22      LDA #$22
CDE8 9D B8 43   STA nambuf,X
CDEB          LCDEB:
CDEB E8         INX
CDEC E0 20      CPX #$20
CDEE B0 0B      BCS LCDFB
CDF0          LCDF0:
CDF0 BD B8 43   LDA nambuf,X
CDF3 C9 22      CMP #$22
CDF5 F0 04      BEQ LCDFB
CDF7          LCDF7:
CDF7 C9 A0      CMP #$A0
CDF9 D0 F0      BNE LCDEB
CDFB          LCDFB:
CDFB A9 22      LDA #$22
CDFD 9D B8 43   STA nambuf,X
CE00          LCE00:
CE00 E8         INX
CE01 E0 20      CPX #$20
CE03 B0 0A      BCS LCE0F
CE05          LCE05:
CE05 A9 7F      LDA #$7F
CE07 3D B8 43   AND nambuf,X
CE0A 9D B8 43   STA nambuf,X
CE0D 10 F1      BPL LCE00
CE0F          LCE0F:
CE0F 20 18 CB   JSR LCB18
CE12 38         SEC
CE13          arts1:
CE13 60         RTS
CE14          blknb:
CE14 A0 1B      LDY #$1B
CE16 A9 20      LDA #$20
CE18          LCE18:
CE18 99 B7 43   STA nambuf-1,Y
CE1B 88         DEY
CE1C D0 FA      BNE LCE18
CE1E          LCE1E:
CE1E 60         RTS
CE1F          newdir:
CE1F 20 18 FF   JSR autoi
CE22 20 26 F9   JSR redbam
CE25 20 14 CE   JSR blknb
CE28 A9 FF      LDA #$FF
CE2A 85 04      STA t0_temp
CE2C A6 12      LDX drvnum
CE2E 8E 74 43   STX nbtmp
CE31 A9 00      LDA #$0
CE33 8D 75 43   STA nbtmp+1
CE36 BD 9E FF   LDA hibyteofdirbuf,X
CE39 85 28      STA dirbuf+1
CE3B AD CE 10   LDA positionofdiskname
CE3E 85 27      STA dirbuf
CE40 A0 16      LDY #$16
CE42 B1 27      LDA (dirbuf),Y
CE44 C9 A0      CMP #$A0
CE46 D0 0B      BNE LCE53
CE48          LCE48:
CE48 A9 31      LDA #$31
CE4B          LCE4B = * + 1
              ; Instruction parameter jumped to.
CE4A 2C B1 27   BIT L27B1
CE4D C9 A0      CMP #$A0
CE4F D0 02      BNE LCE53
CE51          LCE51:
CE51 A9 20      LDA #$20
CE53          LCE53:
CE53 99 BA 43   STA nambuf+2,Y
CE56 88         DEY
CE57 10 F2      BPL LCE4B
CE59          LCE59:
CE59 A9 12      LDA #$12
CE5B 8D B8 43   STA nambuf
CE5E A9 22      LDA #$22
CE60 8D B9 43   STA nambuf+1
CE63 8D CA 43   STA L43CA
CE66 A9 20      LDA #$20
CE68 8D CB 43   STA L43CB
CE6B 60         RTS
CE6C          msgfre:
CE6C 20 14 CE   JSR blknb
CE6F A0 0B      LDY #$B
CE71          LCE71:
CE71 B9 7D CE   LDA LCE7D,Y
CE74 99 B8 43   STA nambuf,Y
CE77 88         DEY
CE78 10 F7      BPL LCE71
CE7A          LCE7A:
CE7A 4C BA F7   JMP numfre
CE7D          LCE7D:
CE7D 42 4C 4F   .BYTE $42,$4C,$4F
CE80 43 4B 53   .BYTE $43,$4B,$53
CE83 20 46 52   .BYTE $20,$46,$52
CE86 45 45 2E   .BYTE $45,$45,$2E
CE89          scrtch:
CE89 20 FB      .BYTE $20,$FB
CE8B          LCE8B:
CE8B C9 20      CMP #$20
CE8D 84 C9      STY LC9
CE8F 20 2D CA   JSR optsch
CE92 A9 00      LDA #$0
CE94 85 19      STA r0
CE96 20 00 CB   JSR ffst
CE99 30 3D      BMI LCED8
CE9B          LCE9B:
CE9B 20 91 E6   JSR tstchn
CE9E 90 33      BCC LCED3
CEA0          LCEA0:
CEA0 A0 00      LDY #$0
CEA2 B1 27      LDA (dirbuf),Y
CEA4 29 40      AND #$40
CEA6 D0 2B      BNE LCED3
CEA8          LCEA8:
CEA8 20 0B CF   JSR deldir
CEAB A0 13      LDY #$13
CEAD B1 27      LDA (dirbuf),Y
CEAF F0 0A      BEQ LCEBB
CEB1          LCEB1:
CEB1 85 13      STA track
CEB3 C8         INY
CEB4 B1 27      LDA (dirbuf),Y
CEB6 85 14      STA sector
CEB8 20 E3 CE   JSR delfil
CEBB          LCEBB:
CEBB AE 48 43   LDX entfnd
CEBE A9 20      LDA #$20
CEC0 35 95      AND pattyp,X
CEC2 D0 0D      BNE LCED1
CEC4          LCEC4:
CEC4 BD 82 43   LDA filtrk,X
CEC7 85 13      STA track
CEC9 BD 87 43   LDA filsec,X
CECC 85 14      STA sector
CECE 20 E3 CE   JSR delfil
CED1          LCED1:
CED1 E6 19      INC r0
CED3          LCED3:
CED3 20 EE CA   JSR ffre
CED6 10 C3      BPL LCE9B
CED8          LCED8:
CED8 A5 19      LDA r0
CEDA 85 13      STA track
CEDC A9 01      LDA #$1
CEDE A0 00      LDY #$0
CEE0 4C 07 C8   JMP scrend
CEE3          delfil:
CEE3 20 06 FF   JSR frets
CEE6 20 4B DB   JSR opnird
CEE9          LCEE9:
CEE9 A9 00      LDA #$0
CEEB 20 A0 DB   JSR setpnt
CEEE 20 A4 D8   JSR rdbyt
CEF1 85 13      STA track
CEF3 20 A4 D8   JSR rdbyt
CEF6 85 14      STA sector
CEF8 A5 13      LDA track
CEFA D0 06      BNE del1
CEFC          LCEFC:
CEFC 20 74 F7   JSR mapout
CEFF 4C 74 D9   JMP frechn
CF02          del1:
CF02 20 06 FF   JSR frets
CF05 20 23 DB   JSR nxtbuf
CF08 4C E9 CE   JMP LCEE9
CF0B          deldir:
CF0B A0 00      LDY #$0
CF0D 98         TYA
CF0E 91 27      STA (dirbuf),Y
CF10 20 39 E7   JSR wrtout
CF13 4C 89 DC   JMP watjob
CF16          duplicate:
CF16 20 86 D0   JSR LD086
CF19 A5 91      LDA fildrv+1
CF1B 85 12      STA drvnum
CF1D A9 18      LDA #$18
CF1F 0D 82 02   ORA io_dskcnt
CF22 8D 82 02   STA io_dskcnt
CF25 20 89 D7   JSR initdr
CF28 20 29 FA   JSR setbpt__
CF2B A0 02      LDY #$2
CF2D B1 02      LDA (bmpnt),Y
CF2F CD 9F 10   CMP vernum
CF32 F0 03      BEQ LCF37
CF34          LCF34:
CF34 4C 61 DC   JMP vnerr
CF37          LCF37:
CF37 20 F2 C9   JSR togdrv
CF3A 0A         ASL A
CF3B A8         TAY
CF3C 49 02      EOR #$2
CF3E AA         TAX
CF3F BD 42 43   LDA dskid,X
CF42 99 42 43   STA dskid,Y
CF45 BD 43 43   LDA dskid+1,X
CF48 99 43 43   STA dskid+1,Y
CF4B 20 29 FA   JSR setbpt__
CF4E A0 02      LDY #$2
CF50 AD 9F 10   LDA vernum
CF53 91 02      STA (bmpnt),Y
CF55 20 35 DA   JSR cldchn
CF58 A2 01      LDX #$1
CF5A 86 13      STX track
CF5C 20 E7 CF   JSR format
CF5F          LCF5F:
CF5F A5 13      LDA track
CF61 20 12 FF   JSR maxsec
CF64 85 14      STA sector
CF66 C6 14      DEC sector
CF68 20 7A CF   JSR LCF7A
CF6B E6 13      INC track
CF6D A5 13      LDA track
CF6F CD E9 10   CMP maxtrk
CF72 D0 EB      BNE LCF5F
CF74          LCF74:
CF74 20 89 D7   JSR initdr
CF77 4C FD C7   JMP endcmd
CF7A          LCF7A:
CF7A 20 88 CF   JSR LCF88
CF7D 20 A3 CF   JSR LCFA3
CF80 20 C7 CF   JSR LCFC7
CF83 A5 14      LDA sector
CF85 10 F3      BPL LCF7A
CF87          LCF87:
CF87 60         RTS
CF88          LCF88:
CF88 A5 12      LDA drvnum
CF8A 49 01      EOR #$1
CF8C 8D 3E 43   STA cmd
CF8F A9 0A      LDA #$A
CF91 85 06      STA t2
CF93          LCF93:
CF93 A5 06      LDA t2
CF95 20 1B FF   JSR sethdra
CF98 C6 14      DEC sector
CF9A 30 06      BMI LCFA2
CF9C          LCF9C:
CF9C C6 06      DEC t2
CF9E 10 F3      BPL LCF93
CFA0          LCFA0:
CFA0 E6 06      INC t2
CFA2          LCFA2:
CFA2 60         RTS
CFA3          LCFA3:
CFA3 AD 3E 43   LDA cmd
CFA6 09 80      ORA #$80
CFA8 8D 3E 43   STA cmd
CFAB A6 06      LDX t2
CFAD          LCFAD:
CFAD AD 3E 43   LDA cmd
CFB0 20 F5 DB   JSR setjob
CFB3 E0 0A      CPX #$A
CFB5 F0 03      BEQ LCFBA
CFB7          LCFB7:
CFB7 E8         INX
CFB8 D0 F3      BNE LCFAD
CFBA          LCFBA:
CFBA A6 06      LDX t2
CFBC          LCFBC:
CFBC 20 89 DC   JSR watjob
CFBF E0 0A      CPX #$A
CFC1 F0 03      BEQ LCFC6
CFC3          LCFC3:
CFC3 E8         INX
CFC4 D0 F6      BNE LCFBC
CFC6          LCFC6:
CFC6 60         RTS
CFC7          LCFC7:
CFC7 A9 90      LDA #$90
CFC9 05 12      ORA drvnum
CFCB 8D 3E 43   STA cmd
CFCE A6 06      LDX t2
CFD0          LCFD0:
CFD0 20 F5 DB   JSR setjob
CFD3 E0 0A      CPX #$A
CFD5 F0 03      BEQ LCFDA
CFD7          LCFD7:
CFD7 E8         INX
CFD8 D0 F6      BNE LCFD0
CFDA          LCFDA:
CFDA A6 06      LDX t2
CFDC          LCFDC:
CFDC 20 89 DC   JSR watjob
CFDF E0 0A      CPX #$A
CFE1 F0 03      BEQ LCFE6
CFE3          LCFE3:
CFE3 E8         INX
CFE4 D0 F6      BNE LCFDC
CFE6          LCFE6:
CFE6 60         RTS
CFE7          format:
CFE7 A0 00      LDY #$0
CFE9          LCFE9:
CFE9 B9 00 C0   LDA formatcode_0500,Y
CFEC 99 00 1D   STA buff0_shadow,Y
CFEF B9 00 C1   LDA formatcode_0500+$0100,Y
CFF2 99 00 1E   STA buff1_shadow,Y
CFF5 B9 00 C2   LDA formatcode_0500+$0200,Y
CFF8 99 00 1F   STA buff2_shadow,Y
CFFB B9 00 C3   LDA formatcode_0500+$0300,Y
CFFE 99 00 20   STA buff3,Y
D001 C8         INY
D002 D0 E5      BNE LCFE9
D004          LD004:
D004 8C 73 20   STY formatcode_2073
D007 C8         INY
D008 8C 70 20   STY formatcode_2070
D00B AC AD 10   LDY hwdep_10ad_fmt_trk_??
D00E 8C 75 20   STY formatcode_2075
D011 A9 00      LDA #$0
D013 20 1B FF   JSR sethdra
D016 A5 12      LDA drvnum
D018 09 E0      ORA #$E0
D01A 8D 03 10   STA jobs
D01D          LD01D:
D01D AD 03 10   LDA jobs
D020 30 FB      BMI LD01D
D022          LD022:
D022 C9 01      CMP #$1
D024 F0 05      BEQ LD02B
D026          LD026:
D026 A2 00      LDX #$0
D028 4C 15 FF   JMP error
D02B          LD02B:
D02B 60         RTS
D02C          dskcpy:
D02C 20 4A C8   JSR prscln
D02F D0 1D      BNE LD04E
D031          LD031:
D031 20 86 D0   JSR LD086
D034 A9 2A      LDA #$2A
D036 A2 27      LDX #$27
D038 8E 7D 43   STX filtbl+1
D03B 9D 00 43   STA cmdbuf,X
D03E E8         INX
D03F 8E 76 43   STX cmdsiz
D042 A2 01      LDX #$1
D044 8E 79 43   STX f1cnt
D047 E8         INX
D048 8E 7A 43   STX f2cnt
D04B 4C C9 D0   JMP LD0C9
D04E          LD04E:
D04E 20 5D C8   JSR LC85D
D051 20 84 C9   JSR alldrs
D054 AD 8D 43   LDA image
D057 29 55      AND #$55
D059 D0 21      BNE LD07C
D05B          LD05B:
D05B AE 7C 43   LDX filtbl
D05E BD 00 43   LDA cmdbuf,X
D061 C9 2A      CMP #$2A
D063 D0 17      BNE LD07C
D065          LD065:
D065 A2 01      LDX #$1
D067 8E 79 43   STX f1cnt
D06A A5 90      LDA fildrv
D06C C5 91      CMP fildrv+1
D06E F0 07      BEQ LD077
D070          LD070:
D070 E8         INX
D071 8E 7A 43   STX f2cnt
D074 4C AD D0   JMP LD0AD
D077          LD077:
D077 A9 30      LDA #$30
D079 4C 2D FF   JMP cmderr
D07C          LD07C:
D07C AD 8D 43   LDA image
D07F 29 D9      AND #$D9
D081 D0 F4      BNE LD077
D083          LD083:
D083 4C 6F D1   JMP LD16F
D086          LD086:
D086 A9 3D      LDA #$3D
D088 20 CD C8   JSR parse
D08B D0 05      BNE LD092
D08D          LD08D:
D08D A9 30      LDA #$30
D08F 4C 2D FF   JMP cmderr
D092          LD092:
D092 B9 00 43   LDA cmdbuf,Y
D095 20 20 CA   JSR tst0v1
D098 30 F3      BMI LD08D
D09A          LD09A:
D09A 85 91      STA fildrv+1
D09C 88         DEY
D09D 88         DEY
D09E B9 00 43   LDA cmdbuf,Y
D0A1 20 20 CA   JSR tst0v1
D0A4 30 E7      BMI LD08D
D0A6          LD0A6:
D0A6 C5 91      CMP fildrv+1
D0A8 F0 E3      BEQ LD08D
D0AA          LD0AA:
D0AA 85 90      STA fildrv
D0AC 60         RTS
D0AD          LD0AD:
D0AD AD 7D 43   LDA filtbl+1
D0B0 85 04      STA t0_temp
D0B2 A0 28      LDY #$28
D0B4 AE 76 43   LDX cmdsiz
D0B7 8C 76 43   STY cmdsiz
D0BA          LD0BA:
D0BA 88         DEY
D0BB CA         DEX
D0BC BD 00 43   LDA cmdbuf,X
D0BF 99 00 43   STA cmdbuf,Y
D0C2 E4 04      CPX t0_temp
D0C4 D0 F4      BNE LD0BA
D0C6          LD0C6:
D0C6 8C 7D 43   STY filtbl+1
D0C9          LD0C9:
D0C9 20 2D CA   JSR optsch
D0CC 20 4F D1   JSR LD14F
D0CF 20 00 CB   JSR ffst
D0D2 10 2D      BPL LD101
D0D4          LD0D4:
D0D4 30 28      BMI LD0FE
D0D6          LD0D6:
D0D6 68         PLA
D0D7 8D 92 43   STA dirsec
D0DA 68         PLA
D0DB 8D 7D 43   STA filtbl+1
D0DE 68         PLA
D0DF 8D 95 43   STA lstbuf
D0E2 68         PLA
D0E3 8D 97 43   STA filcnt
D0E6 68         PLA
D0E7 8D 96 43   STA index
D0EA 68         PLA
D0EB 8D 91 43   STA found?
D0EE 68         PLA
D0EF 8D 94 43   STA delind
D0F2 68         PLA
D0F3 8D 8F 43   STA drvflg
D0F6 20 4F D1   JSR LD14F
D0F9 20 EE CA   JSR ffre
D0FC 10 03      BPL LD101
D0FE          LD0FE:
D0FE 4C FD C7   JMP endcmd
D101          LD101:
D101 AD 8F 43   LDA drvflg
D104 48         PHA
D105 AD 94 43   LDA delind
D108 48         PHA
D109 AD 91 43   LDA found?
D10C 48         PHA
D10D AD 96 43   LDA index
D110 48         PHA
D111 AD 97 43   LDA filcnt
D114 48         PHA
D115 AD 95 43   LDA lstbuf
D118 48         PHA
D119 AD 7D 43   LDA filtbl+1
D11C 48         PHA
D11D AD 92 43   LDA dirsec
D120 48         PHA
D121 20 3F D1   JSR LD13F
D124 A9 01      LDA #$1
D126 8D 79 43   STA f1cnt
D129 8D 7A 43   STA f2cnt
D12C 20 B2 CA   JSR lookup
D12F A9 01      LDA #$1
D131 8D 79 43   STA f1cnt
D134 A9 02      LDA #$2
D136 8D 7A 43   STA f2cnt
D139 20 C1 D1   JSR LD1C1
D13C 4C D6 D0   JMP LD0D6
D13F          LD13F:
D13F A0 03      LDY #$3
D141 8C 7C 43   STY filtbl
D144          LD144:
D144 B1 27      LDA (dirbuf),Y
D146 99 00 43   STA cmdbuf,Y
D149 C8         INY
D14A C0 13      CPY #$13
D14C D0 F6      BNE LD144
D14E          LD14E:
D14E 60         RTS
D14F          LD14F:
D14F A9 00      LDA #$0
D151 8D 4D 43   STA rec
D154 8D 8E 43   STA drvcnt
D157 8D 82 43   STA filtrk
D15A 8D 83 43   STA filtrk+1
D15D A5 91      LDA fildrv+1
D15F 29 01      AND #$1
D161 85 12      STA drvnum
D163 09 01      ORA #$1
D165 8D 93 43   STA delsec
D168 AD 7D 43   LDA filtbl+1
D16B 8D 7C 43   STA filtbl
D16E 60         RTS
D16F          LD16F:
D16F 20 B2 CA   JSR lookup
D172 AD 7A 43   LDA f2cnt
D175 C9 03      CMP #$3
D177 90 42      BCC LD1BB
D179          LD179:
D179 A5 90      LDA fildrv
D17B C5 91      CMP fildrv+1
D17D D0 3C      BNE LD1BB
D17F          LD17F:
D17F A5 8B      LDA entind
D181 C5 8C      CMP entind+1
D183 D0 36      BNE LD1BB
D185          LD185:
D185 A5 86      LDA entsec
D187 C5 87      CMP entsec+1
D189 D0 30      BNE LD1BB
D18B          LD18B:
D18B 20 E3 D2   JSR chkin
D18E A9 01      LDA #$1
D190 8D 7B 43   STA f2ptr
D193 20 14 D2   JSR LD214
D196 20 73 D8   JSR typfil
D199 F0 04      BEQ LD19F
D19B          LD19B:
D19B C9 02      CMP #$2
D19D D0 05      BNE LD1A4
D19F          LD19F:
D19F A9 64      LDA #$64
D1A1 20 2D FF   JSR cmderr
D1A4          LD1A4:
D1A4 A9 12      LDA #$12
D1A6 85 16      STA sa
D1A8 A5 BD      LDA LBD
D1AA 85 BE      STA LBE
D1AC A9 FF      LDA #$FF
D1AE 85 BD      STA LBD
D1B0 20 66 E2   JSR append
D1B3 A2 02      LDX #$2
D1B5 20 D3 D1   JSR LD1D3
D1B8 4C FD C7   JMP endcmd
D1BB          LD1BB:
D1BB 20 C1 D1   JSR LD1C1
D1BE 4C FD C7   JMP endcmd
D1C1          LD1C1:
D1C1 20 FD D2   JSR chkio
D1C4 A5 90      LDA fildrv
D1C6 29 01      AND #$1
D1C8 85 12      STA drvnum
D1CA 20 5B DB   JSR LDB5B
D1CD 20 D0 DD   JSR addfil
D1D0 AE 79 43   LDX f1cnt
D1D3          LD1D3:
D1D3 8E 7B 43   STX f2ptr
D1D6 20 14 D2   JSR LD214
D1D9 A9 11      LDA #$11
D1DB 85 16      STA sa
D1DD 20 3B D8   JSR fndrch
D1E0 20 73 D8   JSR typfil
D1E3 D0 03      BNE LD1E8
D1E5          LD1E5:
D1E5 20 6C D2   JSR cyext
D1E8          LD1E8:
D1E8 A9 08      LDA #$8
D1EA 85 AA      STA eoiflg
D1EC 4C F2 D1   JMP LD1F2
D1EF          LD1EF:
D1EF 20 FE D6   JSR LD6FE
D1F2          LD1F2:
D1F2 20 4E D2   JSR gibyte
D1F5 A9 80      LDA #$80
D1F7 20 80 E6   JSR LE680
D1FA F0 F3      BEQ LD1EF
D1FC          LD1FC:
D1FC 20 73 D8   JSR typfil
D1FF F0 03      BEQ LD204
D201          LD201:
D201 20 FE D6   JSR LD6FE
D204          LD204:
D204 AE 7B 43   LDX f2ptr
D207 E8         INX
D208 EC 7A 43   CPX f2cnt
D20B 90 C6      BCC LD1D3
D20D          LD20D:
D20D A9 12      LDA #$12
D20F 85 16      STA sa
D211 4C 3A E3   JMP LE33A
D214          LD214:
D214 AE 7B 43   LDX f2ptr
D217 B5 90      LDA fildrv,X
D219 29 01      AND #$1
D21B 85 12      STA drvnum
D21D AD CA 10   LDA dirtrack
D220 85 13      STA track
D222 B5 86      LDA entsec,X
D224 85 14      STA sector
D226 20 4B DB   JSR opnird
D229 AE 7B 43   LDX f2ptr
D22C B5 8B      LDA entind,X
D22E 20 A0 DB   JSR setpnt
D231 AE 7B 43   LDX f2ptr
D234 B5 95      LDA pattyp,X
D236 29 07      AND #$7
D238 85 CF      STA type
D23A A9 00      LDA #$0
D23C 8D 4D 43   STA rec
D23F 20 DD E1   JSR opread
D242 A0 01      LDY #$1
D244 20 73 D8   JSR typfil
D247 F0 01      BEQ LD24A
D249          LD249:
D249 C8         INY
D24A          LD24A:
D24A 98         TYA
D24B 4C A0 DB   JMP setpnt
D24E          gibyte:
D24E A9 11      LDA #$11
D250 85 16      STA sa
D252          gcbyte:
D252 20 76 DA   JSR gbyte
D255 85 18      STA data
D257 A6 15      LDX lindx
D259 B5 A2      LDA chnrdy,X
D25B 29 08      AND #$8
D25D 85 AA      STA eoiflg
D25F D0 0A      BNE gib20
D261          LD261:
D261 20 73 D8   JSR typfil
D264 F0 05      BEQ gib20
D266          LD266:
D266 A9 80      LDA #$80
D268 20 71 E6   JSR setflg
D26B          gib20:
D26B 60         RTS
D26C          cyext:
D26C 20 21 D9   JSR setdrn
D26F 20 D7 EA   JSR ssend?
D272 20 B4 FA   JSR getnsides_min1
D275 D0 04      BNE LD27B
D277          LD277:
D277 AD CF 10   LDA L10CF
D27A 48         PHA
D27B          LD27B:
D27B A5 84      LDA ssind
D27D 48         PHA
D27E A5 83      LDA ssnum
D280 48         PHA
D281 A9 12      LDA #$12
D283 85 16      STA sa
D285 20 56 D8   JSR fndwch
D288 20 9E ED   JSR posbuf?
D28B 85 85      STA relptr
D28D 68         PLA
D28E 85 83      STA ssnum
D290 68         PLA
D291 85 84      STA ssind
D293 20 B4 FA   JSR getnsides_min1
D296 D0 04      BNE LD29C
D298          LD298:
D298 68         PLA
D299 8D CF 10   STA L10CF
D29C          LD29C:
D29C 4C 43 EC   JMP addr1?
D29F          rename:
D29F 20 84 C9   JSR alldrs
D2A2 A5 91      LDA fildrv+1
D2A4 29 01      AND #$1
D2A6 85 91      STA fildrv+1
D2A8 C5 90      CMP fildrv
D2AA F0 02      BEQ LD2AE
D2AC          LD2AC:
D2AC 09 80      ORA #$80
D2AE          LD2AE:
D2AE 85 90      STA fildrv
D2B0 20 B2 CA   JSR lookup
D2B3 20 FD D2   JSR chkio
D2B6 A5 91      LDA fildrv+1
D2B8 29 01      AND #$1
D2BA 85 12      STA drvnum
D2BC A5 87      LDA entsec+1
D2BE 85 14      STA sector
D2C0 20 32 E7   JSR rdab
D2C3 20 89 DC   JSR watjob
D2C6 A5 8C      LDA entind+1
D2C8 18         CLC
D2C9 69 03      ADC #$3
D2CB 20 A0 DB   JSR setpnt
D2CE 20 BB E8   JSR getact
D2D1 A8         TAY
D2D2 AE 7C 43   LDX filtbl
D2D5 A9 10      LDA #$10
D2D7 20 D4 CC   JSR trname
D2DA 20 39 E7   JSR wrtout
D2DD 20 89 DC   JSR watjob
D2E0 4C FD C7   JMP endcmd
D2E3          chkin:
D2E3 A5 96      LDA pattyp+1
D2E5 29 07      AND #$7
D2E7 85 CF      STA type
D2E9 AE 7A 43   LDX f2cnt
D2EC          LD2EC:
D2EC CA         DEX
D2ED EC 79 43   CPX f1cnt
D2F0 90 0A      BCC LD2FC
D2F2          LD2F2:
D2F2 BD 82 43   LDA filtrk,X
D2F5 D0 F5      BNE LD2EC
D2F7          LD2F7:
D2F7 A9 62      LDA #$62
D2F9 4C 2D FF   JMP cmderr
D2FC          LD2FC:
D2FC 60         RTS
D2FD          chkio:
D2FD 20 E3 D2   JSR chkin
D300          LD300:
D300 BD 82 43   LDA filtrk,X
D303 F0 05      BEQ LD30A
D305          LD305:
D305 A9 63      LDA #$63
D307 4C 2D FF   JMP cmderr
D30A          LD30A:
D30A CA         DEX
D30B 10 F3      BPL LD300
D30D          LD30D:
D30D 60         RTS
D30E          mem:
D30E AD 01 43   LDA cmdbuf+1
D311 C9 2D      CMP #$2D
D313 D0 4B      BNE memerr
D315          LD315:
D315 AD 03 43   LDA cmdbuf+3
D318 85 04      STA t0_temp
D31A AD 04 43   LDA cmdbuf+4
D31D 85 05      STA t1
D31F A0 00      LDY #$0
D321 AD 02 43   LDA cmdbuf+2
D324 C9 52      CMP #$52
D326 F0 0E      BEQ memrd
D328          LD328:
D328 20 A7 FA   JSR killp_rotection
D32B C9 57      CMP #$57
D32D F0 36      BEQ memwrt
D32F          LD32F:
D32F C9 45      CMP #$45
D331 D0 2D      BNE memerr
D333          LD333:
D333 6C 04 00   JMP (t0_temp)
D336          memrd:
D336 B1 04      LDA (t0_temp),Y
D338 85 18      STA data
D33A AD 76 43   LDA cmdsiz
D33D C9 06      CMP #$6
D33F 90 19      BCC m30
D341          mrmult:
D341 AE 05 43   LDX cmdbuf+5
D344 CA         DEX
D345 F0 13      BEQ m30
D347          LD347:
D347 8A         TXA
D348 18         CLC
D349 65 04      ADC t0_temp
D34B E6 04      INC t0_temp
D34D 85 CE      STA lstchr+errchn
D34F A5 04      LDA t0_temp
D351 85 47      STA buftab_errbuf?
D353 A5 05      LDA t1
D355 85 48      STA cb+3
D357 4C 1A DB   JMP ge20
D35A          m30:
D35A 20 3B D8   JSR fndrch
D35D 4C 11 DB   JMP ge15
D360          memerr:
D360 A9 31      LDA #$31
D362 4C 2D FF   JMP cmderr
D365          memwrt:
D365 B9 06 43   LDA cmdbuf+6,Y
D368 91 04      STA (t0_temp),Y
D36A C8         INY
D36B CC 05 43   CPY cmdbuf+5
D36E 90 F5      BCC memwrt
D370          LD370:
D370 60         RTS
D371          user:
D371 AC 01 43   LDY cmdbuf+1
D374 C0 30      CPY #$30
D376 D0 09      BNE LD381
D378          LD378:
D378 A9 EA      LDA #$EA
D37A 85 00      STA usrjmp
D37C A9 FF      LDA #$FF
D37E 85 01      STA usrjmp+1
D380 60         RTS
D381          LD381:
D381 20 87 D3   JSR usrexc
D384 4C FD C7   JMP endcmd
D387          usrexc:
D387 88         DEY
D388 98         TYA
D389 29 0F      AND #$F
D38B 0A         ASL A
D38C A8         TAY
D38D B1 00      LDA (usrjmp),Y
D38F 85 0A      STA ip
D391 C8         INY
D392 B1 00      LDA (usrjmp),Y
D394 85 0B      STA ip+1
D396 6C 0A 00   JMP (ip)
D399          opnblk:
D399 AD 90 43   LDA lstdrv
D39C 85 12      STA drvnum
D39E A5 16      LDA sa
D3A0 48         PHA
D3A1 20 18 FF   JSR autoi
D3A4 68         PLA
D3A5 85 16      STA sa
D3A7 AE 76 43   LDX cmdsiz
D3AA CA         DEX
D3AB D0 0D      BNE ob10
D3AD          LD3AD:
D3AD A9 01      LDA #$1
D3AF 20 30 D9   JSR getrch
D3B2 4C 04 D4   JMP LD404
D3B5          ob05:
D3B5 A9 70      LDA #$70
D3B7 4C 2D FF   JMP cmderr
D3BA          ob10:
D3BA A0 01      LDY #$1
D3BC 20 8D D4   JSR LD48D
D3BF AE 87 43   LDX filsec
D3C2 E0 0C      CPX #$C
D3C4 B0 EF      BCS ob05
D3C6          LD3C6:
D3C6 A9 00      LDA #$0
D3C8 85 04      STA t0_temp
D3CA 85 05      STA t1
D3CC 38         SEC
D3CD          LD3CD:
D3CD 26 04      ROL t0_temp
D3CF 26 05      ROL t1
D3D1 CA         DEX
D3D2 10 F9      BPL LD3CD
D3D4          LD3D4:
D3D4 A5 04      LDA t0_temp
D3D6 2D 40 43   AND bufuse
D3D9 D0 DA      BNE ob05
D3DB          LD3DB:
D3DB A5 05      LDA t1
D3DD 2D 41 43   AND bufuse+1
D3E0 D0 D3      BNE ob05
D3E2          LD3E2:
D3E2 A5 04      LDA t0_temp
D3E4 0D 40 43   ORA bufuse
D3E7 8D 40 43   STA bufuse
D3EA A5 05      LDA t1
D3EC 0D 41 43   ORA bufuse+1
D3EF 8D 41 43   STA bufuse+1
D3F2 A9 00      LDA #$0
D3F4 20 30 D9   JSR getrch
D3F7 A6 15      LDX lindx
D3F9 AD 87 43   LDA filsec
D3FC 95 49      STA buf0,X
D3FE AA         TAX
D3FF A5 12      LDA drvnum
D401 9D 50 43   STA lstjob,X
D404          LD404:
D404 A6 16      LDX sa
D406 B5 AC      LDA lintab,X
D408 09 40      ORA #$40
D40A 95 AC      STA lintab,X
D40C A4 15      LDY lindx
D40E A9 FF      LDA #$FF
D410 99 C7 00   STA lstchr,Y
D413 A9 89      LDA #$89
D415 99 A2 00   STA chnrdy,Y
D418 B9 49 00   LDA buf0,Y
D41B 99 BF 00   STA chndat,Y
D41E 0A         ASL A
D41F AA         TAX
D420 A9 01      LDA #$1
D422 95 29      STA buftab_0,X
D424 A9 0E      LDA #$E
D426 99 9A 00   STA filtyp,Y
D429 4C FD C7   JMP endcmd
D42C          block:
D42C A0 00      LDY #$0
D42E A2 00      LDX #$0
D430 A9 2D      LDA #$2D
D432 20 CD C8   JSR parse
D435 D0 0A      BNE blk40
D437          blk10:
D437 A9 31      LDA #$31
D439 4C 2D FF   JMP cmderr
D43C          blk30:
D43C A9 30      LDA #$30
D43E 4C 2D FF   JMP cmderr
D441          blk40:
D441 8A         TXA
D442 D0 F8      BNE blk30
D444          LD444:
D444 A2 05      LDX #$5
D446 B9 00 43   LDA cmdbuf,Y
D449          blk50:
D449 DD 6E D4   CMP bctab,X
D44C F0 05      BEQ blk60
D44E          LD44E:
D44E CA         DEX
D44F 10 F8      BPL blk50
D451          LD451:
D451 30 E4      BMI blk10
D453          blk60:
D453 8A         TXA
D454 09 80      ORA #$80
D456 8D 3B 43   STA cmdnum
D459 20 80 D4   JSR blkpar
D45C AD 3B 43   LDA cmdnum
D45F 0A         ASL A
D460 AA         TAX
D461 BD 75 D4   LDA bcjmp+1,X
D464 85 05      STA t1
D466 BD 74 D4   LDA bcjmp,X
D469 85 04      STA t0_temp
D46B 6C 04 00   JMP (t0_temp)
D46E          bctab:
D46E 41 46 52   .BYTE $41,$46,$52
D471 57 45 50   .BYTE $57,$45,$50
D474          bcjmp:
D475          bcjmp+1 = * + 1
D474 0F D5 06   .BYTE $F,$D5,$6
D477 D5 62 D5   .BYTE $D5,$62,$D5
D47A 7F D5 B1   .BYTE $7F,$D5,$B1
D47D D5 CB D5   .BYTE $D5,$CB,$D5
D480          blkpar:
D480 A0 00      LDY #$0
D482 A2 00      LDX #$0
D484 A9 3A      LDA #$3A
D486 20 CD C8   JSR parse
D489 D0 02      BNE LD48D
D48B          LD48B:
D48B A0 03      LDY #$3
D48D          LD48D:
D48D B9 00 43   LDA cmdbuf,Y
D490 C9 20      CMP #$20
D492 F0 08      BEQ LD49C
D494          LD494:
D494 C9 1D      CMP #$1D
D496 F0 04      BEQ LD49C
D498          LD498:
D498 C9 2C      CMP #$2C
D49A D0 07      BNE LD4A3
D49C          LD49C:
D49C C8         INY
D49D CC 76 43   CPY cmdsiz
D4A0 90 EB      BCC LD48D
D4A2          LD4A2:
D4A2 60         RTS
D4A3          LD4A3:
D4A3 20 B2 D4   JSR aschex
D4A6 EE 79 43   INC f1cnt
D4A9 AC 7B 43   LDY f2ptr
D4AC E0 04      CPX #$4
D4AE 90 EC      BCC LD49C
D4B0          LD4B0:
D4B0 B0 8A      BCS blk30
D4B2          aschex:
D4B2 A9 00      LDA #$0
D4B4 85 04      STA t0_temp
D4B6 85 05      STA t1
D4B8 85 07      STA t3
D4BA A2 FF      LDX #$FF
D4BC          LD4BC:
D4BC B9 00 43   LDA cmdbuf,Y
D4BF C9 40      CMP #$40
D4C1 B0 18      BCS ah20
D4C3          LD4C3:
D4C3 C9 30      CMP #$30
D4C5 90 14      BCC ah20
D4C7          LD4C7:
D4C7 29 0F      AND #$F
D4C9 48         PHA
D4CA A5 05      LDA t1
D4CC 85 06      STA t2
D4CE A5 04      LDA t0_temp
D4D0 85 05      STA t1
D4D2 68         PLA
D4D3 85 04      STA t0_temp
D4D5 C8         INY
D4D6 CC 76 43   CPY cmdsiz
D4D9 90 E1      BCC LD4BC
D4DB          ah20:
D4DB 8C 7B 43   STY f2ptr
D4DE 18         CLC
D4DF A9 00      LDA #$0
D4E1          LD4E1:
D4E1 E8         INX
D4E2 E0 03      CPX #$3
D4E4 B0 0F      BCS LD4F5
D4E6          LD4E6:
D4E6 B4 04      LDY t0_temp,X
D4E8          LD4E8:
D4E8 88         DEY
D4E9 30 F6      BMI LD4E1
D4EB          LD4EB:
D4EB 7D 03 D5   ADC dectab,X
D4EE 90 F8      BCC LD4E8
D4F0          LD4F0:
D4F0 18         CLC
D4F1 E6 07      INC t3
D4F3 D0 F3      BNE LD4E8
D4F5          LD4F5:
D4F5 48         PHA
D4F6 AE 79 43   LDX f1cnt
D4F9 A5 07      LDA t3
D4FB 9D 82 43   STA filtrk,X
D4FE 68         PLA
D4FF 9D 87 43   STA filsec,X
D502 60         RTS
D503          dectab:
D503 01 0A 64   .BYTE $1,$A,$64
D506          blkfre:
D506 20 03 D6   JSR blktst
D509 20 06 FF   JSR frets
D50C 4C FD C7   JMP endcmd
D50F          blkalc:
D50F 20 03 D6   JSR blktst
D512 A5 14      LDA sector
D514 48         PHA
D515 20 35 FA   JSR getsec
D518 F0 0B      BEQ LD525
D51A          LD51A:
D51A 68         PLA
D51B C5 14      CMP sector
D51D D0 19      BNE LD538
D51F          LD51F:
D51F 20 09 FF   JSR wused
D522 4C FD C7   JMP endcmd
D525          LD525:
D525 68         PLA
D526          LD526:
D526 A9 00      LDA #$0
D528 85 14      STA sector
D52A E6 13      INC track
D52C A5 13      LDA track
D52E CD E9 10   CMP maxtrk
D531 B0 0A      BCS LD53D
D533          LD533:
D533 20 35 FA   JSR getsec
D536 F0 EE      BEQ LD526
D538          LD538:
D538 A9 65      LDA #$65
D53A 20 30 FF   JSR cmder2
D53D          LD53D:
D53D A9 65      LDA #$65
D53F 20 2D FF   JSR cmderr
D542          blkrd2:
D542 20 00 D6   JSR bkotst
D545 4C 36 DB   JMP drtrd
D548          getsim:
D548 20 7D D8   JSR getpre
D54B A1 29      LDA (buftab_0,X)
D54D 60         RTS
D54E          blkrd3:
D54E 20 42 D5   JSR blkrd2
D551 A9 00      LDA #$0
D553 20 A0 DB   JSR setpnt
D556 20 48 D5   JSR getsim
D559 99 C7 00   STA lstchr,Y
D55C A9 89      LDA #$89
D55E 99 A2 00   STA chnrdy,Y
D561 60         RTS
D562          blkrd:
D562 20 4E D5   JSR blkrd3
D565 20 C4 DA   JSR rnget1
D568 4C FD C7   JMP endcmd
D56B          ublkrd:
D56B 20 80 D4   JSR blkpar
D56E 20 4E D5   JSR blkrd3
D571 B9 C7 00   LDA lstchr,Y
D574 99 BF 00   STA chndat,Y
D577 A9 FF      LDA #$FF
D579 99 C7 00   STA lstchr,Y
D57C 4C FD C7   JMP endcmd
D57F          blkwt:
D57F 20 00 D6   JSR bkotst
D582 20 C0 DB   JSR getpnt
D585 A8         TAY
D586 88         DEY
D587 C9 02      CMP #$2
D589 B0 02      BCS LD58D
D58B          LD58B:
D58B A0 01      LDY #$1
D58D          LD58D:
D58D A9 00      LDA #$0
D58F 20 A0 DB   JSR setpnt
D592 98         TYA
D593 20 4A D7   JSR putbyt
D596 8A         TXA
D597 48         PHA
D598 20 3A DB   JSR drtwrt
D59B 68         PLA
D59C AA         TAX
D59D A4 15      LDY lindx
D59F 20 C6 DA   JSR rnget2
D5A2 4C FD C7   JMP endcmd
D5A5          ublkwt:
D5A5 20 80 D4   JSR blkpar
D5A8 20 00 D6   JSR bkotst
D5AB 20 3A DB   JSR drtwrt
D5AE 4C FD C7   JMP endcmd
D5B1          blkexc:
D5B1 20 A7 FA   JSR killp_rotection
D5B4 20 42 D5   JSR blkrd2
D5B7 A9 00      LDA #$0
D5B9 85 04      STA t0_temp
D5BB A6 AB      LDX jobnum
D5BD BD DE DB   LDA bufind,X
D5C0 85 05      STA t1
D5C2 20 C8 D5   JSR be10
D5C5 4C FD C7   JMP endcmd
D5C8          be10:
D5C8 6C 04 00   JMP (t0_temp)
D5CB          blkptr:
D5CB 20 E0 D5   JSR buftst
D5CE A5 AB      LDA jobnum
D5D0 0A         ASL A
D5D1 AA         TAX
D5D2 AD 88 43   LDA filsec+1
D5D5 95 29      STA buftab_0,X
D5D7 20 7D D8   JSR getpre
D5DA 20 C6 DA   JSR rnget2
D5DD 4C FD C7   JMP endcmd
D5E0          buftst:
D5E0 A6 81      LDX f1ptr
D5E2 E6 81      INC f1ptr
D5E4 BD 87 43   LDA filsec,X
D5E7 A8         TAY
D5E8 88         DEY
D5E9 88         DEY
D5EA C0 0C      CPY #$C
D5EC 90 05      BCC LD5F3
D5EE          LD5EE:
D5EE A9 70      LDA #$70
D5F0 4C 2D FF   JMP cmderr
D5F3          LD5F3:
D5F3 85 16      STA sa
D5F5 20 3B D8   JSR fndrch
D5F8 B0 F4      BCS LD5EE
D5FA          LD5FA:
D5FA 20 BB E8   JSR getact
D5FD 85 AB      STA jobnum
D5FF 60         RTS
D600          bkotst:
D600 20 E0 D5   JSR buftst
D603          blktst:
D603 A6 81      LDX f1ptr
D605 BD 87 43   LDA filsec,X
D608 29 01      AND #$1
D60A 85 12      STA drvnum
D60C BD 89 43   LDA filsec+2,X
D60F 85 14      STA sector
D611 BD 88 43   LDA filsec+1,X
D614 85 13      STA track
D616 20 4E DC   JSR tschk
D619 4C 21 FF   JMP setlda
D61C          fndrel:
D61C 20 54 D6   JSR mulply
D61F 20 96 D6   JSR div254
D622 A5 23      LDA accum+1
D624 85 85      STA relptr
D626 20 99 D6   JSR div120
D629 E6 85      INC relptr
D62B E6 85      INC relptr
D62D 20 B4 FA   JSR getnsides_min1
D630 F0 0D      BEQ LD63F
D632          LD632:
D632 A5 1E      LDA result
D634 85 83      STA ssnum
D636 A5 23      LDA accum+1
D638 0A         ASL A
D639 18         CLC
D63A 69 10      ADC #$10
D63C 85 84      STA ssind
D63E 60         RTS
D63F          LD63F:
D63F A5 23      LDA accum+1
D641 0A         ASL A
D642 18         CLC
D643 69 10      ADC #$10
D645 85 84      STA ssind
D647 20 9C D6   JSR div6
D64A A5 23      LDA accum+1
D64C 85 83      STA ssnum
D64E A5 1E      LDA result
D650 8D CF 10   STA L10CF
D653 60         RTS
D654          mulply:
D654 20 C8 D6   JSR zerres
D657 85 25      STA accum+3
D659 A6 15      LDX lindx
D65B B5 59      LDA recl,X
D65D 85 23      STA accum+1
D65F B5 61      LDA rech,X
D661 85 24      STA accum+2
D663 D0 04      BNE mul25
D665          LD665:
D665 A5 23      LDA accum+1
D667 F0 0B      BEQ LD674
D669          mul25:
D669 A5 23      LDA accum+1
D66B 38         SEC
D66C E9 01      SBC #$1
D66E 85 23      STA accum+1
D670 B0 02      BCS LD674
D672          LD672:
D672 C6 24      DEC accum+2
D674          LD674:
D674 B5 71      LDA rs,X
D676 85 04      STA t0_temp
D678          mul100:
D678 46 04      LSR t0_temp
D67A 90 03      BCC LD67F
D67C          LD67C:
D67C 20 DC D6   JSR addres
D67F          LD67F:
D67F 20 D4 D6   JSR accx2
D682 A5 04      LDA t0_temp
D684 D0 F2      BNE mul100
D686          LD686:
D686 A5 82      LDA recptr
D688 18         CLC
D689 65 1E      ADC result
D68B 85 1E      STA result
D68D 90 06      BCC LD695
D68F          LD68F:
D68F E6 1F      INC result+1
D691 D0 02      BNE LD695
D693          LD693:
D693 E6 20      INC result+2
D695          LD695:
D695 60         RTS
D696          div254:
D696 A9 FE      LDA #$FE
D699          div120 = * + 1
              ; Instruction parameter jumped to.
D698 2C A9 78   BIT L78A9
D69C          div6 = * + 1
              ; Instruction parameter jumped to.
D69B 2C A9 06   BIT L6A9
D69E 85 04      STA t0_temp
D6A0 A9 00      LDA #$0
D6A2 85 23      STA accum+1
D6A4 85 24      STA accum+2
D6A6 A2 18      LDX #$18
D6A8          LD6A8:
D6A8 06 1E      ASL result
D6AA 26 1F      ROL result+1
D6AC 26 20      ROL result+2
D6AE 26 23      ROL accum+1
D6B0 26 24      ROL accum+2
D6B2 A5 23      LDA accum+1
D6B4 38         SEC
D6B5 E5 04      SBC t0_temp
D6B7 A8         TAY
D6B8 A5 24      LDA accum+2
D6BA E9 00      SBC #$0
D6BC 90 06      BCC LD6C4
D6BE          LD6BE:
D6BE E6 1E      INC result
D6C0 85 24      STA accum+2
D6C2 84 23      STY accum+1
D6C4          LD6C4:
D6C4 CA         DEX
D6C5 D0 E1      BNE LD6A8
D6C7          LD6C7:
D6C7 60         RTS
D6C8          zerres:
D6C8 A9 00      LDA #$0
D6CA 85 1E      STA result
D6CC 85 1F      STA result+1
D6CE 85 20      STA result+2
D6D0 60         RTS
D6D1          accx4:
D6D1 20 D4 D6   JSR accx2
D6D4          accx2:
D6D4 18         CLC
D6D5 26 23      ROL accum+1
D6D7 26 24      ROL accum+2
D6D9 26 25      ROL accum+3
D6DB 60         RTS
D6DC          addres:
D6DC 18         CLC
D6DD A2 FD      LDX #$FD
D6DF          LD6DF:
D6DF B5 21      LDA result+3,X
D6E1 75 26      ADC accum+4,X
D6E3 95 21      STA result+3,X
D6E5 E8         INX
D6E6 D0 F7      BNE LD6DF
D6E8          LD6E8:
D6E8 60         RTS
D6E9          dbl15_:
D6E9 A6 15      LDX lindx
D6EB B5 49      LDA buf0,X
D6ED 49 80      EOR #$80
D6EF 95 49      STA buf0,X
D6F1 B5 51      LDA buf1,X
D6F3 49 80      EOR #$80
D6F5 95 51      STA buf1,X
D6F7 20 BB E8   JSR getact
D6FA AA         TAX
D6FB 4C 89 DC   JMP watjob
D6FE          LD6FE:
D6FE A2 12      LDX #$12
D700 86 16      STX sa
D702 20 56 D8   JSR fndwch
D705 20 21 FF   JSR setlda
D708 A5 16      LDA sa
D70A C9 0F      CMP #$F
D70C F0 23      BEQ LD731
D70E          LD70E:
D70E D0 08      BNE LD718
D710          put:
D710 A5 17      LDA orgsa
D712 29 8F      AND #$8F
D714 C9 0F      CMP #$F
D716 B0 19      BCS LD731
D718          LD718:
D718 20 73 D8   JSR typfil
D71B B0 05      BCS l_41
D71D          LD71D:
D71D A5 18      LDA data
D71F 4C EB D8   JMP wrtbyt
D722          l_41:
D722 D0 03      BNE l_46
D724          LD724:
D724 4C BA E9   JMP wrtrel
D727          l_46:
D727 A5 18      LDA data
D729 20 4A D7   JSR putbyt
D72C A4 15      LDY lindx
D72E 4C C6 DA   JMP rnget2
D731          LD731:
D731 A9 06      LDA #$6
D733 85 15      STA lindx
D735 20 C0 DB   JSR getpnt
D738 C9 3B      CMP #$3B
D73A F0 05      BEQ l_50
D73C          LD73C:
D73C A5 18      LDA data
D73E 20 4A D7   JSR putbyt
D741          l_50:
D741 A5 AA      LDA eoiflg
D743 F0 01      BEQ l_45
D745          LD745:
D745 60         RTS
D746          l_45:
D746 EE 4A 43   INC cmdwat
D749 60         RTS
D74A          putbyt:
D74A 48         PHA
D74B 20 BB E8   JSR getact
D74E 10 06      BPL putb1
D750          LD750:
D750 68         PLA
D751 A9 61      LDA #$61
D753 4C 2D FF   JMP cmderr
D756          putb1:
D756 0A         ASL A
D757 AA         TAX
D758 68         PLA
D759 81 29      STA (buftab_0,X)
D75B F6 29      INC buftab_0,X
D75D 60         RTS
D75E          intdrv:
D75E 20 36 C8   JSR simprs
D761 20 89 D7   JSR initdr
D764 AD 8D 43   LDA image
D767 10 0C      BPL LD775
D769          LD769:
D769 20 F2 C9   JSR togdrv
D76C 20 21 FF   JSR setlda
D76F 20 89 D7   JSR initdr
D772 20 F2 C9   JSR togdrv
D775          LD775:
D775 4C FD C7   JMP endcmd
D778          itrial:
D778 A9 0E      LDA #$E
D77A 85 AB      STA jobnum
D77C AE CA 10   LDX dirtrack
D77F 86 13      STX track
D781 20 1B FF   JSR sethdra
D784 A9 B0      LDA #$B0
D786 4C 7C DC   JMP LDC7C
D789          initdr:
D789 20 35 DA   JSR cldchn
D78C 20 78 D7   JSR itrial
D78F A6 12      LDX drvnum
D791 A9 00      LDA #$0
D793 9D 46 43   STA mdirty,X
D796 8A         TXA
D797 0A         ASL A
D798 AA         TAX
D799 B9 21 10   LDA hdrs_dskid,Y
D79C 9D 42 43   STA dskid,X
D79F B9 22 10   LDA hdrs_dskid+1,Y
D7A2 9D 43 43   STA dskid+1,X
D7A5 AD CA 10   LDA dirtrack
D7A8 85 13      STA track
D7AA A9 00      LDA #$0
D7AC 85 14      STA sector
D7AE 20 BF F8   JSR bam2a=drvnum2jobnum
D7B1 20 36 DB   JSR drtrd
D7B4 A6 12      LDX drvnum
D7B6 A9 00      LDA #$0
D7B8 9D A6 10   STA wpsw,X
D7BB 9D A1 43   STA nodrv,X
D7BE          nfcalc:
D7BE A6 12      LDX drvnum
D7C0 A9 00      LDA #$0
D7C2 9D 9D 43   STA ndbl,X
D7C5 9D 9F 43   STA ndbh,X
D7C8 85 13      STA track
D7CA          LD7CA:
D7CA E6 13      INC track
D7CC A5 13      LDA track
D7CE CD E9 10   CMP maxtrk
D7D1 90 01      BCC LD7D4
D7D3          LD7D3:
D7D3 60         RTS
D7D4          LD7D4:
D7D4 CD CA 10   CMP dirtrack
D7D7 F0 F1      BEQ LD7CA
D7D9          LD7D9:
D7D9 20 5C F8   JSR setbam=getbamfortrack
D7DC A6 12      LDX drvnum
D7DE B1 02      LDA (bmpnt),Y
D7E0 18         CLC
D7E1 7D 9D 43   ADC ndbl,X
D7E4 9D 9D 43   STA ndbl,X
D7E7 90 E1      BCC LD7CA
D7E9          LD7E9:
D7E9 FE 9F 43   INC ndbh,X
D7EC 4C CA D7   JMP LD7CA
D7EF          strrd_strdbl:
D7EF 20 AE DD   JSR sethdr_j
D7F2 20 13 D8   JSR rdbuf
D7F5 20 89 DC   JSR watjob
D7F8 20 85 D8   JSR getbyt
D7FB 85 13      STA track
D7FD 20 85 D8   JSR getbyt
D800 85 14      STA sector
D802 A5 13      LDA track
D804 D0 01      BNE LD807
D806          LD806:
D806 60         RTS
D807          LD807:
D807 20 E9 D6   JSR dbl15_
D80A 20 AE DD   JSR sethdr_j
D80D 20 13 D8   JSR rdbuf
D810 4C E9 D6   JMP dbl15_
D813          rdbuf:
D813 A9 80      LDA #$80
D815 D0 02      BNE LD819
D817          writbuf:
D817 A9 90      LDA #$90
D819          LD819:
D819 8D 3E 43   STA cmd
D81C 20 BB E8   JSR getact
D81F AA         TAX
D820 20 ED DB   JSR setljb
D823 8A         TXA
D824 48         PHA
D825 0A         ASL A
D826 AA         TAX
D827 A9 00      LDA #$0
D829 95 29      STA buftab_0,X
D82B 20 73 D8   JSR typfil
D82E C9 04      CMP #$4
D830 B0 06      BCS LD838
D832          LD832:
D832 F6 59      INC recl,X
D834 D0 02      BNE LD838
D836          LD836:
D836 F6 61      INC rech,X
D838          LD838:
D838 68         PLA
D839 AA         TAX
D83A 60         RTS
D83B          fndrch:
D83B A5 16      LDA sa
D83D C9 13      CMP #$13
D83F 90 02      BCC LD843
D841          LD841:
D841 29 0F      AND #$F
D843          LD843:
D843 C9 0F      CMP #$F
D845 D0 02      BNE LD849
D847          LD847:
D847 A9 10      LDA #$10
D849          LD849:
D849 AA         TAX
D84A 38         SEC
D84B B5 AC      LDA lintab,X
D84D 30 06      BMI LD855
D84F          LD84F:
D84F 29 0F      AND #$F
D851 85 15      STA lindx
D853 AA         TAX
D854 18         CLC
D855          LD855:
D855 60         RTS
D856          fndwch:
D856 A5 16      LDA sa
D858 C9 13      CMP #$13
D85A 90 02      BCC LD85E
D85C          LD85C:
D85C 29 0F      AND #$F
D85E          LD85E:
D85E AA         TAX
D85F B5 AC      LDA lintab,X
D861 A8         TAY
D862 0A         ASL A
D863 90 0A      BCC LD86F
D865          LD865:
D865 30 0A      BMI LD871
D867          LD867:
D867 98         TYA
D868 29 0F      AND #$F
D86A 85 15      STA lindx
D86C AA         TAX
D86D 18         CLC
D86E 60         RTS
D86F          LD86F:
D86F 30 F6      BMI LD867
D871          LD871:
D871 38         SEC
D872 60         RTS
D873          typfil:
D873 A6 15      LDX lindx
D875 B5 9A      LDA filtyp,X
D877 4A         LSR A
D878 29 07      AND #$7
D87A C9 04      CMP #$4
D87C 60         RTS
D87D          getpre:
D87D 20 BB E8   JSR getact
D880 0A         ASL A
D881 AA         TAX
D882 A4 15      LDY lindx
D884 60         RTS
D885          getbyt:
D885 20 7D D8   JSR getpre
D888 B9 C7 00   LDA lstchr,Y
D88B F0 12      BEQ LD89F
D88D          LD88D:
D88D A1 29      LDA (buftab_0,X)
D88F 48         PHA
D890 B5 29      LDA buftab_0,X
D892 D9 C7 00   CMP lstchr,Y
D895 D0 04      BNE LD89B
D897          LD897:
D897 A9 FF      LDA #$FF
D899 95 29      STA buftab_0,X
D89B          LD89B:
D89B 68         PLA
D89C F6 29      INC buftab_0,X
D89E 60         RTS
D89F          LD89F:
D89F A1 29      LDA (buftab_0,X)
D8A1 F6 29      INC buftab_0,X
D8A3 60         RTS
D8A4          rdbyt:
D8A4 20 85 D8   JSR getbyt
D8A7 D0 36      BNE LD8DF
D8A9          LD8A9:
D8A9 85 18      STA data
D8AB B9 C7 00   LDA lstchr,Y
D8AE F0 08      BEQ rd1
D8B0          LD8B0:
D8B0 A9 80      LDA #$80
D8B2 99 A2 00   STA chnrdy,Y
D8B5 A5 18      LDA data
D8B7 60         RTS
D8B8          rd1:
D8B8 20 E9 D6   JSR dbl15_
D8BB A9 00      LDA #$0
D8BD 20 A0 DB   JSR setpnt
D8C0 20 85 D8   JSR getbyt
D8C3 C9 00      CMP #$0
D8C5 F0 19      BEQ LD8E0
D8C7          LD8C7:
D8C7 85 13      STA track
D8C9 20 85 D8   JSR getbyt
D8CC 85 14      STA sector
D8CE 20 E9 D6   JSR dbl15_
D8D1 20 21 D9   JSR setdrn
D8D4 20 AE DD   JSR sethdr_j
D8D7 20 13 D8   JSR rdbuf
D8DA 20 E9 D6   JSR dbl15_
D8DD A5 18      LDA data
D8DF          LD8DF:
D8DF 60         RTS
D8E0          LD8E0:
D8E0 20 85 D8   JSR getbyt
D8E3 A4 15      LDY lindx
D8E5 99 C7 00   STA lstchr,Y
D8E8 A5 18      LDA data
D8EA 60         RTS
D8EB          wrtbyt:
D8EB 20 4A D7   JSR putbyt
D8EE F0 01      BEQ LD8F1
D8F0          LD8F0:
D8F0 60         RTS
D8F1          LD8F1:
D8F1 20 21 D9   JSR setdrn
D8F4 20 0C FF   JSR LFF0C
D8F7 A9 00      LDA #$0
D8F9 20 A0 DB   JSR setpnt
D8FC A5 13      LDA track
D8FE 20 4A D7   JSR putbyt
D901 A5 14      LDA sector
D903 20 4A D7   JSR putbyt
D906 20 17 D8   JSR writbuf
D909 20 E9 D6   JSR dbl15_
D90C 20 AE DD   JSR sethdr_j
D90F A9 02      LDA #$2
D911 4C A0 DB   JMP setpnt
D914          incptr:
D914 85 04      STA t0_temp
D916 20 C0 DB   JSR getpnt
D919 18         CLC
D91A 65 04      ADC t0_temp
D91C 95 29      STA buftab_0,X
D91E 85 27      STA dirbuf
D920 60         RTS
D921          setdrn:
D921 20 BB E8   JSR getact
D924 AA         TAX
D925 BD 50 43   LDA lstjob,X
D928 29 01      AND #$1
D92A 85 12      STA drvnum
D92C 60         RTS
D92D          getwch:
D92D 38         SEC
D92E B0 01      BCS LD931
D930          getrch:
D930 18         CLC
D931          LD931:
D931 08         PHP
D932 85 04      STA t0_temp
D934 20 74 D9   JSR frechn
D937 20 5A DA   JSR LDA5A
D93A 85 15      STA lindx
D93C A6 16      LDX sa
D93E 28         PLP
D93F 90 02      BCC LD943
D941          LD941:
D941 09 80      ORA #$80
D943          LD943:
D943 95 AC      STA lintab,X
D945 29 3F      AND #$3F
D947 A8         TAY
D948 A9 FF      LDA #$FF
D94A 99 79 00   STA ss,Y
D94D 99 49 00   STA buf0,Y
D950 99 51 00   STA buf1,Y
D953 C6 04      DEC t0_temp
D955 30 1C      BMI LD973
D957          LD957:
D957 20 00 FF   JSR getbuf
D95A 10 08      BPL LD964
D95C          LD95C:
D95C 20 A5 D9   JSR relbuf
D95F A9 70      LDA #$70
D961 4C 2D FF   JMP cmderr
D964          LD964:
D964 99 49 00   STA buf0,Y
D967 C6 04      DEC t0_temp
D969 30 08      BMI LD973
D96B          LD96B:
D96B 20 00 FF   JSR getbuf
D96E 30 EC      BMI LD95C
D970          LD970:
D970 99 51 00   STA buf1,Y
D973          LD973:
D973 60         RTS
D974          frechn:
D974 A5 16      LDA sa
D976 C9 0F      CMP #$F
D978 D0 01      BNE freco
D97A          LD97A:
D97A 60         RTS
D97B          freco:
D97B A6 16      LDX sa
D97D B5 AC      LDA lintab,X
D97F C9 FF      CMP #$FF
D981 F0 21      BEQ LD9A4
D983          LD983:
D983 29 3F      AND #$3F
D985 85 15      STA lindx
D987 A9 FF      LDA #$FF
D989 95 AC      STA lintab,X
D98B A6 15      LDX lindx
D98D A9 00      LDA #$0
D98F 95 A2      STA chnrdy,X
D991 20 A5 D9   JSR relbuf
D994 A6 15      LDX lindx
D996 A9 01      LDA #$1
D998          LD998:
D998 CA         DEX
D999 30 03      BMI LD99E
D99B          LD99B:
D99B 0A         ASL A
D99C D0 FA      BNE LD998
D99E          LD99E:
D99E 0D 4B 43   ORA linuse
D9A1 8D 4B 43   STA linuse
D9A4          LD9A4:
D9A4 60         RTS
D9A5          relbuf:
D9A5 A6 15      LDX lindx
D9A7 B5 49      LDA buf0,X
D9A9 C9 FF      CMP #$FF
D9AB F0 09      BEQ LD9B6
D9AD          LD9AD:
D9AD 48         PHA
D9AE A9 FF      LDA #$FF
D9B0 95 49      STA buf0,X
D9B2 68         PLA
D9B3 20 03 FF   JSR frebuf
D9B6          LD9B6:
D9B6 A6 15      LDX lindx
D9B8 B5 51      LDA buf1,X
D9BA C9 FF      CMP #$FF
D9BC F0 09      BEQ LD9C7
D9BE          LD9BE:
D9BE 48         PHA
D9BF A9 FF      LDA #$FF
D9C1 95 51      STA buf1,X
D9C3 68         PLA
D9C4 20 03 FF   JSR frebuf
D9C7          LD9C7:
D9C7 A6 15      LDX lindx
D9C9 B5 79      LDA ss,X
D9CB C9 FF      CMP #$FF
D9CD F0 09      BEQ LD9D8
D9CF          LD9CF:
D9CF 48         PHA
D9D0 A9 FF      LDA #$FF
D9D2 95 79      STA ss,X
D9D4 68         PLA
D9D5 20 03 FF   JSR frebuf
D9D8          LD9D8:
D9D8 60         RTS
D9D9          getbuf_not:
D9D9 A9 FF      LDA #$FF
D9DB 85 05      STA t1
D9DD A2 0F      LDX #$F
D9DF          LD9DF:
D9DF 2E 40 43   ROL bufuse
D9E2 2E 41 43   ROL bufuse+1
D9E5 B0 05      BCS LD9EC
D9E7          LD9E7:
D9E7 86 05      STX t1
D9E9 38         SEC
D9EA B0 1E      BCS LDA0A
D9EC          LD9EC:
D9EC CA         DEX
D9ED 10 F0      BPL LD9DF
D9EF          LD9EF:
D9EF 2E 40 43   ROL bufuse
D9F2 2E 41 43   ROL bufuse+1
D9F5          LD9F5:
D9F5 A6 05      LDX t1
D9F7 30 0F      BMI LDA08
D9F9          LD9F9:
D9F9 BD 03 10   LDA jobs,X
D9FC 30 FB      BMI LD9F9
D9FE          LD9FE:
D9FE A9 00      LDA #$0
DA00 9D 03 10   STA jobs,X
DA03 A5 12      LDA drvnum
DA05 9D 50 43   STA lstjob,X
DA08          LDA08:
DA08 8A         TXA
DA09 60         RTS
DA0A          LDA0A:
DA0A 2E 40 43   ROL bufuse
DA0D 2E 41 43   ROL bufuse+1
DA10 CA         DEX
DA11 10 F7      BPL LDA0A
DA13          LDA13:
DA13 30 E0      BMI LD9F5
DA15          frebuf_j:
DA15 29 0F      AND #$F
DA17 A8         TAY
DA18 C8         INY
DA19 A2 10      LDX #$10
DA1B          LDA1B:
DA1B 6E 41 43   ROR bufuse+1
DA1E 6E 40 43   ROR bufuse
DA21 88         DEY
DA22 D0 01      BNE LDA25
DA24          LDA24:
DA24 18         CLC
DA25          LDA25:
DA25 CA         DEX
DA26 10 F3      BPL LDA1B
DA28          LDA28:
DA28 60         RTS
DA29          clrchn:
DA29 A9 0E      LDA #$E
DA2B 85 16      STA sa
DA2D          LDA2D:
DA2D 20 74 D9   JSR frechn
DA30 C6 16      DEC sa
DA32 D0 F9      BNE LDA2D
DA34          LDA34:
DA34 60         RTS
DA35          cldchn:
DA35 A9 0E      LDA #$E
DA37 85 16      STA sa
DA39          clsd:
DA39 A6 16      LDX sa
DA3B B5 AC      LDA lintab,X
DA3D C9 FF      CMP #$FF
DA3F F0 14      BEQ LDA55
DA41          LDA41:
DA41 29 3F      AND #$3F
DA43 85 15      STA lindx
DA45 20 BB E8   JSR getact
DA48 AA         TAX
DA49 BD 50 43   LDA lstjob,X
DA4C 29 01      AND #$1
DA4E C5 12      CMP drvnum
DA50 D0 03      BNE LDA55
DA52          LDA52:
DA52 20 74 D9   JSR frechn
DA55          LDA55:
DA55 C6 16      DEC sa
DA57 10 E0      BPL clsd
DA59          LDA59:
DA59 60         RTS
DA5A          LDA5A:
DA5A A0 00      LDY #$0
DA5C A9 01      LDA #$1
DA5E          LDA5E:
DA5E 2C 4B 43   BIT linuse
DA61 D0 09      BNE LDA6C
DA63          LDA63:
DA63 C8         INY
DA64 0A         ASL A
DA65 D0 F7      BNE LDA5E
DA67          LDA67:
DA67 A9 70      LDA #$70
DA69 4C 2D FF   JMP cmderr
DA6C          LDA6C:
DA6C 49 FF      EOR #$FF
DA6E 2D 4B 43   AND linuse
DA71 8D 4B 43   STA linuse
DA74 98         TYA
DA75 60         RTS
DA76          gbyte:
DA76 20 3B D8   JSR fndrch
DA79 20 21 FF   JSR setlda
DA7C 20 84 DA   JSR LDA84
DA7F A6 15      LDX lindx
DA81 B5 BF      LDA chndat,X
DA83 60         RTS
DA84          LDA84:
DA84 A6 15      LDX lindx
DA86 20 73 D8   JSR typfil
DA89 D0 03      BNE LDA8E
DA8B          LDA8B:
DA8B 4C 2F EA   JMP LEA2F
DA8E          LDA8E:
DA8E A5 16      LDA sa
DA90 C9 0F      CMP #$F
DA92 F0 57      BEQ LDAEB
DA94          LDA94:
DA94 B5 A2      LDA chnrdy,X
DA96 29 08      AND #$8
DA98 D0 13      BNE LDAAD
DA9A          LDA9A:
DA9A 20 73 D8   JSR typfil
DA9D C9 07      CMP #$7
DA9F D0 07      BNE LDAA8
DAA1          LDAA1:
DAA1 A9 89      LDA #$89
DAA3 95 A2      STA chnrdy,X
DAA5 4C B6 DA   JMP LDAB6
DAA8          LDAA8:
DAA8 A9 00      LDA #$0
DAAA 95 A2      STA chnrdy,X
DAAC 60         RTS
DAAD          LDAAD:
DAAD A5 16      LDA sa
DAAF F0 2F      BEQ LDAE0
DAB1          LDAB1:
DAB1 20 73 D8   JSR typfil
DAB4 90 22      BCC LDAD8
DAB6          LDAB6:
DAB6 20 7D D8   JSR getpre
DAB9 B5 29      LDA buftab_0,X
DABB D9 C7 00   CMP lstchr,Y
DABE D0 04      BNE rnget1
DAC0          LDAC0:
DAC0 A9 00      LDA #$0
DAC2 95 29      STA buftab_0,X
DAC4          rnget1:
DAC4 F6 29      INC buftab_0,X
DAC6          rnget2:
DAC6 A1 29      LDA (buftab_0,X)
DAC8 99 BF 00   STA chndat,Y
DACB B5 29      LDA buftab_0,X
DACD D9 C7 00   CMP lstchr,Y
DAD0 D0 05      BNE LDAD7
DAD2          LDAD2:
DAD2 A9 81      LDA #$81
DAD4 99 A2 00   STA chnrdy,Y
DAD7          LDAD7:
DAD7 60         RTS
DAD8          LDAD8:
DAD8 20 A4 D8   JSR rdbyt
DADB          LDADB:
DADB A6 15      LDX lindx
DADD 95 BF      STA chndat,X
DADF 60         RTS
DAE0          LDAE0:
DAE0 AD 49 43   LDA L4349
DAE3 F0 F3      BEQ LDAD8
DAE5          LDAE5:
DAE5 20 6C F4   JSR LF46C
DAE8 4C DB DA   JMP LDADB
DAEB          LDAEB:
DAEB 20 C0 DB   JSR getpnt
DAEE C9 DB      CMP #$DB
DAF0 D0 18      BNE LDB0A
DAF2          LDAF2:
DAF2 A5 28      LDA dirbuf+1
DAF4 C9 43      CMP #$43
DAF6 D0 12      BNE LDB0A
DAF8          LDAF8:
DAF8 A9 0D      LDA #$D
DAFA 85 18      STA data
DAFC 20 53 F9   JSR erroff
DAFF A9 00      LDA #$0
DB01 20 4A F1   JSR errts0
DB04 C6 47      DEC buftab_errbuf?
DB06 A9 80      LDA #$80
DB08 D0 12      BNE LDB1C
DB0A          LDB0A:
DB0A 20 85 D8   JSR getbyt
DB0D 85 18      STA data
DB0F D0 09      BNE ge20
DB11          ge15:
DB11 A9 DB      LDA #$DB
DB13 20 A0 DB   JSR setpnt
DB16 A9 43      LDA #$43
DB18 95 2A      STA buftab_0+1,X
DB1A          ge20:
DB1A A9 88      LDA #$88
DB1C          LDB1C:
DB1C 85 A9      STA LA9
DB1E A5 18      LDA data
DB20 85 C6      STA chndat+errchn
DB22 60         RTS
DB23          nxtbuf:
DB23 20 BB E8   JSR getact
DB26 0A         ASL A
DB27 AA         TAX
DB28 A9 00      LDA #$0
DB2A 95 29      STA buftab_0,X
DB2C A1 29      LDA (buftab_0,X)
DB2E F0 05      BEQ LDB35
DB30          LDB30:
DB30 D6 29      DEC buftab_0,X
DB32 4C A4 D8   JMP rdbyt
DB35          LDB35:
DB35 60         RTS
DB36          drtrd:
DB36 A9 80      LDA #$80
DB38 D0 02      BNE LDB3C
DB3A          drtwrt:
DB3A A9 90      LDA #$90
DB3C          LDB3C:
DB3C 05 12      ORA drvnum
DB3E 8D 3E 43   STA cmd
DB41 A5 AB      LDA jobnum
DB43 20 1B FF   JSR sethdra
DB46 A6 AB      LDX jobnum
DB48 4C 83 DC   JMP doit2
DB4B          opnird:
DB4B A9 01      LDA #$1
DB4D          opntyp:
DB4D 85 CF      STA type
DB4F A9 11      LDA #$11
DB51 85 16      STA sa
DB53 20 AB E4   JSR opnrch?
DB56 A9 02      LDA #$2
DB58 4C A0 DB   JMP setpnt
DB5B          LDB5B:
DB5B A9 12      LDA #$12
DB5D 85 16      STA sa
DB5F 4C 66 E5   JMP opnwch
DB62          nxdbrk:
DB62 20 14 E7   JSR curblk
DB65 A9 01      LDA #$1
DB67 85 04      STA t0_temp
DB69 AD F4 10   LDA secinc
DB6C 48         PHA
DB6D A9 03      LDA #$3
DB6F 8D F4 10   STA secinc
DB72 20 63 F9   JSR LF963
DB75 68         PLA
DB76 8D F4 10   STA secinc
DB79 A9 00      LDA #$0
DB7B 20 A0 DB   JSR setpnt
DB7E A5 13      LDA track
DB80 20 4A D7   JSR putbyt
DB83 A5 14      LDA sector
DB85 20 4A D7   JSR putbyt
DB88 20 17 D8   JSR writbuf
DB8B 20 89 DC   JSR watjob
DB8E A9 00      LDA #$0
DB90 20 A0 DB   JSR setpnt
DB93          LDB93:
DB93 20 4A D7   JSR putbyt
DB96 D0 FB      BNE LDB93
DB98          LDB98:
DB98 20 4A D7   JSR putbyt
DB9B A9 FF      LDA #$FF
DB9D 4C 4A D7   JMP putbyt
DBA0          setpnt:
DBA0 85 04      STA t0_temp
DBA2 20 BB E8   JSR getact
DBA5 0A         ASL A
DBA6 AA         TAX
DBA7 B5 2A      LDA buftab_0+1,X
DBA9 85 28      STA dirbuf+1
DBAB A5 04      LDA t0_temp
DBAD 95 29      STA buftab_0,X
DBAF 85 27      STA dirbuf
DBB1 60         RTS
DBB2          freich:
DBB2 A9 11      LDA #$11
DBB4 85 16      STA sa
DBB6 20 74 D9   JSR frechn
DBB9 A9 12      LDA #$12
DBBB 85 16      STA sa
DBBD 4C 74 D9   JMP frechn
DBC0          getpnt:
DBC0 20 BB E8   JSR getact
DBC3          setdir:
DBC3 0A         ASL A
DBC4 AA         TAX
DBC5 B5 2A      LDA buftab_0+1,X
DBC7 85 28      STA dirbuf+1
DBC9 B5 29      LDA buftab_0,X
DBCB 85 27      STA dirbuf
DBCD 60         RTS
DBCE          drdbyt:
DBCE 85 06      STA t2
DBD0 20 BB E8   JSR getact
DBD3 AA         TAX
DBD4 BD DE DB   LDA bufind,X
DBD7 85 07      STA t3
DBD9 A0 00      LDY #$0
DBDB B1 06      LDA (t2),Y
DBDD 60         RTS
DBDE          bufind:
DBDE 11 12 13   .BYTE $11,$12,$13
DBE1 20 21 22   .BYTE $20,$21,$22
DBE4 23 30 31   .BYTE $23,$30,$31
DBE7 32 33 40   .BYTE $32,$33,$40
DBEA 41 42 43   .BYTE $41,$42,$43
DBED          setljb:
DBED BD 50 43   LDA lstjob,X
DBF0 29 01      AND #$1
DBF2 0D 3E 43   ORA cmd
DBF5          setjob:
DBF5 48         PHA
DBF6 86 AB      STX jobnum
DBF8 8A         TXA
DBF9 0A         ASL A
DBFA 0A         ASL A
DBFB 0A         ASL A
DBFC AA         TAX
DBFD BD 24 10   LDA hdrs_sector,X
DC00 8D 3E 43   STA cmd
DC03 BD 23 10   LDA hdrs_track,X
DC06 F0 2D      BEQ tserr
DC08          LDC08:
DC08 CD E9 10   CMP maxtrk
DC0B B0 28      BCS tserr
DC0D          LDC0D:
DC0D AA         TAX
DC0E 68         PLA
DC0F 48         PHA
DC10 29 F0      AND #$F0
DC12 C9 90      CMP #$90
DC14 D0 53      BNE sjb1
DC16          LDC16:
DC16 68         PLA
DC17 48         PHA
DC18 4A         LSR A
DC19 B0 05      BCS sjb2
DC1B          LDC1B:
DC1B AD 02 41   LDA dskver0_buf
DC1E 90 03      BCC LDC23
DC20          sjb2:
DC20 AD 02 42   LDA dskver1_buf
DC23          LDC23:
DC23 F0 05      BEQ LDC2A
DC25          LDC25:
DC25 CD 9F 10   CMP vernum
DC28 D0 37      BNE vnerr
DC2A          LDC2A:
DC2A 8A         TXA
DC2B 20 12 FF   JSR maxsec
DC2E CD 3E 43   CMP cmd
DC31 F0 02      BEQ tserr
DC33          LDC33:
DC33 B0 34      BCS sjb1
DC35          tserr:
DC35 20 3D DC   JSR hed2ts
DC38          LDC38:
DC38 A9 66      LDA #$66
DC3A 4C 30 FF   JMP cmder2
DC3D          hed2ts:
DC3D A5 AB      LDA jobnum
DC3F 0A         ASL A
DC40 0A         ASL A
DC41 0A         ASL A
DC42 AA         TAX
DC43 BD 23 10   LDA hdrs_track,X
DC46 85 13      STA track
DC48 BD 24 10   LDA hdrs_sector,X
DC4B 85 14      STA sector
DC4D 60         RTS
DC4E          tschk:
DC4E A5 13      LDA track
DC50 F0 E6      BEQ LDC38
DC52          LDC52:
DC52 CD E9 10   CMP maxtrk
DC55 B0 E1      BCS LDC38
DC57          LDC57:
DC57 20 12 FF   JSR maxsec
DC5A C5 14      CMP sector
DC5C F0 DA      BEQ LDC38
DC5E          LDC5E:
DC5E 90 D8      BCC LDC38
DC60          LDC60:
DC60 60         RTS
DC61          vnerr:
DC61 20 3D DC   JSR hed2ts
DC64 A9 73      LDA #$73
DC66 4C 30 FF   JMP cmder2
DC69          sjb1:
DC69 A6 AB      LDX jobnum
DC6B 68         PLA
DC6C 8D 3E 43   STA cmd
DC6F 9D 03 10   STA jobs,X
DC72 9D 50 43   STA lstjob,X
DC75 60         RTS
DC76          doread:
DC76 A9 80      LDA #$80
DC78 D0 02      BNE LDC7C
DC7A          dowrit:
DC7A A9 90      LDA #$90
DC7C          LDC7C:
DC7C 05 12      ORA drvnum
DC7E A6 AB      LDX jobnum
DC80          doit:
DC80 8D 3E 43   STA cmd
DC83          doit2:
DC83 AD 3E 43   LDA cmd
DC86 20 F5 DB   JSR setjob
DC89          watjob:
DC89 20 33 FF   JSR tstjob
DC8C B0 FB      BCS watjob
DC8E          LDC8E:
DC8E 48         PHA
DC8F A9 00      LDA #$0
DC91 8D 9A 43   STA jobrtn
DC94 68         PLA
DC95 60         RTS
DC96          tstjob_j:
DC96 BD 03 10   LDA jobs,X
DC99 30 11      BMI notyet
DC9B          LDC9B:
DC9B C9 02      CMP #$2
DC9D 90 0B      BCC ok
DC9F          LDC9F:
DC9F C9 08      CMP #$8
DCA1 F0 04      BEQ LDCA7
DCA3          LDCA3:
DCA3 C9 0B      CMP #$B
DCA5 D0 07      BNE recov
DCA7          LDCA7:
DCA7 4C 1F DD   JMP LDD1F
DCAA          ok:
DCAA 18         CLC
DCAB 60         RTS
DCAC          notyet:
DCAC 38         SEC
DCAD 60         RTS
DCAE          recov:
DCAE 98         TYA
DCAF 48         PHA
DCB0 A5 12      LDA drvnum
DCB2 48         PHA
DCB3 20 88 DD   JSR dorec
DCB6 C9 02      CMP #$2
DCB8 B0 03      BCS LDCBD
DCBA          LDCBA:
DCBA 4C 4E DD   JMP LDD4E
DCBD          LDCBD:
DCBD BD 50 43   LDA lstjob,X
DCC0 48         PHA
DCC1 29 01      AND #$1
DCC3 85 12      STA drvnum
DCC5 68         PLA
DCC6 29 F0      AND #$F0
DCC8 48         PHA
DCC9 C9 90      CMP #$90
DCCB D0 07      BNE LDCD4
DCCD          LDCCD:
DCCD A5 12      LDA drvnum
DCCF 09 B8      ORA #$B8
DCD1 9D 50 43   STA lstjob,X
DCD4          LDCD4:
DCD4 2C F5 10   BIT revcnt
DCD7 70 51      BVS LDD2A
DCD9          LDCD9:
DCD9 A9 00      LDA #$0
DCDB 8D 9B 43   STA eptr
DCDE 8D 9C 43   STA toff
DCE1          LDCE1:
DCE1 AC 9B 43   LDY eptr
DCE4 AD 9C 43   LDA toff
DCE7 38         SEC
DCE8 F9 D2 FF   SBC offset,Y
DCEB 8D 9C 43   STA toff
DCEE B9 D2 FF   LDA offset,Y
DCF1 20 58 DD   JSR hedoff
DCF4 EE 9B 43   INC eptr
DCF7 20 88 DD   JSR dorec
DCFA C9 02      CMP #$2
DCFC 90 08      BCC LDD06
DCFE          LDCFE:
DCFE AC 9B 43   LDY eptr
DD01 B9 D2 FF   LDA offset,Y
DD04 D0 DB      BNE LDCE1
DD06          LDD06:
DD06 AD 9C 43   LDA toff
DD09 20 58 DD   JSR hedoff
DD0C BD 03 10   LDA jobs,X
DD0F C9 02      CMP #$2
DD11 90 2A      BCC LDD3D
DD13          LDD13:
DD13 B0 15      BCS LDD2A
DD15          quit:
DD15 68         PLA
DD16 C9 90      CMP #$90
DD18 D0 05      BNE LDD1F
DD1A          LDD1A:
DD1A 05 12      ORA drvnum
DD1C 9D 50 43   STA lstjob,X
DD1F          LDD1F:
DD1F 2C 9A 43   BIT jobrtn
DD22 30 2A      BMI LDD4E
DD24          LDD24:
DD24 BD 03 10   LDA jobs,X
DD27 20 15 FF   JSR error
DD2A          LDD2A:
DD2A A9 C0      LDA #$C0
DD2C 05 12      ORA drvnum
DD2E 9D 03 10   STA jobs,X
DD31          LDD31:
DD31 BD 03 10   LDA jobs,X
DD34 30 FB      BMI LDD31
DD36          LDD36:
DD36 20 88 DD   JSR dorec
DD39 C9 02      CMP #$2
DD3B B0 D8      BCS quit
DD3D          LDD3D:
DD3D 68         PLA
DD3E C9 90      CMP #$90
DD40 D0 0C      BNE LDD4E
DD42          LDD42:
DD42 05 12      ORA drvnum
DD44 9D 50 43   STA lstjob,X
DD47 20 88 DD   JSR dorec
DD4A C9 02      CMP #$2
DD4C B0 D1      BCS LDD1F
DD4E          LDD4E:
DD4E 68         PLA
DD4F 85 12      STA drvnum
DD51 68         PLA
DD52 A8         TAY
DD53 BD 03 10   LDA jobs,X
DD56 18         CLC
DD57 60         RTS
DD58          hedoff:
DD58 C9 00      CMP #$0
DD5A F0 18      BEQ LDD74
DD5C          LDD5C:
DD5C 30 0C      BMI LDD6A
DD5E          LDD5E:
DD5E A0 01      LDY #$1
DD60 20 75 DD   JSR movhed
DD63 38         SEC
DD64 E9 01      SBC #$1
DD66 D0 F6      BNE LDD5E
DD68          LDD68:
DD68 F0 0A      BEQ LDD74
DD6A          LDD6A:
DD6A A0 FF      LDY #$FF
DD6C 20 75 DD   JSR movhed
DD6F 18         CLC
DD70 69 01      ADC #$1
DD72 D0 F6      BNE LDD6A
DD74          LDD74:
DD74 60         RTS
DD75          movhed:
DD75 48         PHA
DD76 98         TYA
DD77 A4 12      LDY drvnum
DD79 99 A1 10   STA phase,Y
DD7C          LDD7C:
DD7C D9 A1 10   CMP phase,Y
DD7F F0 FB      BEQ LDD7C
DD81          LDD81:
DD81 A9 00      LDA #$0
DD83 99 A1 10   STA phase,Y
DD86 68         PLA
DD87 60         RTS
DD88          dorec:
DD88 AD F5 10   LDA revcnt
DD8B 29 3F      AND #$3F
DD8D A8         TAY
DD8E          LDD8E:
DD8E AD 82 02   LDA io_dskcnt
DD91 49 20      EOR #$20
DD93 8D 82 02   STA io_dskcnt
DD96 BD 50 43   LDA lstjob,X
DD99 9D 03 10   STA jobs,X
DD9C          LDD9C:
DD9C BD 03 10   LDA jobs,X
DD9F 30 FB      BMI LDD9C
DDA1          LDDA1:
DDA1 C9 02      CMP #$2
DDA3 90 03      BCC LDDA8
DDA5          LDDA5:
DDA5 88         DEY
DDA6 D0 E6      BNE LDD8E
DDA8          LDDA8:
DDA8 48         PHA
DDA9 20 53 F9   JSR erroff
DDAC 68         PLA
DDAD 60         RTS
DDAE          sethdr_j:
DDAE 20 BB E8   JSR getact
DDB1          sethdra_j:
DDB1 0A         ASL A
DDB2 0A         ASL A
DDB3 0A         ASL A
DDB4 A8         TAY
DDB5 A5 13      LDA track
DDB7 99 23 10   STA hdrs_track,Y
DDBA A5 14      LDA sector
DDBC 99 24 10   STA hdrs_sector,Y
DDBF A5 12      LDA drvnum
DDC1 0A         ASL A
DDC2 AA         TAX
DDC3 BD 42 43   LDA dskid,X
DDC6 99 21 10   STA hdrs_dskid,Y
DDC9 BD 43 43   LDA dskid+1,X
DDCC 99 22 10   STA hdrs_dskid+1,Y
DDCF 60         RTS
DDD0          addfil:
DDD0 A5 16      LDA sa
DDD2 48         PHA
DDD3 A5 15      LDA lindx
DDD5 48         PHA
DDD6 A5 14      LDA sector
DDD8 48         PHA
DDD9 A5 13      LDA track
DDDB 48         PHA
DDDC A9 11      LDA #$11
DDDE 85 16      STA sa
DDE0 20 14 E7   JSR curblk
DDE3 A5 CF      LDA type
DDE5 48         PHA
DDE6 A5 90      LDA fildrv
DDE8 29 01      AND #$1
DDEA 85 12      STA drvnum
DDEC A6 AB      LDX jobnum
DDEE 5D 50 43   EOR lstjob,X
DDF1 4A         LSR A
DDF2 90 0C      BCC LDE00
DDF4          LDDF4:
DDF4 A2 01      LDX #$1
DDF6 8E 94 43   STX delind
DDF9 20 0F CC   JSR srchst
DDFC F0 1D      BEQ LDE1B
DDFE          LDDFE:
DDFE D0 28      BNE af20
DE00          LDE00:
DE00 AD 93 43   LDA delsec
DE03 F0 0C      BEQ LDE11
DE05          LDE05:
DE05 C5 14      CMP sector
DE07 F0 1F      BEQ af20
DE09          LDE09:
DE09 85 14      STA sector
DE0B 20 36 DB   JSR drtrd
DE0E 4C 28 DE   JMP af20
DE11          LDE11:
DE11 A9 01      LDA #$1
DE13 8D 94 43   STA delind
DE16 20 7D CC   JSR search
DE19 D0 0D      BNE af20
DE1B          LDE1B:
DE1B 20 62 DB   JSR nxdbrk
DE1E A5 14      LDA sector
DE20 8D 93 43   STA delsec
DE23 A9 02      LDA #$2
DE25 8D 94 43   STA delind
DE28          af20:
DE28 AD 94 43   LDA delind
DE2B 20 A0 DB   JSR setpnt
DE2E 68         PLA
DE2F 85 CF      STA type
DE31 C9 04      CMP #$4
DE33 D0 02      BNE LDE37
DE35          LDE35:
DE35 09 80      ORA #$80
DE37          LDE37:
DE37 20 4A D7   JSR putbyt
DE3A 68         PLA
DE3B 8D 82 43   STA filtrk
DE3E 20 4A D7   JSR putbyt
DE41 68         PLA
DE42 8D 87 43   STA filsec
DE45 20 4A D7   JSR putbyt
DE48 20 BB E8   JSR getact
DE4B A8         TAY
DE4C AD 7C 43   LDA filtbl
DE4F AA         TAX
DE50 A9 10      LDA #$10
DE52 20 D4 CC   JSR trname
DE55 A0 10      LDY #$10
DE57 A9 00      LDA #$0
DE59          LDE59:
DE59 91 27      STA (dirbuf),Y
DE5B C8         INY
DE5C C0 1B      CPY #$1B
DE5E 90 F9      BCC LDE59
DE60          LDE60:
DE60 A5 CF      LDA type
DE62 C9 04      CMP #$4
DE64 D0 13      BNE LDE79
DE66          LDE66:
DE66 A0 10      LDY #$10
DE68 AD 4E 43   LDA trkss
DE6B 91 27      STA (dirbuf),Y
DE6D C8         INY
DE6E AD 4F 43   LDA secss
DE71 91 27      STA (dirbuf),Y
DE73 C8         INY
DE74 AD 4D 43   LDA rec
DE77 91 27      STA (dirbuf),Y
DE79          LDE79:
DE79 20 3A DB   JSR drtwrt
DE7C 68         PLA
DE7D 85 15      STA lindx
DE7F AA         TAX
DE80 68         PLA
DE81 85 16      STA sa
DE83 AD 93 43   LDA delsec
DE86 85 86      STA entsec
DE88 9D 5F 43   STA dsec,X
DE8B AD 94 43   LDA delind
DE8E 85 8B      STA entind
DE90 9D 67 43   STA dind,X
DE93 A5 CF      LDA type
DE95 85 95      STA pattyp
DE97 A5 12      LDA drvnum
DE99 85 90      STA fildrv
DE9B 60         RTS
DE9C          LDE9C:
DE9C AA         TAX
DE9D AA         TAX
DE9E AA         TAX
DE9F AA         TAX
DEA0 AA         TAX
DEA1 AA         TAX
DEA2 AA         TAX
DEA3 AA         TAX
DEA4 AA         TAX
DEA5 AA         TAX
DEA6 AA         TAX
DEA7 AA         TAX
DEA8 AA         TAX
DEA9 AA         TAX
DEAA AA         TAX
DEAB AA         TAX
DEAC AA         TAX
DEAD AA         TAX
DEAE AA         TAX
DEAF AA         TAX
DEB0 AA         TAX
DEB1 AA         TAX
DEB2 AA         TAX
DEB3 AA         TAX
DEB4 AA         TAX
DEB5 AA         TAX
DEB6 AA         TAX
DEB7 AA         TAX
DEB8 AA         TAX
DEB9 AA         TAX
DEBA AA         TAX
DEBB AA         TAX
DEBC AA         TAX
DEBD AA         TAX
DEBE AA         TAX
DEBF AA         TAX
DEC0 AA         TAX
DEC1 AA         TAX
DEC2 AA         TAX
DEC3 AA         TAX
DEC4 AA         TAX
DEC5 AA         TAX
DEC6 AA         TAX
DEC7 AA         TAX
DEC8 AA         TAX
DEC9 AA         TAX
DECA AA         TAX
DECB AA         TAX
DECC AA         TAX
DECD AA         TAX
DECE AA         TAX
DECF AA         TAX
DED0 AA         TAX
DED1 AA         TAX
DED2 AA         TAX
DED3 AA         TAX
DED4 AA         TAX
DED5 AA         TAX
DED6 AA         TAX
DED7 AA         TAX
DED8 AA         TAX
DED9 AA         TAX
DEDA AA         TAX
DEDB AA         TAX
DEDC AA         TAX
DEDD AA         TAX
DEDE AA         TAX
DEDF AA         TAX
DEE0 AA         TAX
DEE1 AA         TAX
DEE2 AA         TAX
DEE3 AA         TAX
DEE4 AA         TAX
DEE5 AA         TAX
DEE6 AA         TAX
DEE7 AA         TAX
DEE8 AA         TAX
DEE9 AA         TAX
DEEA AA         TAX
DEEB AA         TAX
DEEC AA         TAX
DEED AA         TAX
DEEE AA         TAX
DEEF AA         TAX
DEF0 AA         TAX
DEF1 AA         TAX
DEF2 AA         TAX
DEF3 AA         TAX
DEF4 AA         TAX
DEF5 AA         TAX
DEF6 AA         TAX
DEF7 AA         TAX
DEF8 AA         TAX
DEF9 AA         TAX
DEFA AA         TAX
DEFB AA         TAX
DEFC AA         TAX
DEFD AA         TAX
DEFE AA         TAX
DEFF AA         TAX
DF00 AA         TAX
DF01 AA         TAX
DF02 AA         TAX
DF03 AA         TAX
DF04 AA         TAX
DF05 AA         TAX
DF06 AA         TAX
DF07 AA         TAX
DF08 AA         TAX
DF09 AA         TAX
DF0A AA         TAX
DF0B AA         TAX
DF0C AA         TAX
DF0D AA         TAX
DF0E AA         TAX
DF0F AA         TAX
DF10 AA         TAX
DF11 AA         TAX
DF12 AA         TAX
DF13 AA         TAX
DF14 AA         TAX
DF15 AA         TAX
DF16 AA         TAX
DF17 AA         TAX
DF18 AA         TAX
DF19 AA         TAX
DF1A AA         TAX
DF1B AA         TAX
DF1C AA         TAX
DF1D AA         TAX
DF1E AA         TAX
DF1F AA         TAX
DF20 AA         TAX
DF21 AA         TAX
DF22 AA         TAX
DF23 AA         TAX
DF24 AA         TAX
DF25 AA         TAX
DF26 AA         TAX
DF27 AA         TAX
DF28 AA         TAX
DF29 AA         TAX
DF2A AA         TAX
DF2B AA         TAX
DF2C AA         TAX
DF2D AA         TAX
DF2E AA         TAX
DF2F AA         TAX
DF30 AA         TAX
DF31 AA         TAX
DF32 AA         TAX
DF33 AA         TAX
DF34 AA         TAX
DF35 AA         TAX
DF36 AA         TAX
DF37 AA         TAX
DF38 AA         TAX
DF39 AA         TAX
DF3A AA         TAX
DF3B AA         TAX
DF3C AA         TAX
DF3D AA         TAX
DF3E AA         TAX
DF3F AA         TAX
DF40 AA         TAX
DF41 AA         TAX
DF42 AA         TAX
DF43 AA         TAX
DF44 AA         TAX
DF45 AA         TAX
DF46 AA         TAX
DF47 AA         TAX
DF48 AA         TAX
DF49 AA         TAX
DF4A AA         TAX
DF4B AA         TAX
DF4C AA         TAX
DF4D AA         TAX
DF4E AA         TAX
DF4F AA         TAX
DF50 AA         TAX
DF51 AA         TAX
DF52 AA         TAX
DF53 AA         TAX
DF54 AA         TAX
DF55 AA         TAX
DF56 AA         TAX
DF57 AA         TAX
DF58 AA         TAX
DF59 AA         TAX
DF5A AA         TAX
DF5B AA         TAX
DF5C AA         TAX
DF5D AA         TAX
DF5E AA         TAX
DF5F AA         TAX
DF60 AA         TAX
DF61 AA         TAX
DF62 AA         TAX
DF63 AA         TAX
DF64 AA         TAX
DF65 AA         TAX
DF66 AA         TAX
DF67 AA         TAX
DF68 AA         TAX
DF69 AA         TAX
DF6A AA         TAX
DF6B AA         TAX
DF6C AA         TAX
DF6D AA         TAX
DF6E AA         TAX
DF6F AA         TAX
DF70 AA         TAX
DF71 AA         TAX
DF72 AA         TAX
DF73 AA         TAX
DF74 AA         TAX
DF75 AA         TAX
DF76 AA         TAX
DF77 AA         TAX
DF78 AA         TAX
DF79 AA         TAX
DF7A AA         TAX
DF7B AA         TAX
DF7C AA         TAX
DF7D AA         TAX
DF7E AA         TAX
DF7F AA         TAX
DF80 AA         TAX
DF81 AA         TAX
DF82 AA         TAX
DF83 AA         TAX
DF84 AA         TAX
DF85 AA         TAX
DF86 AA         TAX
DF87 AA         TAX
DF88 AA         TAX
DF89 AA         TAX
DF8A AA         TAX
DF8B AA         TAX
DF8C AA         TAX
DF8D AA         TAX
DF8E AA         TAX
DF8F AA         TAX
DF90 AA         TAX
DF91 AA         TAX
DF92 AA         TAX
DF93 AA         TAX
DF94 AA         TAX
DF95 AA         TAX
DF96 AA         TAX
DF97 AA         TAX
DF98 AA         TAX
DF99 AA         TAX
DF9A AA         TAX
DF9B AA         TAX
DF9C AA         TAX
DF9D AA         TAX
DF9E AA         TAX
DF9F AA         TAX
DFA0 AA         TAX
DFA1 AA         TAX
DFA2 AA         TAX
DFA3 AA         TAX
DFA4 AA         TAX
DFA5 AA         TAX
DFA6 AA         TAX
DFA7 AA         TAX
DFA8 AA         TAX
DFA9 AA         TAX
DFAA AA         TAX
DFAB AA         TAX
DFAC AA         TAX
DFAD AA         TAX
DFAE AA         TAX
DFAF AA         TAX
DFB0 AA         TAX
DFB1 AA         TAX
DFB2 AA         TAX
DFB3 AA         TAX
DFB4 AA         TAX
DFB5 AA         TAX
DFB6 AA         TAX
DFB7 AA         TAX
DFB8 AA         TAX
DFB9 AA         TAX
DFBA AA         TAX
DFBB AA         TAX
DFBC AA         TAX
DFBD AA         TAX
DFBE AA         TAX
DFBF AA         TAX
DFC0 AA         TAX
DFC1 AA         TAX
DFC2 AA         TAX
DFC3 AA         TAX
DFC4 AA         TAX
DFC5 AA         TAX
DFC6 AA         TAX
DFC7 AA         TAX
DFC8 AA         TAX
DFC9 AA         TAX
DFCA AA         TAX
DFCB AA         TAX
DFCC AA         TAX
DFCD AA         TAX
DFCE AA         TAX
DFCF AA         TAX
DFD0 AA         TAX
DFD1 AA         TAX
DFD2 AA         TAX
DFD3 AA         TAX
DFD4 AA         TAX
DFD5 AA         TAX
DFD6 AA         TAX
DFD7 AA         TAX
DFD8 AA         TAX
DFD9 AA         TAX
DFDA AA         TAX
DFDB AA         TAX
DFDC AA         TAX
DFDD AA         TAX
DFDE AA         TAX
DFDF AA         TAX
DFE0 AA         TAX
DFE1 AA         TAX
DFE2 AA         TAX
DFE3 AA         TAX
DFE4 AA         TAX
DFE5 AA         TAX
DFE6 AA         TAX
DFE7 AA         TAX
DFE8 AA         TAX
DFE9 AA         TAX
DFEA AA         TAX
DFEB AA         TAX
DFEC AA         TAX
DFED AA         TAX
DFEE AA         TAX
DFEF AA         TAX
DFF0 AA         TAX
DFF1 AA         TAX
DFF2 AA         TAX
DFF3 AA         TAX
DFF4 AA         TAX
DFF5 AA         TAX
DFF6 AA         TAX
DFF7 AA         TAX
DFF8 AA         TAX
DFF9 AA         TAX
DFFA AA         TAX
DFFB AA         TAX
DFFC AA         TAX
DFFD AA         TAX
DFFE AA         TAX
DFFF AA         TAX
E000 BA         TSX
E001          open:
E001 A5 16      LDA sa
E003 8D 3D 43   STA tempsa
E006 20 18 C9   JSR cmdset
E009 8E 3B 43   STX cmdnum
E00C AE 00 43   LDX cmdbuf
E00F AD 3D 43   LDA tempsa
E012 D0 29      BNE LE03D
E014          LE014:
E014 E0 2A      CPX #$2A
E016 D0 25      BNE LE03D
E018          LE018:
E018 A5 11      LDA prgtrk
E01A F0 4A      BEQ LE066
E01C          LE01C:
E01C 85 13      STA track
E01E AD 70 43   LDA prgdrv
E021 85 12      STA drvnum
E023 85 90      STA fildrv
E025 A9 02      LDA #$2
E027 85 95      STA pattyp
E029 AD 71 43   LDA prgsec
E02C 85 14      STA sector
E02E 20 AB E4   JSR opnrch?
E031 A9 04      LDA #$4
E033 05 12      ORA drvnum
E035          endrd:
E035 A6 15      LDX lindx
E037 99 9A 00   STA filtyp,Y
E03A 4C FD C7   JMP endcmd
E03D          LE03D:
E03D E0 24      CPX #$24
E03F D0 1E      BNE LE05F
E041          LE041:
E041 AD 3D 43   LDA tempsa
E044 D0 03      BNE op04
E046          LE046:
E046 4C 90 E2   JMP loadir
E049          op04:
E049 20 36 C8   JSR simprs
E04C AD CA 10   LDA dirtrack
E04F 85 13      STA track
E051 A9 00      LDA #$0
E053 85 14      STA sector
E055 20 AB E4   JSR opnrch?
E058 A5 12      LDA drvnum
E05A 09 02      ORA #$2
E05C 4C 35 E0   JMP endrd
E05F          LE05F:
E05F E0 23      CPX #$23
E061 D0 12      BNE LE075
E063          LE063:
E063 4C 99 D3   JMP opnblk
E066          LE066:
E066 A9 02      LDA #$2
E068 8D 98 43   STA typflg
E06B A9 00      LDA #$0
E06D 85 12      STA drvnum
E06F 8D 90 43   STA lstdrv
E072 20 89 D7   JSR initdr
E075          LE075:
E075 20 4A C8   JSR prscln
E078 D0 04      BNE LE07E
E07A          LE07A:
E07A A2 00      LDX #$0
E07C F0 0C      BEQ LE08A
E07E          LE07E:
E07E 8A         TXA
E07F F0 05      BEQ LE086
E081          LE081:
E081 A9 30      LDA #$30
E083 4C 2D FF   JMP cmderr
E086          LE086:
E086 88         DEY
E087 F0 01      BEQ LE08A
E089          LE089:
E089 88         DEY
E08A          LE08A:
E08A 8C 7C 43   STY filtbl
E08D A9 8D      LDA #$8D
E08F 20 CD C8   JSR parse
E092 E8         INX
E093 8E 7A 43   STX f2cnt
E096 20 76 C9   JSR onedrv
E099 20 2D CA   JSR optsch
E09C 20 00 CB   JSR ffst
E09F A2 00      LDX #$0
E0A1 8E 4D 43   STX rec
E0A4 8E 99 43   STX mode
E0A7 86 CF      STX type
E0A9 E8         INX
E0AA EC 79 43   CPX f1cnt
E0AD B0 10      BCS LE0BF
E0AF          LE0AF:
E0AF 20 46 E2   JSR cktm
E0B2 E8         INX
E0B3 EC 79 43   CPX f1cnt
E0B6 B0 07      BCS LE0BF
E0B8          LE0B8:
E0B8 C0 04      CPY #$4
E0BA F0 34      BEQ op60
E0BC          LE0BC:
E0BC 20 46 E2   JSR cktm
E0BF          LE0BF:
E0BF AE 3D 43   LDX tempsa
E0C2 86 16      STX sa
E0C4 E0 02      CPX #$2
E0C6 B0 0B      BCS LE0D3
E0C8          LE0C8:
E0C8 8E 99 43   STX mode
E0CB A5 CF      LDA type
E0CD D0 17      BNE LE0E6
E0CF          LE0CF:
E0CF A9 02      LDA #$2
E0D1 85 CF      STA type
E0D3          LE0D3:
E0D3 A5 CF      LDA type
E0D5 D0 0F      BNE LE0E6
E0D7          LE0D7:
E0D7 A5 95      LDA pattyp
E0D9 29 07      AND #$7
E0DB 85 CF      STA type
E0DD AD 82 43   LDA filtrk
E0E0 D0 04      BNE LE0E6
E0E2          LE0E2:
E0E2 A9 01      LDA #$1
E0E4 85 CF      STA type
E0E6          LE0E6:
E0E6 AD 99 43   LDA mode
E0E9 C9 01      CMP #$1
E0EB F0 18      BEQ LE105
E0ED          LE0ED:
E0ED 4C 7E E1   JMP op90
E0F0          op60:
E0F0 BC 7C 43   LDY filtbl,X
E0F3 B9 00 43   LDA cmdbuf,Y
E0F6 8D 4D 43   STA rec
E0F9 AD 82 43   LDA filtrk
E0FC D0 C1      BNE LE0BF
E0FE          LE0FE:
E0FE A9 01      LDA #$1
E100 8D 99 43   STA mode
E103 D0 BA      BNE LE0BF
E105          LE105:
E105 A5 95      LDA pattyp
E107 29 80      AND #$80
E109 AA         TAX
E10A D0 14      BNE LE120
E10C          LE10C:
E10C A9 20      LDA #$20
E10E 24 95      BIT pattyp
E110 F0 06      BEQ LE118
E112          LE112:
E112 20 0B CF   JSR deldir
E115 4C 20 E2   JMP opwrit
E118          LE118:
E118 AD 82 43   LDA filtrk
E11B D0 03      BNE LE120
E11D          LE11D:
E11D 4C 20 E2   JMP opwrit
E120          LE120:
E120 AD 00 43   LDA cmdbuf
E123 C9 40      CMP #$40
E125 F0 0D      BEQ LE134
E127          LE127:
E127 8A         TXA
E128 D0 05      BNE LE12F
E12A          LE12A:
E12A A9 63      LDA #$63
E12C 4C 2D FF   JMP cmderr
E12F          LE12F:
E12F A9 33      LDA #$33
E131 4C 2D FF   JMP cmderr
E134          LE134:
E134 A5 95      LDA pattyp
E136 29 07      AND #$7
E138 C5 CF      CMP type
E13A D0 66      BNE LE1A2
E13C          LE13C:
E13C C9 04      CMP #$4
E13E F0 62      BEQ LE1A2
E140          LE140:
E140 20 66 E5   JSR opnwch
E143 A5 15      LDA lindx
E145 8D 72 43   STA wlindx
E148 A9 11      LDA #$11
E14A 85 16      STA sa
E14C 20 3B D8   JSR fndrch
E14F AD 96 43   LDA index
E152 20 A0 DB   JSR setpnt
E155 A0 00      LDY #$0
E157 B1 27      LDA (dirbuf),Y
E159 09 20      ORA #$20
E15B 91 27      STA (dirbuf),Y
E15D A0 1A      LDY #$1A
E15F A5 13      LDA track
E161 91 27      STA (dirbuf),Y
E163 C8         INY
E164 A5 14      LDA sector
E166 91 27      STA (dirbuf),Y
E168 AE 72 43   LDX wlindx
E16B A5 86      LDA entsec
E16D 9D 5F 43   STA dsec,X
E170 A5 8B      LDA entind
E172 9D 67 43   STA dind,X
E175 20 14 E7   JSR curblk
E178 20 3A DB   JSR drtwrt
E17B 4C 2C E2   JMP opfin
E17E          op90:
E17E AD 82 43   LDA filtrk
E181 D0 05      BNE LE188
E183          LE183:
E183 A9 62      LDA #$62
E185 4C 2D FF   JMP cmderr
E188          LE188:
E188 AD 99 43   LDA mode
E18B C9 03      CMP #$3
E18D F0 0B      BEQ LE19A
E18F          LE18F:
E18F A9 20      LDA #$20
E191 24 95      BIT pattyp
E193 F0 05      BEQ LE19A
E195          LE195:
E195 A9 60      LDA #$60
E197 4C 2D FF   JMP cmderr
E19A          LE19A:
E19A A5 95      LDA pattyp
E19C 29 07      AND #$7
E19E C5 CF      CMP type
E1A0 F0 05      BEQ LE1A7
E1A2          LE1A2:
E1A2 A9 64      LDA #$64
E1A4 4C 2D FF   JMP cmderr
E1A7          LE1A7:
E1A7 A0 00      LDY #$0
E1A9 8C 7B 43   STY f2ptr
E1AC AE 99 43   LDX mode
E1AF E0 02      CPX #$2
E1B1 D0 1A      BNE LE1CD
E1B3          LE1B3:
E1B3 C9 04      CMP #$4
E1B5 F0 EB      BEQ LE1A2
E1B7          LE1B7:
E1B7 B1 27      LDA (dirbuf),Y
E1B9 29 4F      AND #$4F
E1BB 91 27      STA (dirbuf),Y
E1BD A5 16      LDA sa
E1BF 48         PHA
E1C0 A9 11      LDA #$11
E1C2 85 16      STA sa
E1C4 20 14 E7   JSR curblk
E1C7 20 3A DB   JSR drtwrt
E1CA 68         PLA
E1CB 85 16      STA sa
E1CD          LE1CD:
E1CD 20 DD E1   JSR opread
E1D0 AD 99 43   LDA mode
E1D3 C9 02      CMP #$2
E1D5 D0 55      BNE opfin
E1D7          LE1D7:
E1D7 20 66 E2   JSR append
E1DA 4C FD C7   JMP endcmd
E1DD          opread:
E1DD A0 13      LDY #$13
E1DF B1 27      LDA (dirbuf),Y
E1E1 8D 4E 43   STA trkss
E1E4 C8         INY
E1E5 B1 27      LDA (dirbuf),Y
E1E7 8D 4F 43   STA secss
E1EA C8         INY
E1EB B1 27      LDA (dirbuf),Y
E1ED AE 4D 43   LDX rec
E1F0 8D 4D 43   STA rec
E1F3 8A         TXA
E1F4 F0 0A      BEQ LE200
E1F6          LE1F6:
E1F6 CD 4D 43   CMP rec
E1F9 F0 05      BEQ LE200
E1FB          LE1FB:
E1FB A9 50      LDA #$50
E1FD 20 2D FF   JSR cmderr
E200          LE200:
E200 AE 7B 43   LDX f2ptr
E203 BD 82 43   LDA filtrk,X
E206 85 13      STA track
E208 BD 87 43   LDA filsec,X
E20B 85 14      STA sector
E20D 20 AB E4   JSR opnrch?
E210 A4 15      LDY lindx
E212 AE 7B 43   LDX f2ptr
E215 B5 86      LDA entsec,X
E217 99 5F 43   STA dsec,Y
E21A B5 8B      LDA entind,X
E21C 99 67 43   STA dind,Y
E21F 60         RTS
E220          opwrit:
E220 A5 90      LDA fildrv
E222 29 01      AND #$1
E224 85 12      STA drvnum
E226 20 66 E5   JSR opnwch
E229 20 D0 DD   JSR addfil
E22C          opfin:
E22C A5 16      LDA sa
E22E C9 02      CMP #$2
E230 B0 11      BCS LE243
E232          LE232:
E232 20 17 E7   JSR LE717
E235 A5 13      LDA track
E237 85 11      STA prgtrk
E239 A5 12      LDA drvnum
E23B 8D 70 43   STA prgdrv
E23E A5 14      LDA sector
E240 8D 71 43   STA prgsec
E243          LE243:
E243 4C FD C7   JMP endcmd
E246          cktm:
E246 BC 7C 43   LDY filtbl,X
E249 B9 00 43   LDA cmdbuf,Y
E24C A0 04      LDY #$4
E24E          LE24E:
E24E 88         DEY
E24F 30 08      BMI LE259
E251          LE251:
E251 D9 81 FF   CMP LFF81,Y
E254 D0 F8      BNE LE24E
E256          LE256:
E256 8C 99 43   STY mode
E259          LE259:
E259 A0 05      LDY #$5
E25B          LE25B:
E25B 88         DEY
E25C 30 07      BMI LE265
E25E          LE25E:
E25E D9 85 FF   CMP LFF85,Y
E261 D0 F8      BNE LE25B
E263          LE263:
E263 84 CF      STY type
E265          LE265:
E265 60         RTS
E266          append:
E266 20 52 D2   JSR gcbyte
E269 A9 80      LDA #$80
E26B 20 80 E6   JSR LE680
E26E F0 F6      BEQ append
E270          LE270:
E270 20 70 E7   JSR LE770
E273 A6 14      LDX sector
E275 E8         INX
E276 8A         TXA
E277 D0 05      BNE LE27E
E279          LE279:
E279 20 F1 D8   JSR LD8F1
E27C A9 02      LDA #$2
E27E          LE27E:
E27E 20 A0 DB   JSR setpnt
E281 A6 15      LDX lindx
E283 A9 01      LDA #$1
E285 95 A2      STA chnrdy,X
E287 A9 80      LDA #$80
E289 05 15      ORA lindx
E28B A6 16      LDX sa
E28D 95 AC      STA lintab,X
E28F 60         RTS
E290          loadir:
E290 A9 0C      LDA #$C
E292 8D 3B 43   STA cmdnum
E295 AE 76 43   LDX cmdsiz
E298 CA         DEX
E299 D0 16      BNE LE2B1
E29B          LE29B:
E29B A9 2A      LDA #$2A
E29D 8D 00 43   STA cmdbuf
E2A0 A9 80      LDA #$80
E2A2 85 95      STA pattyp
E2A4 0D 90 43   ORA lstdrv
E2A7 85 90      STA fildrv
E2A9 EE 79 43   INC f1cnt
E2AC EE 7A 43   INC f2cnt
E2AF D0 3B      BNE LE2EC
E2B1          LE2B1:
E2B1 CA         DEX
E2B2 D0 20      BNE LE2D4
E2B4          LE2B4:
E2B4 AD 01 43   LDA cmdbuf+1
E2B7 20 20 CA   JSR tst0v1
E2BA 30 18      BMI LE2D4
E2BC          LE2BC:
E2BC 29 01      AND #$1
E2BE 85 90      STA fildrv
E2C0 EE 79 43   INC f1cnt
E2C3 EE 7A 43   INC f2cnt
E2C6 EE 7C 43   INC filtbl
E2C9 A9 80      LDA #$80
E2CB 85 95      STA pattyp
E2CD A9 2A      LDA #$2A
E2CF 8D 01 43   STA cmdbuf+1
E2D2 D0 18      BNE LE2EC
E2D4          LE2D4:
E2D4 20 4A C8   JSR prscln
E2D7 D0 05      BNE LE2DE
E2D9          LE2D9:
E2D9 20 41 C9   JSR LC941
E2DC A0 03      LDY #$3
E2DE          LE2DE:
E2DE 88         DEY
E2DF 88         DEY
E2E0 8C 7C 43   STY filtbl
E2E3 20 65 C8   JSR LC865
E2E6 20 FB C9   JSR fs1set
E2E9 20 84 C9   JSR alldrs
E2EC          LE2EC:
E2EC 20 2D CA   JSR optsch
E2EF 20 1F CE   JSR newdir
E2F2 20 00 CB   JSR ffst
E2F5 20 A6 F3   JSR LF3A6
E2F8 20 85 D8   JSR getbyt
E2FB A6 15      LDX lindx
E2FD 95 BF      STA chndat,X
E2FF A5 12      LDA drvnum
E301 8D 90 43   STA lstdrv
E304 09 04      ORA #$4
E306 95 9A      STA filtyp,X
E308 A9 00      LDA #$0
E30A 85 45      STA cb_buftab_cmdbuf
E30C 60         RTS
E30D          close:
E30D A5 16      LDA sa
E30F D0 0B      BNE LE31C
E311          LE311:
E311 A9 00      LDA #$0
E313 8D 49 43   STA L4349
E316 20 74 D9   JSR frechn
E319          LE319:
E319 4C B2 DB   JMP freich
E31C          LE31C:
E31C C9 0F      CMP #$F
E31E F0 0C      BEQ LE32C
E320          LE320:
E320 20 3A E3   JSR LE33A
E323 A5 16      LDA sa
E325 C9 02      CMP #$2
E327 90 F0      BCC LE319
E329          LE329:
E329 4C FD C7   JMP endcmd
E32C          LE32C:
E32C A9 0E      LDA #$E
E32E 85 16      STA sa
E330          LE330:
E330 20 3A E3   JSR LE33A
E333 C6 16      DEC sa
E335 10 F9      BPL LE330
E337          LE337:
E337 4C FD C7   JMP endcmd
E33A          LE33A:
E33A A6 16      LDX sa
E33C B5 AC      LDA lintab,X
E33E C9 FF      CMP #$FF
E340 D0 01      BNE LE343
E342          LE342:
E342 60         RTS
E343          LE343:
E343 29 0F      AND #$F
E345 85 15      STA lindx
E347 20 73 D8   JSR typfil
E34A C9 07      CMP #$7
E34C F0 0F      BEQ LE35D
E34E          LE34E:
E34E C9 04      CMP #$4
E350 F0 11      BEQ LE363
E352          LE352:
E352 20 56 D8   JSR fndwch
E355 B0 09      BCS LE360
E357          LE357:
E357 20 C1 E3   JSR LE3C1
E35A 20 0A E4   JSR LE40A
E35D          LE35D:
E35D 20 74 F7   JSR mapout
E360          LE360:
E360 4C 74 D9   JMP frechn
E363          LE363:
E363 20 CA E6   JSR scrub
E366 20 E9 D6   JSR dbl15_
E369 20 D7 EA   JSR ssend?
E36C A6 83      LDX ssnum
E36E 86 08      STX tmp_fdc
E370 20 B4 FA   JSR getnsides_min1
E373 F0 29      BEQ LE39E
E375          LE375:
E375 E6 08      INC tmp_fdc
E377 A9 00      LDA #$0
E379 85 05      STA t1
E37B 85 06      STA t2
E37D A5 84      LDA ssind
E37F 38         SEC
E380 E9 0E      SBC #$E
E382 85 07      STA t3
E384 20 2C E8   JSR LE82C
E387 A6 15      LDX lindx
E389 A5 05      LDA t1
E38B 95 59      STA recl,X
E38D A5 06      LDA t2
E38F 95 61      STA rech,X
E391          LE391:
E391 A9 40      LDA #$40
E393 20 80 E6   JSR LE680
E396 F0 03      BEQ LE39B
E398          LE398:
E398 20 0A E4   JSR LE40A
E39B          LE39B:
E39B 4C 74 D9   JMP frechn
E39E          LE39E:
E39E A5 84      LDA ssind
E3A0 38         SEC
E3A1 E9 0E      SBC #$E
E3A3 85 07      STA t3
E3A5 AD CF 10   LDA L10CF
E3A8 85 1C      STA r3
E3AA 20 41 E8   JSR LE841
E3AD A2 00      LDX #$0
E3AF A9 02      LDA #$2
E3B1 20 76 E8   JSR LE876
E3B4 A6 15      LDX lindx
E3B6 A5 1E      LDA result
E3B8 95 59      STA recl,X
E3BA A5 1F      LDA result+1
E3BC 95 61      STA rech,X
E3BE 4C 91 E3   JMP LE391
E3C1          LE3C1:
E3C1 A6 15      LDX lindx
E3C3 B5 59      LDA recl,X
E3C5 15 61      ORA rech,X
E3C7 D0 0C      BNE LE3D5
E3C9          LE3C9:
E3C9 20 C0 DB   JSR getpnt
E3CC C9 02      CMP #$2
E3CE D0 05      BNE LE3D5
E3D0          LE3D0:
E3D0 A9 0D      LDA #$D
E3D2 20 4A D7   JSR putbyt
E3D5          LE3D5:
E3D5 20 C0 DB   JSR getpnt
E3D8 C9 02      CMP #$2
E3DA D0 15      BNE LE3F1
E3DC          LE3DC:
E3DC 20 E9 D6   JSR dbl15_
E3DF A6 15      LDX lindx
E3E1 B5 59      LDA recl,X
E3E3 D0 02      BNE LE3E7
E3E5          LE3E5:
E3E5 D6 61      DEC rech,X
E3E7          LE3E7:
E3E7 D6 59      DEC recl,X
E3E9 20 E5 E6   JSR getlnk
E3EC 20 06 FF   JSR frets
E3EF A9 00      LDA #$0
E3F1          LE3F1:
E3F1 38         SEC
E3F2 E9 01      SBC #$1
E3F4 48         PHA
E3F5 A9 00      LDA #$0
E3F7 20 A0 DB   JSR setpnt
E3FA 20 4A D7   JSR putbyt
E3FD 68         PLA
E3FE 20 4A D7   JSR putbyt
E401 20 17 D8   JSR writbuf
E404 20 89 DC   JSR watjob
E407 4C E9 D6   JMP dbl15_
E40A          LE40A:
E40A A6 15      LDX lindx
E40C 8E 72 43   STX wlindx
E40F A5 16      LDA sa
E411 48         PHA
E412 BD 5F 43   LDA dsec,X
E415 85 14      STA sector
E417 BD 67 43   LDA dind,X
E41A 8D 96 43   STA index
E41D B5 9A      LDA filtyp,X
E41F 29 01      AND #$1
E421 85 12      STA drvnum
E423 AD CA 10   LDA dirtrack
E426 85 13      STA track
E428 20 BB E8   JSR getact
E42B 48         PHA
E42C 85 AB      STA jobnum
E42E 20 36 DB   JSR drtrd
E431 A0 00      LDY #$0
E433 BD DE DB   LDA bufind,X
E436 85 1A      STA r1
E438 AD 96 43   LDA index
E43B 85 19      STA r0
E43D B1 19      LDA (r0),Y
E43F 29 20      AND #$20
E441 F0 43      BEQ LE486
E443          LE443:
E443 20 73 D8   JSR typfil
E446 C9 04      CMP #$4
E448 F0 44      BEQ LE48E
E44A          LE44A:
E44A B1 19      LDA (r0),Y
E44C 29 8F      AND #$8F
E44E 91 19      STA (r0),Y
E450 C8         INY
E451 B1 19      LDA (r0),Y
E453 85 13      STA track
E455 84 06      STY t2
E457 A0 1B      LDY #$1B
E459 B1 19      LDA (r0),Y
E45B 48         PHA
E45C 88         DEY
E45D B1 19      LDA (r0),Y
E45F D0 0A      BNE LE46B
E461          LE461:
E461 85 13      STA track
E463 68         PLA
E464 85 14      STA sector
E466 A9 67      LDA #$67
E468 20 30 FF   JSR cmder2
E46B          LE46B:
E46B 48         PHA
E46C A9 00      LDA #$0
E46E 91 19      STA (r0),Y
E470 C8         INY
E471 91 19      STA (r0),Y
E473 68         PLA
E474 A4 06      LDY t2
E476 91 19      STA (r0),Y
E478 C8         INY
E479 B1 19      LDA (r0),Y
E47B 85 14      STA sector
E47D 68         PLA
E47E 91 19      STA (r0),Y
E480 20 E3 CE   JSR delfil
E483 4C 8E E4   JMP LE48E
E486          LE486:
E486 B1 19      LDA (r0),Y
E488 29 0F      AND #$F
E48A 09 80      ORA #$80
E48C 91 19      STA (r0),Y
E48E          LE48E:
E48E AE 72 43   LDX wlindx
E491 A0 1C      LDY #$1C
E493 B5 59      LDA recl,X
E495 91 19      STA (r0),Y
E497 C8         INY
E498 B5 61      LDA rech,X
E49A 91 19      STA (r0),Y
E49C 68         PLA
E49D AA         TAX
E49E A9 90      LDA #$90
E4A0 05 12      ORA drvnum
E4A2 20 80 DC   JSR doit
E4A5 68         PLA
E4A6 85 16      STA sa
E4A8 4C 56 D8   JMP fndwch
E4AB          opnrch?:
E4AB A9 02      LDA #$2
E4AD 20 30 D9   JSR getrch
E4B0 20 34 E5   JSR LE534
E4B3 A5 CF      LDA type
E4B5 48         PHA
E4B6 0A         ASL A
E4B7 05 12      ORA drvnum
E4B9 95 9A      STA filtyp,X
E4BB 20 EF D7   JSR strrd_strdbl
E4BE A6 15      LDX lindx
E4C0 A5 13      LDA track
E4C2 D0 04      BNE LE4C8
E4C4          LE4C4:
E4C4 A5 14      LDA sector
E4C6 95 C7      STA lstchr,X
E4C8          LE4C8:
E4C8 68         PLA
E4C9 C9 04      CMP #$4
E4CB D0 5B      BNE LE528
E4CD          LE4CD:
E4CD A4 16      LDY sa
E4CF B9 AC 00   LDA lintab,Y
E4D2 09 40      ORA #$40
E4D4 99 AC 00   STA lintab,Y
E4D7 AD 4D 43   LDA rec
E4DA 95 71      STA rs,X
E4DC 20 00 FF   JSR getbuf
E4DF 10 03      BPL LE4E4
E4E1          LE4E1:
E4E1 4C 5C D9   JMP LD95C
E4E4          LE4E4:
E4E4 A6 15      LDX lindx
E4E6 95 79      STA ss,X
E4E8 48         PHA
E4E9 20 B4 FA   JSR getnsides_min1
E4EC F0 17      BEQ LE505
E4EE          LE4EE:
E4EE 68         PLA
E4EF AC 4E 43   LDY trkss
E4F2 84 13      STY track
E4F4 AC 4F 43   LDY secss
E4F7 84 14      STY sector
E4F9 20 1B FF   JSR sethdra
E4FC 20 4E E7   JSR rdss
E4FF 20 89 DC   JSR watjob
E502 4C 17 E5   JMP LE517
E505          LE505:
E505 68         PLA
E506 AD 4E 43   LDA trkss
E509 9D E0 10   STA L10E0,X
E50C AD 4F 43   LDA secss
E50F 9D D8 10   STA L10D8,X
E512 A9 FF      LDA #$FF
E514 9D D0 10   STA L10D0,X
E517          LE517:
E517 A6 15      LDX lindx
E519 A9 02      LDA #$2
E51B 95 69      STA nr,X
E51D A9 00      LDA #$0
E51F 20 A0 DB   JSR setpnt
E522 20 62 EA   JSR LEA62
E525 4C 17 E7   JMP LE717
E528          LE528:
E528 20 A4 D8   JSR rdbyt
E52B A6 15      LDX lindx
E52D 95 BF      STA chndat,X
E52F A9 88      LDA #$88
E531 95 A2      STA chnrdy,X
E533 60         RTS
E534          LE534:
E534 A6 15      LDX lindx
E536 A5 12      LDA drvnum
E538 B4 49      LDY buf0,X
E53A 99 50 43   STA lstjob,Y
E53D B4 51      LDY buf1,X
E53F 99 50 43   STA lstjob,Y
E542 99 03 10   STA jobs,Y
E545 B5 49      LDA buf0,X
E547 0A         ASL A
E548 A8         TAY
E549 A9 02      LDA #$2
E54B 99 29 00   STA buftab_0,Y
E54E B5 51      LDA buf1,X
E550 09 80      ORA #$80
E552 95 51      STA buf1,X
E554 0A         ASL A
E555 A8         TAY
E556 A9 02      LDA #$2
E558 99 29 00   STA buftab_0,Y
E55B A9 00      LDA #$0
E55D 95 59      STA recl,X
E55F 95 61      STA rech,X
E561 A9 00      LDA #$0
E563 95 C7      STA lstchr,X
E565 60         RTS
E566          opnwch:
E566 20 0F FF   JSR LFF0F
E569 A9 02      LDA #$2
E56B 20 2D D9   JSR getwch
E56E 20 AE DD   JSR sethdr_j
E571 20 34 E5   JSR LE534
E574 A6 15      LDX lindx
E576 A5 CF      LDA type
E578 48         PHA
E579 0A         ASL A
E57A 05 12      ORA drvnum
E57C 95 9A      STA filtyp,X
E57E 68         PLA
E57F C9 04      CMP #$4
E581 F0 05      BEQ LE588
E583          LE583:
E583 A9 01      LDA #$1
E585 95 A2      STA chnrdy,X
E587 60         RTS
E588          LE588:
E588 A4 16      LDY sa
E58A B9 AC 00   LDA lintab,Y
E58D 29 3F      AND #$3F
E58F 09 40      ORA #$40
E591 99 AC 00   STA lintab,Y
E594 AD 4D 43   LDA rec
E597 95 71      STA rs,X
E599 20 00 FF   JSR getbuf
E59C 10 03      BPL LE5A1
E59E          LE59E:
E59E 4C 5C D9   JMP LD95C
E5A1          LE5A1:
E5A1 A6 15      LDX lindx
E5A3 95 79      STA ss,X
E5A5 20 9C E7   JSR LE79C
E5A8 20 0C FF   JSR LFF0C
E5AB A5 13      LDA track
E5AD 8D 4E 43   STA trkss
E5B0 A5 14      LDA sector
E5B2 8D 4F 43   STA secss
E5B5 A6 15      LDX lindx
E5B7 B5 79      LDA ss,X
E5B9 20 1B FF   JSR sethdra
E5BC A9 00      LDA #$0
E5BE 20 C4 E7   JSR LE7C4
E5C1 A9 00      LDA #$0
E5C3 20 67 E6   JSR LE667
E5C6 A9 11      LDA #$11
E5C8 20 67 E6   JSR LE667
E5CB A9 00      LDA #$0
E5CD 20 67 E6   JSR LE667
E5D0 AD 4D 43   LDA rec
E5D3 20 67 E6   JSR LE667
E5D6 A5 13      LDA track
E5D8 20 67 E6   JSR LE667
E5DB A5 14      LDA sector
E5DD 20 67 E6   JSR LE667
E5E0 A9 10      LDA #$10
E5E2 20 C4 E7   JSR LE7C4
E5E5 20 17 E7   JSR LE717
E5E8 A5 13      LDA track
E5EA 20 67 E6   JSR LE667
E5ED A5 14      LDA sector
E5EF 20 67 E6   JSR LE667
E5F2 20 47 E7   JSR LE747
E5F5 20 89 DC   JSR watjob
E5F8 20 B4 FA   JSR getnsides_min1
E5FB D0 03      BNE LE600
E5FD          LE5FD:
E5FD 20 20 E6   JSR LE620
E600          LE600:
E600 A9 02      LDA #$2
E602 20 A0 DB   JSR setpnt
E605 A6 15      LDX lindx
E607 38         SEC
E608 A9 00      LDA #$0
E60A F5 71      SBC rs,X
E60C 95 69      STA nr,X
E60E 20 03 EC   JSR nulbuf
E611 20 F2 E6   JSR LE6F2
E614 20 39 E7   JSR wrtout
E617 20 89 DC   JSR watjob
E61A 20 74 F7   JSR mapout
E61D 4C 17 E5   JMP LE517
E620          LE620:
E620 A6 15      LDX lindx
E622 B5 79      LDA ss,X
E624 20 9C E7   JSR LE79C
E627 20 C4 E7   JSR LE7C4
E62A AD 4E 43   LDA trkss
E62D 20 67 E6   JSR LE667
E630 AD 4F 43   LDA secss
E633 20 67 E6   JSR LE667
E636 A9 FE      LDA #$FE
E638 20 67 E6   JSR LE667
E63B AD 4E 43   LDA trkss
E63E 20 67 E6   JSR LE667
E641 AD 4F 43   LDA secss
E644 20 67 E6   JSR LE667
E647 20 0C FF   JSR LFF0C
E64A A6 15      LDX lindx
E64C A5 13      LDA track
E64E 9D E0 10   STA L10E0,X
E651 8D 4E 43   STA trkss
E654 A5 14      LDA sector
E656 9D D8 10   STA L10D8,X
E659 8D 4F 43   STA secss
E65C A9 FF      LDA #$FF
E65E 9D D0 10   STA L10D0,X
E661 20 CD FA   JSR LFACD
E664 4C 17 E7   JMP LE717
E667          LE667:
E667 48         PHA
E668 A6 15      LDX lindx
E66A B5 79      LDA ss,X
E66C 4C 56 D7   JMP putb1
E66F          LE66F:
E66F 90 06      BCC LE677
E671          setflg:
E671 A6 15      LDX lindx
E673 15 9A      ORA filtyp,X
E675 D0 06      BNE LE67D
E677          LE677:
E677 A6 15      LDX lindx
E679 49 FF      EOR #$FF
E67B 35 9A      AND filtyp,X
E67D          LE67D:
E67D 95 9A      STA filtyp,X
E67F 60         RTS
E680          LE680:
E680 A6 15      LDX lindx
E682 35 9A      AND filtyp,X
E684 60         RTS
E685          LE685:
E685 20 BB E8   JSR getact
E688 AA         TAX
E689 BD 50 43   LDA lstjob,X
E68C 29 F0      AND #$F0
E68E C9 90      CMP #$90
E690 60         RTS
E691          tstchn:
E691 A2 00      LDX #$0
E693          LE693:
E693 86 06      STX t2
E695 B5 AC      LDA lintab,X
E697 C9 FF      CMP #$FF
E699 D0 08      BNE LE6A3
E69B          LE69B:
E69B A6 06      LDX t2
E69D E8         INX
E69E E0 10      CPX #$10
E6A0 90 F1      BCC LE693
E6A2          LE6A2:
E6A2 60         RTS
E6A3          LE6A3:
E6A3 86 06      STX t2
E6A5 29 3F      AND #$3F
E6A7 A8         TAY
E6A8 B9 9A 00   LDA filtyp,Y
E6AB 29 01      AND #$1
E6AD 85 05      STA t1
E6AF AE 48 43   LDX entfnd
E6B2 B5 90      LDA fildrv,X
E6B4 29 01      AND #$1
E6B6 C5 05      CMP t1
E6B8 D0 E1      BNE LE69B
E6BA          LE6BA:
E6BA B9 5F 43   LDA dsec,Y
E6BD D5 86      CMP entsec,X
E6BF D0 DA      BNE LE69B
E6C1          LE6C1:
E6C1 B9 67 43   LDA dind,Y
E6C4 D5 8B      CMP entind,X
E6C6 D0 D3      BNE LE69B
E6C8          LE6C8:
E6C8 18         CLC
E6C9 60         RTS
E6CA          scrub:
E6CA 20 C6 E8   JSR LE8C6
E6CD 50 06      BVC LE6D5
E6CF          LE6CF:
E6CF 20 39 E7   JSR wrtout
E6D2 20 89 DC   JSR watjob
E6D5          LE6D5:
E6D5 60         RTS
E6D6          LE6D6:
E6D6 20 04 E7   JSR set00
E6D9 A5 13      LDA track
E6DB 91 27      STA (dirbuf),Y
E6DD C8         INY
E6DE A5 14      LDA sector
E6E0 91 27      STA (dirbuf),Y
E6E2 4C 14 EA   JMP LEA14
E6E5          getlnk:
E6E5 20 04 E7   JSR set00
E6E8 B1 27      LDA (dirbuf),Y
E6EA 85 13      STA track
E6EC C8         INY
E6ED B1 27      LDA (dirbuf),Y
E6EF 85 14      STA sector
E6F1 60         RTS
E6F2          LE6F2:
E6F2 20 04 E7   JSR set00
E6F5 A9 00      LDA #$0
E6F7 91 27      STA (dirbuf),Y
E6F9 C8         INY
E6FA A6 15      LDX lindx
E6FC B5 69      LDA nr,X
E6FE AA         TAX
E6FF CA         DEX
E700 8A         TXA
E701 91 27      STA (dirbuf),Y
E703 60         RTS
E704          set00:
E704 20 BB E8   JSR getact
E707 0A         ASL A
E708 AA         TAX
E709 B5 2A      LDA buftab_0+1,X
E70B 85 28      STA dirbuf+1
E70D A9 00      LDA #$0
E70F 85 27      STA dirbuf
E711 A0 00      LDY #$0
E713 60         RTS
E714          curblk:
E714 20 3B D8   JSR fndrch
E717          LE717:
E717 20 BB E8   JSR getact
E71A 85 AB      STA jobnum
E71C 0A         ASL A
E71D 0A         ASL A
E71E 0A         ASL A
E71F A8         TAY
E720 B9 23 10   LDA hdrs_track,Y
E723 85 13      STA track
E725 B9 24 10   LDA hdrs_sector,Y
E728 85 14      STA sector
E72A 60         RTS
E72B          LE72B:
E72B A9 90      LDA #$90
E72D 8D 3E 43   STA cmd
E730 D0 28      BNE LE75A
E732          rdab:
E732 A9 80      LDA #$80
E734 8D 3E 43   STA cmd
E737 D0 21      BNE LE75A
E739          wrtout:
E739 A9 90      LDA #$90
E73B 8D 3E 43   STA cmd
E73E D0 26      BNE LE766
E740          LE740:
E740 A9 80      LDA #$80
E742 8D 3E 43   STA cmd
E745 D0 1F      BNE LE766
E747          LE747:
E747 A9 90      LDA #$90
E749 8D 3E 43   STA cmd
E74C D0 02      BNE LE750
E74E          rdss:
E74E A9 80      LDA #$80
E750          LE750:
E750 8D 3E 43   STA cmd
E753 A6 15      LDX lindx
E755 B5 79      LDA ss,X
E757 AA         TAX
E758 10 13      BPL LE76D
E75A          LE75A:
E75A 20 AE DD   JSR sethdr_j
E75D 20 BB E8   JSR getact
E760 AA         TAX
E761 A5 12      LDA drvnum
E763 9D 50 43   STA lstjob,X
E766          LE766:
E766 20 24 EA   JSR LEA24
E769 20 BB E8   JSR getact
E76C AA         TAX
E76D          LE76D:
E76D 4C ED DB   JMP setljb
E770          LE770:
E770 A9 00      LDA #$0
E772 20 A0 DB   JSR setpnt
E775 20 85 D8   JSR getbyt
E778 85 13      STA track
E77A 20 85 D8   JSR getbyt
E77D 85 14      STA sector
E77F 60         RTS
E780          LE780:
E780 48         PHA
E781 A9 00      LDA #$0
E783 85 04      STA t0_temp
E785 85 06      STA t2
E787 B9 DE DB   LDA bufind,Y
E78A 85 05      STA t1
E78C BD DE DB   LDA bufind,X
E78F 85 07      STA t3
E791 68         PLA
E792 A8         TAY
E793 88         DEY
E794          LE794:
E794 B1 04      LDA (t0_temp),Y
E796 91 06      STA (t2),Y
E798 88         DEY
E799 10 F9      BPL LE794
E79B          LE79B:
E79B 60         RTS
E79C          LE79C:
E79C A8         TAY
E79D B9 DE DB   LDA bufind,Y
E7A0 85 05      STA t1
E7A2 A9 00      LDA #$0
E7A4 85 04      STA t0_temp
E7A6 A8         TAY
E7A7          LE7A7:
E7A7 91 04      STA (t0_temp),Y
E7A9 C8         INY
E7AA D0 FB      BNE LE7A7
E7AC          LE7AC:
E7AC 60         RTS
E7AD          LE7AD:
E7AD A9 00      LDA #$0
E7AF 20 B7 E7   JSR LE7B7
E7B2 A0 02      LDY #$2
E7B4 B1 27      LDA (dirbuf),Y
E7B6 60         RTS
E7B7          LE7B7:
E7B7 85 27      STA dirbuf
E7B9 A6 15      LDX lindx
E7BB B5 79      LDA ss,X
E7BD AA         TAX
E7BE BD DE DB   LDA bufind,X
E7C1 85 28      STA dirbuf+1
E7C3 60         RTS
E7C4          LE7C4:
E7C4 48         PHA
E7C5 20 B7 E7   JSR LE7B7
E7C8 48         PHA
E7C9 8A         TXA
E7CA 0A         ASL A
E7CB AA         TAX
E7CC 68         PLA
E7CD 95 2A      STA buftab_0+1,X
E7CF 68         PLA
E7D0 95 29      STA buftab_0,X
E7D2 60         RTS
E7D3          LE7D3:
E7D3 20 7D E8   JSR LE87D
E7D6 30 0E      BMI LE7E6
E7D8          LE7D8:
E7D8 50 13      BVC LE7ED
E7DA          LE7DA:
E7DA A6 15      LDX lindx
E7DC B5 79      LDA ss,X
E7DE 20 F6 E7   JSR LE7F6
E7E1 20 7D E8   JSR LE87D
E7E4 10 07      BPL LE7ED
E7E6          LE7E6:
E7E6 20 D7 EA   JSR ssend?
E7E9 2C 9B FF   BIT LFF9B
E7EC 60         RTS
E7ED          LE7ED:
E7ED A5 84      LDA ssind
E7EF 20 C4 E7   JSR LE7C4
E7F2 2C 9A FF   BIT LFF9A
E7F5 60         RTS
E7F6          LE7F6:
E7F6 85 AB      STA jobnum
E7F8 A9 80      LDA #$80
E7FA D0 04      BNE LE800
E7FC          LE7FC:
E7FC 85 AB      STA jobnum
E7FE A9 90      LDA #$90
E800          LE800:
E800 48         PHA
E801 B5 9A      LDA filtyp,X
E803 29 01      AND #$1
E805 85 12      STA drvnum
E807 68         PLA
E808 05 12      ORA drvnum
E80A 8D 3E 43   STA cmd
E80D B1 27      LDA (dirbuf),Y
E80F 85 13      STA track
E811 C8         INY
E812 B1 27      LDA (dirbuf),Y
E814 85 14      STA sector
E816 A5 AB      LDA jobnum
E818 20 1B FF   JSR sethdra
E81B A6 AB      LDX jobnum
E81D 4C 83 DC   JMP doit2
E820          LE820:
E820 A6 15      LDX lindx
E822 B5 79      LDA ss,X
E824 4C C3 DB   JMP setdir
E827          LE827:
E827 A9 78      LDA #$78
E829 20 37 E8   JSR LE837
E82C          LE82C:
E82C CA         DEX
E82D 10 F8      BPL LE827
E82F          LE82F:
E82F A5 07      LDA t3
E831 4A         LSR A
E832 20 37 E8   JSR LE837
E835 A5 08      LDA tmp_fdc
E837          LE837:
E837 18         CLC
E838 65 05      ADC t1
E83A 85 05      STA t1
E83C 90 02      BCC LE840
E83E          LE83E:
E83E E6 06      INC t2
E840          LE840:
E840 60         RTS
E841          LE841:
E841 20 C8 D6   JSR zerres
E844 20 6D E8   JSR LE86D
E847 A4 1C      LDY r3
E849          LE849:
E849 88         DEY
E84A 30 0A      BMI LE856
E84C          LE84C:
E84C A2 02      LDX #$2
E84E A9 D6      LDA #$D6
E850 20 76 E8   JSR LE876
E853 4C 49 E8   JMP LE849
E856          LE856:
E856 A4 08      LDY tmp_fdc
E858          LE858:
E858 88         DEY
E859 30 0A      BMI LE865
E85B          LE85B:
E85B A2 00      LDX #$0
E85D A9 79      LDA #$79
E85F 20 76 E8   JSR LE876
E862 4C 58 E8   JMP LE858
E865          LE865:
E865 A5 07      LDA t3
E867 4A         LSR A
E868 A2 00      LDX #$0
E86A 4C 76 E8   JMP LE876
E86D          LE86D:
E86D A2 00      LDX #$0
E86F 86 23      STX accum+1
E871 86 24      STX accum+2
E873 86 25      STX accum+3
E875 60         RTS
E876          LE876:
E876 86 24      STX accum+2
E878 85 23      STA accum+1
E87A 4C DC D6   JMP addres
E87D          LE87D:
E87D 20 B4 FA   JSR getnsides_min1
E880 D0 0C      BNE LE88E
E882          LE882:
E882 AD CF 10   LDA L10CF
E885 20 0E FB   JSR LFB0E
E888 F0 04      BEQ LE88E
E88A          LE88A:
E88A 2C 9D FF   BIT LFF9D
E88D 60         RTS
E88E          LE88E:
E88E 20 AD E7   JSR LE7AD
E891 C5 83      CMP ssnum
E893 D0 0E      BNE LE8A3
E895          LE895:
E895 A4 84      LDY ssind
E897 B1 27      LDA (dirbuf),Y
E899 F0 04      BEQ LE89F
E89B          LE89B:
E89B 2C 9A FF   BIT LFF9A
E89E 60         RTS
E89F          LE89F:
E89F 2C 9C FF   BIT LFF9C
E8A2 60         RTS
E8A3          LE8A3:
E8A3 A5 83      LDA ssnum
E8A5 C9 06      CMP #$6
E8A7 B0 0A      BCS LE8B3
E8A9          LE8A9:
E8A9 0A         ASL A
E8AA A8         TAY
E8AB A9 04      LDA #$4
E8AD 85 27      STA dirbuf
E8AF B1 27      LDA (dirbuf),Y
E8B1 D0 04      BNE LE8B7
E8B3          LE8B3:
E8B3 2C 9D FF   BIT LFF9D
E8B6 60         RTS
E8B7          LE8B7:
E8B7 2C 9B FF   BIT LFF9B
E8BA 60         RTS
E8BB          getact:
E8BB A6 15      LDX lindx
E8BD B5 49      LDA buf0,X
E8BF 10 02      BPL LE8C3
E8C1          LE8C1:
E8C1 B5 51      LDA buf1,X
E8C3          LE8C3:
E8C3 29 BF      AND #$BF
E8C5 60         RTS
E8C6          LE8C6:
E8C6 A6 15      LDX lindx
E8C8 8E 4C 43   STX L434C
E8CB B5 49      LDA buf0,X
E8CD 10 09      BPL LE8D8
E8CF          LE8CF:
E8CF 8A         TXA
E8D0 18         CLC
E8D1 69 08      ADC #$8
E8D3 8D 4C 43   STA L434C
E8D6 B5 51      LDA buf1,X
E8D8          LE8D8:
E8D8 85 05      STA t1
E8DA 29 1F      AND #$1F
E8DC 24 05      BIT t1
E8DE 60         RTS
E8DF          LE8DF:
E8DF A9 20      LDA #$20
E8E1 20 77 E6   JSR LE677
E8E4 A9 80      LDA #$80
E8E6 20 80 E6   JSR LE680
E8E9 D0 41      BNE LE92C
E8EB          LE8EB:
E8EB A6 15      LDX lindx
E8ED F6 59      INC recl,X
E8EF D0 02      BNE LE8F3
E8F1          LE8F1:
E8F1 F6 61      INC rech,X
E8F3          LE8F3:
E8F3 A6 15      LDX lindx
E8F5 B5 69      LDA nr,X
E8F7 F0 2E      BEQ LE927
E8F9          LE8F9:
E8F9 20 C0 DB   JSR getpnt
E8FC A6 15      LDX lindx
E8FE D5 69      CMP nr,X
E900 90 03      BCC LE905
E902          LE902:
E902 20 4B E9   JSR LE94B
E905          LE905:
E905 A6 15      LDX lindx
E907 B5 69      LDA nr,X
E909 20 A0 DB   JSR setpnt
E90C A1 29      LDA (buftab_0,X)
E90E 85 18      STA data
E910 A9 20      LDA #$20
E912 20 77 E6   JSR LE677
E915 20 25 EC   JSR addnr
E918          LE918:
E918 48         PHA
E919 90 28      BCC LE943
E91B          LE91B:
E91B A9 00      LDA #$0
E91D 20 CE DB   JSR drdbyt
E920 D0 21      BNE LE943
E922          LE922:
E922 68         PLA
E923 C9 02      CMP #$2
E925 F0 12      BEQ LE939
E927          LE927:
E927 A9 80      LDA #$80
E929 20 71 E6   JSR setflg
E92C          LE92C:
E92C 20 7D D8   JSR getpre
E92F B5 29      LDA buftab_0,X
E931 99 C7 00   STA lstchr,Y
E934 A9 0D      LDA #$D
E936 85 18      STA data
E938 60         RTS
E939          LE939:
E939 20 44 E9   JSR LE944
E93C A6 15      LDX lindx
E93E A9 00      LDA #$0
E940 95 69      STA nr,X
E942 60         RTS
E943          LE943:
E943 68         PLA
E944          LE944:
E944 A6 15      LDX lindx
E946 95 69      STA nr,X
E948 4C 7C EA   JMP LEA7C
E94B          LE94B:
E94B 20 21 D9   JSR setdrn
E94E 20 70 E7   JSR LE770
E951 20 C6 E8   JSR LE8C6
E954 50 16      BVC LE96C
E956          LE956:
E956 20 39 E7   JSR wrtout
E959 20 E9 D6   JSR dbl15_
E95C A9 02      LDA #$2
E95E 20 A0 DB   JSR setpnt
E961 20 85 E6   JSR LE685
E964 D0 24      BNE LE98A
E966          LE966:
E966 20 32 E7   JSR rdab
E969 4C 89 DC   JMP watjob
E96C          LE96C:
E96C 20 E9 D6   JSR dbl15_
E96F 20 85 E6   JSR LE685
E972 D0 06      BNE LE97A
E974          LE974:
E974 20 32 E7   JSR rdab
E977 20 89 DC   JSR watjob
E97A          LE97A:
E97A 20 70 E7   JSR LE770
E97D A5 13      LDA track
E97F F0 09      BEQ LE98A
E981          LE981:
E981 20 E9 D6   JSR dbl15_
E984 20 32 E7   JSR rdab
E987 20 E9 D6   JSR dbl15_
E98A          LE98A:
E98A 60         RTS
E98B          LE98B:
E98B 20 14 EA   JSR LEA14
E98E 20 BB E8   JSR getact
E991 0A         ASL A
E992 AA         TAX
E993 A5 18      LDA data
E995 81 29      STA (buftab_0,X)
E997 B4 29      LDY buftab_0,X
E999 C8         INY
E99A D0 09      BNE LE9A5
E99C          LE99C:
E99C A4 15      LDY lindx
E99E B9 69 00   LDA nr,Y
E9A1 F0 0A      BEQ LE9AD
E9A3          LE9A3:
E9A3 A0 02      LDY #$2
E9A5          LE9A5:
E9A5 98         TYA
E9A6 A4 15      LDY lindx
E9A8 D9 69 00   CMP nr,Y
E9AB D0 05      BNE LE9B2
E9AD          LE9AD:
E9AD A9 20      LDA #$20
E9AF 4C 71 E6   JMP setflg
E9B2          LE9B2:
E9B2 F6 29      INC buftab_0,X
E9B4 D0 03      BNE LE9B9
E9B6          LE9B6:
E9B6 20 4B E9   JSR LE94B
E9B9          LE9B9:
E9B9 60         RTS
E9BA          wrtrel:
E9BA A9 A0      LDA #$A0
E9BC 20 80 E6   JSR LE680
E9BF D0 27      BNE LE9E8
E9C1          LE9C1:
E9C1 A5 18      LDA data
E9C3 20 8B E9   JSR LE98B
E9C6 A5 AA      LDA eoiflg
E9C8 F0 0D      BEQ LE9D7
E9CA          LE9CA:
E9CA 60         RTS
E9CB          LE9CB:
E9CB A9 20      LDA #$20
E9CD 20 80 E6   JSR LE680
E9D0 F0 05      BEQ LE9D7
E9D2          LE9D2:
E9D2 A9 51      LDA #$51
E9D4 8D 6F 43   STA wbam?
E9D7          LE9D7:
E9D7 20 02 EA   JSR LEA02
E9DA 20 62 EA   JSR LEA62
E9DD AD 6F 43   LDA wbam?
E9E0 F0 03      BEQ LE9E5
E9E2          LE9E2:
E9E2 4C 2D FF   JMP cmderr
E9E5          LE9E5:
E9E5 4C 45 F1   JMP okerr
E9E8          LE9E8:
E9E8 29 80      AND #$80
E9EA D0 05      BNE LE9F1
E9EC          LE9EC:
E9EC A5 AA      LDA eoiflg
E9EE F0 DB      BEQ LE9CB
E9F0          LE9F0:
E9F0 60         RTS
E9F1          LE9F1:
E9F1 A5 18      LDA data
E9F3 48         PHA
E9F4 20 3D EC   JSR LEC3D
E9F7 68         PLA
E9F8 85 18      STA data
E9FA A9 80      LDA #$80
E9FC 20 77 E6   JSR LE677
E9FF 4C C1 E9   JMP LE9C1
EA02          LEA02:
EA02 A9 20      LDA #$20
EA04 20 80 E6   JSR LE680
EA07 D0 0A      BNE LEA13
EA09          LEA09:
EA09 A9 00      LDA #$0
EA0B 85 18      STA data
EA0D 20 8B E9   JSR LE98B
EA10 4C 02 EA   JMP LEA02
EA13          LEA13:
EA13 60         RTS
EA14          LEA14:
EA14 A9 40      LDA #$40
EA16 20 71 E6   JSR setflg
EA19 20 C6 E8   JSR LE8C6
EA1C 09 40      ORA #$40
EA1E AE 4C 43   LDX L434C
EA21 95 49      STA buf0,X
EA23 60         RTS
EA24          LEA24:
EA24 20 C6 E8   JSR LE8C6
EA27 29 BF      AND #$BF
EA29 AE 4C 43   LDX L434C
EA2C 95 49      STA buf0,X
EA2E 60         RTS
EA2F          LEA2F:
EA2F A9 80      LDA #$80
EA31 20 80 E6   JSR LE680
EA34 D0 37      BNE LEA6D
EA36          LEA36:
EA36 20 7D D8   JSR getpre
EA39 B5 29      LDA buftab_0,X
EA3B D9 C7 00   CMP lstchr,Y
EA3E F0 22      BEQ LEA62
EA40          LEA40:
EA40 F6 29      INC buftab_0,X
EA42 D0 06      BNE LEA4A
EA44          LEA44:
EA44 20 4B E9   JSR LE94B
EA47          LEA47:
EA47 20 7D D8   JSR getpre
EA4A          LEA4A:
EA4A A1 29      LDA (buftab_0,X)
EA4C          LEA4C:
EA4C 99 BF 00   STA chndat,Y
EA4F A9 89      LDA #$89
EA51 99 A2 00   STA chnrdy,Y
EA54 B5 29      LDA buftab_0,X
EA56 D9 C7 00   CMP lstchr,Y
EA59 F0 01      BEQ LEA5C
EA5B          LEA5B:
EA5B 60         RTS
EA5C          LEA5C:
EA5C A9 81      LDA #$81
EA5E 99 A2 00   STA chnrdy,Y
EA61 60         RTS
EA62          LEA62:
EA62 20 DF E8   JSR LE8DF
EA65 20 7D D8   JSR getpre
EA68 A5 18      LDA data
EA6A 4C 4C EA   JMP LEA4C
EA6D          LEA6D:
EA6D A6 15      LDX lindx
EA6F A9 0D      LDA #$D
EA71 95 BF      STA chndat,X
EA73 A9 81      LDA #$81
EA75 95 A2      STA chnrdy,X
EA77 A9 50      LDA #$50
EA79 20 2D FF   JSR cmderr
EA7C          LEA7C:
EA7C A6 15      LDX lindx
EA7E B5 69      LDA nr,X
EA80 85 1A      STA r1
EA82 C6 1A      DEC r1
EA84 C9 02      CMP #$2
EA86 D0 04      BNE LEA8C
EA88          LEA88:
EA88 A9 FF      LDA #$FF
EA8A 85 1A      STA r1
EA8C          LEA8C:
EA8C B5 71      LDA rs,X
EA8E 85 1B      STA r2
EA90 20 C0 DB   JSR getpnt
EA93 A6 15      LDX lindx
EA95 C5 1A      CMP r1
EA97 90 18      BCC LEAB1
EA99          LEA99:
EA99 F0 16      BEQ LEAB1
EA9B          LEA9B:
EA9B 20 E9 D6   JSR dbl15_
EA9E 20 BE EA   JSR LEABE
EAA1 90 07      BCC LEAAA
EAA3          LEAA3:
EAA3 A6 15      LDX lindx
EAA5 95 C7      STA lstchr,X
EAA7 4C E9 D6   JMP dbl15_
EAAA          LEAAA:
EAAA 20 E9 D6   JSR dbl15_
EAAD A9 FF      LDA #$FF
EAAF 85 1A      STA r1
EAB1          LEAB1:
EAB1 20 BE EA   JSR LEABE
EAB4 B0 03      BCS LEAB9
EAB6          LEAB6:
EAB6 20 C0 DB   JSR getpnt
EAB9          LEAB9:
EAB9 A6 15      LDX lindx
EABB 95 C7      STA lstchr,X
EABD 60         RTS
EABE          LEABE:
EABE 20 04 E7   JSR set00
EAC1 A4 1A      LDY r1
EAC3          LEAC3:
EAC3 B1 27      LDA (dirbuf),Y
EAC5 D0 0D      BNE LEAD4
EAC7          LEAC7:
EAC7 88         DEY
EAC8 C0 02      CPY #$2
EACA 90 04      BCC LEAD0
EACC          LEACC:
EACC C6 1B      DEC r2
EACE D0 F3      BNE LEAC3
EAD0          LEAD0:
EAD0 C6 1B      DEC r2
EAD2 18         CLC
EAD3 60         RTS
EAD4          LEAD4:
EAD4 98         TYA
EAD5 38         SEC
EAD6 60         RTS
EAD7          ssend?:
EAD7 20 B4 FA   JSR getnsides_min1
EADA D0 03      BNE LEADF
EADC          LEADC:
EADC 20 F7 FA   JSR LFAF7
EADF          LEADF:
EADF 20 AD E7   JSR LE7AD
EAE2 85 83      STA ssnum
EAE4 A9 04      LDA #$4
EAE6 85 27      STA dirbuf
EAE8 A0 0A      LDY #$A
EAEA D0 04      BNE LEAF0
EAEC          LEAEC:
EAEC 88         DEY
EAED 88         DEY
EAEE 30 26      BMI LEB16
EAF0          LEAF0:
EAF0 B1 27      LDA (dirbuf),Y
EAF2 F0 F8      BEQ LEAEC
EAF4          LEAF4:
EAF4 98         TYA
EAF5 4A         LSR A
EAF6 C5 83      CMP ssnum
EAF8 F0 09      BEQ LEB03
EAFA          LEAFA:
EAFA 85 83      STA ssnum
EAFC A6 15      LDX lindx
EAFE B5 79      LDA ss,X
EB00 20 F6 E7   JSR LE7F6
EB03          LEB03:
EB03 A0 00      LDY #$0
EB05 84 27      STY dirbuf
EB07 B1 27      LDA (dirbuf),Y
EB09 D0 0B      BNE LEB16
EB0B          LEB0B:
EB0B C8         INY
EB0C B1 27      LDA (dirbuf),Y
EB0E A8         TAY
EB0F 88         DEY
EB10 84 84      STY ssind
EB12 98         TYA
EB13 4C C4 E7   JMP LE7C4
EB16          LEB16:
EB16 A9 67      LDA #$67
EB18 20 30 FF   JSR cmder2
EB1B          record:
EB1B 20 18 C9   JSR cmdset
EB1E AD 01 43   LDA cmdbuf+1
EB21 85 16      STA sa
EB23 20 3B D8   JSR fndrch
EB26 90 05      BCC LEB2D
EB28          LEB28:
EB28 A9 70      LDA #$70
EB2A 20 2D FF   JSR cmderr
EB2D          LEB2D:
EB2D A9 A0      LDA #$A0
EB2F 20 77 E6   JSR LE677
EB32 20 73 D8   JSR typfil
EB35 F0 05      BEQ LEB3C
EB37          LEB37:
EB37 A9 64      LDA #$64
EB39 20 2D FF   JSR cmderr
EB3C          LEB3C:
EB3C B5 9A      LDA filtyp,X
EB3E 29 01      AND #$1
EB40 85 12      STA drvnum
EB42 AD 02 43   LDA cmdbuf+2
EB45 95 59      STA recl,X
EB47 AD 03 43   LDA cmdbuf+3
EB4A 95 61      STA rech,X
EB4C A6 15      LDX lindx
EB4E A9 89      LDA #$89
EB50 95 A2      STA chnrdy,X
EB52 AD 04 43   LDA cmdbuf+4
EB55 F0 10      BEQ LEB67
EB57          LEB57:
EB57 38         SEC
EB58 E9 01      SBC #$1
EB5A F0 0B      BEQ LEB67
EB5C          LEB5C:
EB5C D5 71      CMP rs,X
EB5E 90 07      BCC LEB67
EB60          LEB60:
EB60 A9 51      LDA #$51
EB62 8D 6F 43   STA wbam?
EB65 A9 00      LDA #$0
EB67          LEB67:
EB67 85 82      STA recptr
EB69 20 1C D6   JSR fndrel
EB6C 20 D3 E7   JSR LE7D3
EB6F 50 08      BVC LEB79
EB71          LEB71:
EB71 A9 80      LDA #$80
EB73 20 71 E6   JSR setflg
EB76 4C 6D EA   JMP LEA6D
EB79          LEB79:
EB79 20 89 EB   JSR LEB89
EB7C A9 80      LDA #$80
EB7E 20 80 E6   JSR LE680
EB81 F0 03      BEQ LEB86
EB83          LEB83:
EB83 4C 6D EA   JMP LEA6D
EB86          LEB86:
EB86 4C FD C7   JMP endcmd
EB89          LEB89:
EB89 20 B0 EB   JSR posbuf
EB8C A5 85      LDA relptr
EB8E 20 A0 DB   JSR setpnt
EB91 A6 15      LDX lindx
EB93 B5 71      LDA rs,X
EB95 38         SEC
EB96 E5 82      SBC recptr
EB98 B0 03      BCS LEB9D
EB9A          LEB9A:
EB9A 4C 16 EB   JMP LEB16
EB9D          LEB9D:
EB9D 18         CLC
EB9E 65 85      ADC relptr
EBA0 90 03      BCC LEBA5
EBA2          LEBA2:
EBA2 69 01      ADC #$1
EBA4 38         SEC
EBA5          LEBA5:
EBA5 20 18 E9   JSR LE918
EBA8 4C 47 EA   JMP LEA47
EBAB          LEBAB:
EBAB A9 51      LDA #$51
EBAD 20 2D FF   JSR cmderr
EBB0          posbuf:
EBB0 A5 27      LDA dirbuf
EBB2 85 1C      STA r3
EBB4 A5 28      LDA dirbuf+1
EBB6 85 1D      STA r4
EBB8 20 F1 EB   JSR bhere
EBBB F0 22      BEQ LEBDF
EBBD          p10_:
EBBD 20 CA E6   JSR scrub
EBC0 20 E5 E6   JSR getlnk
EBC3 A5 13      LDA track
EBC5 F0 19      BEQ p80
EBC7          LEBC7:
EBC7 20 E9 D6   JSR dbl15_
EBCA 20 F1 EB   JSR bhere
EBCD D0 11      BNE p80
EBCF          LEBCF:
EBCF 20 E5 E6   JSR getlnk
EBD2 A5 13      LDA track
EBD4 F0 09      BEQ LEBDF
EBD6          LEBD6:
EBD6 20 E9 D6   JSR dbl15_
EBD9 20 32 E7   JSR rdab
EBDC 20 E9 D6   JSR dbl15_
EBDF          LEBDF:
EBDF 60         RTS
EBE0          p80:
EBE0 A0 00      LDY #$0
EBE2 B1 1C      LDA (r3),Y
EBE4 85 13      STA track
EBE6 C8         INY
EBE7 B1 1C      LDA (r3),Y
EBE9 85 14      STA sector
EBEB 20 E9 D6   JSR dbl15_
EBEE 4C EF D7   JMP strrd_strdbl
EBF1          bhere:
EBF1 20 17 E7   JSR LE717
EBF4 A0 00      LDY #$0
EBF6 B1 1C      LDA (r3),Y
EBF8 C5 13      CMP track
EBFA F0 01      BEQ LEBFD
EBFC          LEBFC:
EBFC 60         RTS
EBFD          LEBFD:
EBFD C8         INY
EBFE B1 1C      LDA (r3),Y
EC00 C5 14      CMP sector
EC02 60         RTS
EC03          nulbuf:
EC03 20 04 E7   JSR set00
EC06 A0 02      LDY #$2
EC08 A9 00      LDA #$0
EC0A          LEC0A:
EC0A 91 27      STA (dirbuf),Y
EC0C C8         INY
EC0D D0 FB      BNE LEC0A
EC0F          LEC0F:
EC0F 20 25 EC   JSR addnr
EC12          nb20:
EC12 95 69      STA nr,X
EC14 A8         TAY
EC15 A9 FF      LDA #$FF
EC17 91 27      STA (dirbuf),Y
EC19 20 25 EC   JSR addnr
EC1C 90 F4      BCC nb20
EC1E          LEC1E:
EC1E D0 04      BNE LEC24
EC20          LEC20:
EC20 A9 00      LDA #$0
EC22 95 69      STA nr,X
EC24          LEC24:
EC24 60         RTS
EC25          addnr:
EC25 A6 15      LDX lindx
EC27 B5 69      LDA nr,X
EC29 38         SEC
EC2A F0 0D      BEQ an05
EC2C          LEC2C:
EC2C 18         CLC
EC2D 75 71      ADC rs,X
EC2F 90 0B      BCC an10
EC31          LEC31:
EC31 D0 06      BNE an05
EC33          LEC33:
EC33 A9 02      LDA #$2
EC35 2C 99 FF   BIT er00
EC38 60         RTS
EC39          an05:
EC39 69 01      ADC #$1
EC3B 38         SEC
EC3C          an10:
EC3C 60         RTS
EC3D          LEC3D:
EC3D 20 9E ED   JSR posbuf?
EC40 20 1C D6   JSR fndrel
EC43          addr1?:
EC43 20 BA F7   JSR numfre
EC46 A4 15      LDY lindx
EC48 B6 71      LDX rs,Y
EC4A CA         DEX
EC4B 8A         TXA
EC4C 18         CLC
EC4D 65 85      ADC relptr
EC4F 90 0C      BCC LEC5D
EC51          LEC51:
EC51 E6 84      INC ssind
EC53 E6 84      INC ssind
EC55 D0 06      BNE LEC5D
EC57          LEC57:
EC57 E6 83      INC ssnum
EC59 A9 10      LDA #$10
EC5B 85 84      STA ssind
EC5D          LEC5D:
EC5D A5 1A      LDA r1
EC5F 18         CLC
EC60 69 02      ADC #$2
EC62 20 C4 E7   JSR LE7C4
EC65 A5 83      LDA ssnum
EC67 C9 06      CMP #$6
EC69 90 11      BCC LEC7C
EC6B          LEC6B:
EC6B 20 B4 FA   JSR getnsides_min1
EC6E D0 07      BNE LEC77
EC70          LEC70:
EC70 85 83      STA ssnum
EC72 EE CF 10   INC L10CF
EC75 D0 05      BNE LEC7C
EC77          LEC77:
EC77 A9 52      LDA #$52
EC79 20 2D FF   JSR cmderr
EC7C          LEC7C:
EC7C A5 84      LDA ssind
EC7E 38         SEC
EC7F E5 1A      SBC r1
EC81 B0 03      BCS LEC86
EC83          LEC83:
EC83 E9 0F      SBC #$F
EC85 18         CLC
EC86          LEC86:
EC86 48         PHA
EC87 20 B4 FA   JSR getnsides_min1
EC8A F0 1E      BEQ LECAA
EC8C          LEC8C:
EC8C 68         PLA
EC8D 85 07      STA t3
EC8F A5 83      LDA ssnum
EC91 E5 19      SBC r0
EC93 85 08      STA tmp_fdc
EC95 A2 00      LDX #$0
EC97 86 05      STX t1
EC99 86 06      STX t2
EC9B AA         TAX
EC9C 20 2C E8   JSR LE82C
EC9F A5 06      LDA t2
ECA1 D0 2F      BNE LECD2
ECA3          LECA3:
ECA3 A6 05      LDX t1
ECA5 CA         DEX
ECA6 D0 2A      BNE LECD2
ECA8          LECA8:
ECA8 F0 26      BEQ LECD0
ECAA          LECAA:
ECAA 68         PLA
ECAB 85 07      STA t3
ECAD A5 83      LDA ssnum
ECAF E5 19      SBC r0
ECB1 B0 04      BCS LECB7
ECB3          LECB3:
ECB3 E6 1C      INC r3
ECB5 69 06      ADC #$6
ECB7          LECB7:
ECB7 85 08      STA tmp_fdc
ECB9 AD CF 10   LDA L10CF
ECBC 38         SEC
ECBD E5 1C      SBC r3
ECBF 85 1C      STA r3
ECC1 20 41 E8   JSR LE841
ECC4 A5 1F      LDA result+1
ECC6 D0 0A      BNE LECD2
ECC8          LECC8:
ECC8 A6 1E      LDX result
ECCA D0 01      BNE LECCD
ECCC          LECCC:
ECCC 60         RTS
ECCD          LECCD:
ECCD CA         DEX
ECCE D0 02      BNE LECD2
ECD0          LECD0:
ECD0 E6 1B      INC r2
ECD2          LECD2:
ECD2 CD 75 43   CMP nbtmp+1
ECD5 90 09      BCC LECE0
ECD7          LECD7:
ECD7 D0 9E      BNE LEC77
ECD9          LECD9:
ECD9 AD 74 43   LDA nbtmp
ECDC C5 05      CMP t1
ECDE 90 97      BCC LEC77
ECE0          LECE0:
ECE0 A9 01      LDA #$1
ECE2 20 CE DB   JSR drdbyt
ECE5 18         CLC
ECE6 69 01      ADC #$1
ECE8 A6 15      LDX lindx
ECEA 95 69      STA nr,X
ECEC 20 0C FF   JSR LFF0C
ECEF 20 D6 E6   JSR LE6D6
ECF2 A5 1B      LDA r2
ECF4 D0 15      BNE LED0B
ECF6          LECF6:
ECF6 20 39 E7   JSR wrtout
ECF9          LECF9:
ECF9 20 E9 D6   JSR dbl15_
ECFC 20 AE DD   JSR sethdr_j
ECFF 20 0C FF   JSR LFF0C
ED02 20 D6 E6   JSR LE6D6
ED05 20 03 EC   JSR nulbuf
ED08 4C 17 ED   JMP LED17
ED0B          LED0B:
ED0B 20 E9 D6   JSR dbl15_
ED0E 20 AE DD   JSR sethdr_j
ED11 20 03 EC   JSR nulbuf
ED14 20 F2 E6   JSR LE6F2
ED17          LED17:
ED17 20 39 E7   JSR wrtout
ED1A 20 E5 E6   JSR getlnk
ED1D A5 13      LDA track
ED1F 48         PHA
ED20 A5 14      LDA sector
ED22 48         PHA
ED23 20 17 E7   JSR LE717
ED26 A5 14      LDA sector
ED28 48         PHA
ED29 A5 13      LDA track
ED2B 48         PHA
ED2C 20 20 E8   JSR LE820
ED2F AA         TAX
ED30 D0 0A      BNE LED3C
ED32          LED32:
ED32 20 C3 ED   JSR LEDC3
ED35 A9 10      LDA #$10
ED37 20 C4 E7   JSR LE7C4
ED3A E6 19      INC r0
ED3C          LED3C:
ED3C 68         PLA
ED3D 20 67 E6   JSR LE667
ED40 68         PLA
ED41 20 67 E6   JSR LE667
ED44 68         PLA
ED45 85 14      STA sector
ED47 68         PLA
ED48 85 13      STA track
ED4A F0 1C      BEQ LED68
ED4C          LED4C:
ED4C 20 B4 FA   JSR getnsides_min1
ED4F D0 08      BNE LED59
ED51          LED51:
ED51 AD A3 43   LDA L43A3
ED54 CD CF 10   CMP L10CF
ED57 90 A0      BCC LECF9
ED59          LED59:
ED59 A5 19      LDA r0
ED5B C5 83      CMP ssnum
ED5D D0 9A      BNE LECF9
ED5F          LED5F:
ED5F 20 20 E8   JSR LE820
ED62 C5 84      CMP ssind
ED64 90 93      BCC LECF9
ED66          LED66:
ED66 F0 A3      BEQ LED0B
ED68          LED68:
ED68 20 20 E8   JSR LE820
ED6B 48         PHA
ED6C A9 00      LDA #$0
ED6E 20 B7 E7   JSR LE7B7
ED71 A9 00      LDA #$0
ED73 A8         TAY
ED74 91 27      STA (dirbuf),Y
ED76 C8         INY
ED77 68         PLA
ED78 38         SEC
ED79 E9 01      SBC #$1
ED7B 91 27      STA (dirbuf),Y
ED7D 20 47 E7   JSR LE747
ED80 20 89 DC   JSR watjob
ED83 20 74 F7   JSR mapout
ED86 20 1C D6   JSR fndrel
ED89 20 E9 D6   JSR dbl15_
ED8C 20 D3 E7   JSR LE7D3
ED8F 70 03      BVS LED94
ED91          LED91:
ED91 4C 89 EB   JMP LEB89
ED94          LED94:
ED94 A9 80      LDA #$80
ED96 20 71 E6   JSR setflg
ED99 A9 50      LDA #$50
ED9B 20 2D FF   JSR cmderr
ED9E          posbuf?:
ED9E 20 21 D9   JSR setdrn
EDA1 20 D7 EA   JSR ssend?
EDA4 20 B0 EB   JSR posbuf
EDA7 20 B4 FA   JSR getnsides_min1
EDAA D0 08      BNE LEDB4
EDAC          LEDAC:
EDAC AD CF 10   LDA L10CF
EDAF 8D A3 43   STA L43A3
EDB2 85 1C      STA r3
EDB4          LEDB4:
EDB4 A5 84      LDA ssind
EDB6 85 1A      STA r1
EDB8 A5 83      LDA ssnum
EDBA 85 19      STA r0
EDBC A9 00      LDA #$0
EDBE 85 1B      STA r2
EDC0 85 82      STA recptr
EDC2 60         RTS
EDC3          LEDC3:
EDC3 20 0C FF   JSR LFF0C
EDC6 20 E9 D6   JSR dbl15_
EDC9 20 CA E6   JSR scrub
EDCC 20 BB E8   JSR getact
EDCF 48         PHA
EDD0 20 9C E7   JSR LE79C
EDD3 A6 15      LDX lindx
EDD5 B5 79      LDA ss,X
EDD7 A8         TAY
EDD8 68         PLA
EDD9 AA         TAX
EDDA 20 B4 FA   JSR getnsides_min1
EDDD D0 03      BNE LEDE2
EDDF          LEDDF:
EDDF 4C B2 EE   JMP LEEB2
EDE2          LEDE2:
EDE2 A9 10      LDA #$10
EDE4 20 80 E7   JSR LE780
EDE7 A9 00      LDA #$0
EDE9 20 B7 E7   JSR LE7B7
EDEC A0 02      LDY #$2
EDEE B1 27      LDA (dirbuf),Y
EDF0 48         PHA
EDF1 A9 00      LDA #$0
EDF3 20 A0 DB   JSR setpnt
EDF6 68         PLA
EDF7 18         CLC
EDF8 69 01      ADC #$1
EDFA 91 27      STA (dirbuf),Y
EDFC 0A         ASL A
EDFD 69 04      ADC #$4
EDFF 85 1C      STA r3
EE01 A8         TAY
EE02 38         SEC
EE03 E9 02      SBC #$2
EE05 85 1D      STA r4
EE07          LEE07:
EE07 A5 13      LDA track
EE09 85 1A      STA r1
EE0B 91 27      STA (dirbuf),Y
EE0D C8         INY
EE0E A5 14      LDA sector
EE10 85 1B      STA r2
EE12 91 27      STA (dirbuf),Y
EE14 A0 00      LDY #$0
EE16 98         TYA
EE17 91 27      STA (dirbuf),Y
EE19 C8         INY
EE1A A9 11      LDA #$11
EE1C 91 27      STA (dirbuf),Y
EE1E A9 10      LDA #$10
EE20 20 A0 DB   JSR setpnt
EE23 20 2B E7   JSR LE72B
EE26 20 89 DC   JSR watjob
EE29 A6 15      LDX lindx
EE2B B5 79      LDA ss,X
EE2D 48         PHA
EE2E 20 C6 E8   JSR LE8C6
EE31 A6 15      LDX lindx
EE33 95 79      STA ss,X
EE35 68         PLA
EE36 AE 4C 43   LDX L434C
EE39 95 49      STA buf0,X
EE3B A9 00      LDA #$0
EE3D 20 A0 DB   JSR setpnt
EE40 A0 00      LDY #$0
EE42 A5 13      LDA track
EE44 91 27      STA (dirbuf),Y
EE46 C8         INY
EE47 A5 14      LDA sector
EE49 91 27      STA (dirbuf),Y
EE4B 20 B4 FA   JSR getnsides_min1
EE4E D0 44      BNE LEE94
EE50          LEE50:
EE50 A5 19      LDA r0
EE52 C9 FF      CMP #$FF
EE54 D0 3E      BNE LEE94
EE56          LEE56:
EE56 A5 14      LDA sector
EE58 48         PHA
EE59 A5 13      LDA track
EE5B 48         PHA
EE5C 20 39 E7   JSR wrtout
EE5F 20 89 DC   JSR watjob
EE62 20 E9 D6   JSR dbl15_
EE65 20 CA FA   JSR LFACA
EE68 EE A3 43   INC L43A3
EE6B AD A3 43   LDA L43A3
EE6E 0A         ASL A
EE6F 18         CLC
EE70 69 03      ADC #$3
EE72 20 C4 E7   JSR LE7C4
EE75 68         PLA
EE76 20 67 E6   JSR LE667
EE79 68         PLA
EE7A 20 67 E6   JSR LE667
EE7D 20 CD FA   JSR LFACD
EE80 AD A3 43   LDA L43A3
EE83 48         PHA
EE84 4C 1A FB   JMP LFB1A
EE87          LEE87:
EE87 20 BB E8   JSR getact
EE8A A6 15      LDX lindx
EE8C 20 F6 E7   JSR LE7F6
EE8F A9 00      LDA #$0
EE91 20 A0 DB   JSR setpnt
EE94          LEE94:
EE94 C6 1D      DEC r4
EE96 C6 1D      DEC r4
EE98 A4 1C      LDY r3
EE9A A5 1A      LDA r1
EE9C 91 27      STA (dirbuf),Y
EE9E C8         INY
EE9F A5 1B      LDA r2
EEA1 91 27      STA (dirbuf),Y
EEA3 20 39 E7   JSR wrtout
EEA6 20 89 DC   JSR watjob
EEA9 A4 1D      LDY r4
EEAB C0 03      CPY #$3
EEAD B0 D8      BCS LEE87
EEAF          LEEAF:
EEAF 4C E9 D6   JMP dbl15_
EEB2          LEEB2:
EEB2 A5 19      LDA r0
EEB4 C9 05      CMP #$5
EEB6 B0 03      BCS LEEBB
EEB8          LEEB8:
EEB8 4C E2 ED   JMP LEDE2
EEBB          LEEBB:
EEBB A9 FF      LDA #$FF
EEBD 85 19      STA r0
EEBF A9 00      LDA #$0
EEC1 20 A0 DB   JSR setpnt
EEC4 A0 02      LDY #$2
EEC6 91 27      STA (dirbuf),Y
EEC8 A6 15      LDX lindx
EECA B5 71      LDA rs,X
EECC C8         INY
EECD 91 27      STA (dirbuf),Y
EECF C8         INY
EED0 F0 03      BEQ LEED5
EED2          LEED2:
EED2 4C 07 EE   JMP LEE07
EED5          LEED5:
EED5 4C E2 ED   JMP LEDE2
EED8 00 A0 4F   .BYTE $0,$A0,$4F
EEDB CB 20 21   .BYTE $CB,$20,$21
EEDE 22 23 24   .BYTE $22,$23,$24
EEE1 27 D2 45   .BYTE $27,$D2,$45
EEE4 41 44 89   .BYTE $41,$44,$89
EEE7 52 83 20   .BYTE $52,$83,$20
EEEA 54 4F 4F   .BYTE $54,$4F,$4F
EEED 20 4C 41   .BYTE $20,$4C,$41
EEF0 52 47 C5   .BYTE $52,$47,$C5
EEF3 50 8B 06   .BYTE $50,$8B,$6
EEF6 20 50 52   .BYTE $20,$50,$52
EEF9 45 53 45   .BYTE $45,$53,$45
EEFC 4E D4 51   .BYTE $4E,$D4,$51
EEFF CF 56 45   .BYTE $CF,$56,$45
EF02 52 46 4C   .BYTE $52,$46,$4C
EF05 4F 57 20   .BYTE $4F,$57,$20
EF08 49 4E 8B   .BYTE $49,$4E,$8B
EF0B 25 28 8A   .BYTE $25,$28,$8A
EF0E 89 26 8A   .BYTE $89,$26,$8A
EF11 20 50 52   .BYTE $20,$50,$52
EF14 4F 54 45   .BYTE $4F,$54,$45
EF17 43 54 20   .BYTE $43,$54,$20
EF1A 4F CE 29   .BYTE $4F,$CE,$29
EF1D 88 20 49   .BYTE $88,$20,$49
EF20 44 85 30   .BYTE $44,$85,$30
EF23 31 32 33   .BYTE $31,$32,$33
EF26 34 D3 59   .BYTE $34,$D3,$59
EF29 4E 54 41   .BYTE $4E,$54,$41
EF2C 58 89 60   .BYTE $58,$89,$60
EF2F 8A 03 84   .BYTE $8A,$3,$84
EF32 63 83 20   .BYTE $63,$83,$20
EF35 45 58 49   .BYTE $45,$58,$49
EF38 53 54 D3   .BYTE $53,$54,$D3
EF3B 64 83 20   .BYTE $64,$83,$20
EF3E 54 59 50   .BYTE $54,$59,$50
EF41 45 85 65   .BYTE $45,$85,$65
EF44 CE 4F 20   .BYTE $CE,$4F,$20
EF47 42 4C 4F   .BYTE $42,$4C,$4F
EF4A 43 CB 66   .BYTE $43,$CB,$66
EF4D 67 C9 4C   .BYTE $67,$C9,$4C
EF50 4C 45 47   .BYTE $4C,$45,$47
EF53 41 4C 20   .BYTE $41,$4C,$20
EF56 54 52 41   .BYTE $54,$52,$41
EF59 43 4B 20   .BYTE $43,$4B,$20
EF5C 4F 52 20   .BYTE $4F,$52,$20
EF5F 53 45 43   .BYTE $53,$45,$43
EF62 54 4F D2   .BYTE $54,$4F,$D2
EF65 61 83 06   .BYTE $61,$83,$6
EF68 84 39 62   .BYTE $84,$39,$62
EF6B 83 06 87   .BYTE $83,$6,$87
EF6E 01 83 53   .BYTE $1,$83,$53
EF71 20 53 43   .BYTE $20,$53,$43
EF74 52 41 54   .BYTE $52,$41,$54
EF77 43 48 45   .BYTE $43,$48,$45
EF7A C4 70 CE   .BYTE $C4,$70,$CE
EF7D 4F 20 43   .BYTE $4F,$20,$43
EF80 48 41 4E   .BYTE $48,$41,$4E
EF83 4E 45 CC   .BYTE $4E,$45,$CC
EF86 71 C4 49   .BYTE $71,$C4,$49
EF89 52 89 72   .BYTE $52,$89,$72
EF8C 88 20 46   .BYTE $88,$20,$46
EF8F 55 4C CC   .BYTE $55,$4C,$CC
EF92 73 C3 42   .BYTE $73,$C3,$42
EF95 4D 20 44   .BYTE $4D,$20,$44
EF98 4F 53 20   .BYTE $4F,$53,$20
EF9B 56 32 2E   .BYTE $56,$32,$2E
EF9E B7 74 C4   .BYTE $B7,$74,$C4
EFA1 52 49 56   .BYTE $52,$49,$56
EFA4 45 06 20   .BYTE $45,$6,$20
EFA7 52 45 41   .BYTE $52,$45,$41
EFAA 44 D9 75   .BYTE $44,$D9,$75
EFAD C6 4F 52   .BYTE $C6,$4F,$52
EFB0 4D 41 54   .BYTE $4D,$41,$54
EFB3 20 53 50   .BYTE $20,$53,$50
EFB6 45 45 44   .BYTE $45,$45,$44
EFB9 89 09 C5   .BYTE $89,$9,$C5
EFBC 52 52 4F   .BYTE $52,$52,$4F
EFBF D2 0A D7   .BYTE $D2,$A,$D7
EFC2 52 49 54   .BYTE $52,$49,$54
EFC5 C5 03 C6   .BYTE $C5,$3,$C6
EFC8 49 4C C5   .BYTE $49,$4C,$C5
EFCB 04 CF 50   .BYTE $4,$CF,$50
EFCE 45 CE 05   .BYTE $45,$CE,$5
EFD1 CD 49 53   .BYTE $CD,$49,$53
EFD4 4D 41 54   .BYTE $4D,$41,$54
EFD7 43 C8 06   .BYTE $43,$C8,$6
EFDA CE 4F D4   .BYTE $CE,$4F,$D4
EFDD 07 C6 4F   .BYTE $7,$C6,$4F
EFE0 55 4E C4   .BYTE $55,$4E,$C4
EFE3 08 C4 49   .BYTE $8,$C4,$49
EFE6 53 CB 0B   .BYTE $53,$CB,$B
EFE9 D2 45 43   .BYTE $D2,$45,$43
EFEC 4F 52 C4   .BYTE $4F,$52,$C4
EFEF          ermove:
EFEF AA         TAX
EFF0 A5 19      LDA r0
EFF2 48         PHA
EFF3 A5 1A      LDA r1
EFF5 48         PHA
EFF6 A9 D8      LDA #$D8
EFF8 85 19      STA r0
EFFA A9 EE      LDA #$EE
EFFC 85 1A      STA r1
EFFE 8A         TXA
EFFF A2 00      LDX #$0
F001          LF001:
F001 C1 19      CMP (r0,X)
F003 F0 21      BEQ LF026
F005          LF005:
F005 48         PHA
F006 20 61 F0   JSR LF061
F009 90 05      BCC LF010
F00B          LF00B:
F00B 20 61 F0   JSR LF061
F00E 90 FB      BCC LF00B
F010          LF010:
F010 A5 1A      LDA r1
F012 C9 EF      CMP #$EF
F014 90 08      BCC LF01E
F016          LF016:
F016 D0 0A      BNE LF022
F018          LF018:
F018 A9 EF      LDA #$EF
F01A C5 19      CMP r0
F01C 90 04      BCC LF022
F01E          LF01E:
F01E 68         PLA
F01F 4C 01 F0   JMP LF001
F022          LF022:
F022 68         PLA
F023 4C 4C F0   JMP LF04C
F026          LF026:
F026 20 53 F0   JSR LF053
F029 90 FB      BCC LF026
F02B          LF02B:
F02B 20 39 F0   JSR LF039
F02E 20 53 F0   JSR LF053
F031 90 F8      BCC LF02B
F033          LF033:
F033 20 39 F0   JSR LF039
F036 4C 4C F0   JMP LF04C
F039          LF039:
F039 C9 20      CMP #$20
F03B B0 0B      BCS LF048
F03D          LF03D:
F03D AA         TAX
F03E A9 20      LDA #$20
F040 91 47      STA (buftab_errbuf?),Y
F042 C8         INY
F043 8A         TXA
F044 20 EF EF   JSR ermove
F047 60         RTS
F048          LF048:
F048 91 47      STA (buftab_errbuf?),Y
F04A C8         INY
F04B 60         RTS
F04C          LF04C:
F04C 68         PLA
F04D 85 1A      STA r1
F04F 68         PLA
F050 85 19      STA r0
F052 60         RTS
F053          LF053:
F053 E6 19      INC r0
F055 D0 02      BNE LF059
F057          LF057:
F057 E6 1A      INC r1
F059          LF059:
F059 A1 19      LDA (r0,X)
F05B 0A         ASL A
F05C A1 19      LDA (r0,X)
F05E 29 7F      AND #$7F
F060 60         RTS
F061          LF061:
F061 20 59 F0   JSR LF059
F064 E6 19      INC r0
F066 D0 02      BNE LF06A
F068          LF068:
F068 E6 1A      INC r1
F06A          LF06A:
F06A 60         RTS
F06B          error_j:
F06B 48         PHA
F06C C9 0C      CMP #$C
F06E D0 04      BNE LF074
F070          LF070:
F070 A9 75      LDA #$75
F072 D0 36      BNE cmder2_j
F074          LF074:
F074 86 AB      STX jobnum
F076 8A         TXA
F077 0A         ASL A
F078 0A         ASL A
F079 0A         ASL A
F07A AA         TAX
F07B BD 23 10   LDA hdrs_track,X
F07E 85 13      STA track
F080 BD 24 10   LDA hdrs_sector,X
F083 85 14      STA sector
F085 68         PLA
F086 29 0F      AND #$F
F088 D0 02      BNE LF08C
F08A          LF08A:
F08A A9 06      LDA #$6
F08C          LF08C:
F08C 09 20      ORA #$20
F08E AA         TAX
F08F CA         DEX
F090 CA         DEX
F091 8A         TXA
F092 48         PHA
F093 AD 3B 43   LDA cmdnum
F096 C9 00      CMP #$0
F098 D0 0F      BNE LF0A9
F09A          LF09A:
F09A A9 FF      LDA #$FF
F09C 8D 3B 43   STA cmdnum
F09F 68         PLA
F0A0 20 1E FF   JSR errmsg
F0A3 20 89 D7   JSR initdr
F0A6 4C AD F0   JMP cmder3
F0A9          LF0A9:
F0A9 68         PLA
F0AA          cmder2_j:
F0AA 20 1E FF   JSR errmsg
F0AD          cmder3:
F0AD 20 22 C8   JSR clrcb
F0B0 A9 00      LDA #$0
F0B2 8D 6F 43   STA wbam?
F0B5 AD 82 02   LDA io_dskcnt
F0B8 09 20      ORA #$20
F0BA 8D 82 02   STA io_dskcnt
F0BD 20 B2 DB   JSR freich
F0C0 A9 00      LDA #$0
F0C2 85 45      STA cb_buftab_cmdbuf
F0C4 A2 FF      LDX #$FF
F0C6 9A         TXS
F0C7 A5 17      LDA orgsa
F0C9 29 0F      AND #$F
F0CB 85 16      STA sa
F0CD C9 0F      CMP #$F
F0CF F0 3C      BEQ LF10D
F0D1          LF0D1:
F0D1 78         SEI
F0D2 A5 0E      LDA lsnact
F0D4 D0 20      BNE lsnerr
F0D6          LF0D6:
F0D6 A5 0F      LDA tlkact
F0D8 D0 0F      BNE tlkerr
F0DA          LF0DA:
F0DA A6 16      LDX sa
F0DC B5 AC      LDA lintab,X
F0DE C9 FF      CMP #$FF
F0E0 F0 2B      BEQ LF10D
F0E2          LF0E2:
F0E2 29 0F      AND #$F
F0E4 85 15      STA lindx
F0E6 4C 03 F1   JMP tlerr
F0E9          tlkerr:
F0E9 20 3B D8   JSR fndrch
F0EC AD 80 02   LDA io_ieee_ctl
F0EF 09 10      ORA #$10
F0F1 8D 80 02   STA io_ieee_ctl
F0F4 D0 0D      BNE tlerr
F0F6          lsnerr:
F0F6 20 56 D8   JSR fndwch
F0F9 A9 04      LDA #$4
F0FB 0D 80 02   ORA io_ieee_ctl
F0FE 29 FE      AND #$FE
F100 8D 80 02   STA io_ieee_ctl
F103          tlerr:
F103 20 73 D8   JSR typfil
F106 C9 04      CMP #$4
F108 B0 03      BCS LF10D
F10A          LF10A:
F10A 20 74 D9   JSR frechn
F10D          LF10D:
F10D 4C 27 FF   JMP idle
F110          hexdec:
F110 AA         TAX
F111 A9 00      LDA #$0
F113 08         PHP
F114 48         PHA
F115 F8         SED
F116          hex0:
F116 E0 00      CPX #$0
F118 F0 0F      BEQ LF129
F11A          LF11A:
F11A 18         CLC
F11B 69 01      ADC #$1
F11D 90 06      BCC LF125
F11F          LF11F:
F11F 68         PLA
F120 69 00      ADC #$0
F122 48         PHA
F123 A9 00      LDA #$0
F125          LF125:
F125 CA         DEX
F126 4C 16 F1   JMP hex0
F129          LF129:
F129 AA         TAX
F12A 68         PLA
F12B 28         PLP
F12C 09 00      ORA #$0
F12E F0 03      BEQ LF133
F130          LF130:
F130 20 3D F1   JSR bcd2
F133          LF133:
F133 8A         TXA
F134          bcddec:
F134 AA         TAX
F135 4A         LSR A
F136 4A         LSR A
F137 4A         LSR A
F138 4A         LSR A
F139 20 3D F1   JSR bcd2
F13C 8A         TXA
F13D          bcd2:
F13D 29 0F      AND #$F
F13F 09 30      ORA #$30
F141 91 47      STA (buftab_errbuf?),Y
F143 C8         INY
F144 60         RTS
F145          okerr:
F145 20 53 F9   JSR erroff
F148 A9 00      LDA #$0
F14A          errts0:
F14A A0 00      LDY #$0
F14C 84 13      STY track
F14E 84 14      STY sector
F150          errmsg_j:
F150 A0 00      LDY #$0
F152 A2 DC      LDX #$DC
F154 86 47      STX buftab_errbuf?
F156 A2 43      LDX #$43
F158 86 48      STX cb+3
F15A 20 34 F1   JSR bcddec
F15D A9 2C      LDA #$2C
F15F 91 47      STA (buftab_errbuf?),Y
F161 C8         INY
F162 AD DC 43   LDA errbuf
F165 85 C6      STA chndat+errchn
F167 8A         TXA
F168 A2 00      LDX #$0
F16A 20 EF EF   JSR ermove
F16D A9 2C      LDA #$2C
F16F 91 47      STA (buftab_errbuf?),Y
F171 C8         INY
F172 A5 13      LDA track
F174 20 10 F1   JSR hexdec
F177 A9 2C      LDA #$2C
F179 91 47      STA (buftab_errbuf?),Y
F17B C8         INY
F17C A5 14      LDA sector
F17E 20 10 F1   JSR hexdec
F181 A9 2C      LDA #$2C
F183 91 47      STA (buftab_errbuf?),Y
F185 C8         INY
F186 A5 12      LDA drvnum
F188 29 01      AND #$1
F18A 09 30      ORA #$30
F18C 91 47      STA (buftab_errbuf?),Y
F18E 98         TYA
F18F 18         CLC
F190 69 DC      ADC #$DC
F192 85 CE      STA lstchr+errchn
F194 E6 47      INC buftab_errbuf?
F196 A9 88      LDA #$88
F198 85 A9      STA LA9
F19A 60         RTS
F19B          boot2:
F19B A9 1C      LDA #$1C
F19D 8D 80 02   STA io_ieee_ctl
F1A0 4C 27 FF   JMP idle
F1A3          boot:
F1A3 AD 00 02   LDA io_ieee_data_in
F1A6 D0 F3      BNE boot2
F1A8          LF1A8:
F1A8 AD 80 02   LDA io_ieee_ctl
F1AB 09 10      ORA #$10
F1AD 8D 80 02   STA io_ieee_ctl
F1B0 AD 82 02   LDA io_dskcnt
F1B3 29 80      AND #$80
F1B5 F0 E4      BEQ boot2
F1B7          LF1B7:
F1B7 AD 80 02   LDA io_ieee_ctl
F1BA 29 EF      AND #$EF
F1BC 8D 80 02   STA io_ieee_ctl
F1BF AD 82 02   LDA io_dskcnt
F1C2 29 80      AND #$80
F1C4 D0 D5      BNE boot2
F1C6          boot3:
F1C6 AD 00 02   LDA io_ieee_data_in
F1C9 F0 FB      BEQ boot3
F1CB          LF1CB:
F1CB EE 7A 43   INC f2cnt
F1CE EE 76 43   INC cmdsiz
F1D1 A9 2A      LDA #$2A
F1D3 8D 00 43   STA cmdbuf
F1D6 A9 1C      LDA #$1C
F1D8 8D 80 02   STA io_ieee_ctl
F1DB D0 05      BNE boot4
F1DD          utlodr:
F1DD A9 8D      LDA #$8D
F1DF 20 CD C8   JSR parse
F1E2          boot4:
F1E2 20 A7 FA   JSR killp_rotection
F1E5 AD 7A 43   LDA f2cnt
F1E8 48         PHA
F1E9 A9 01      LDA #$1
F1EB 8D 7A 43   STA f2cnt
F1EE A9 FF      LDA #$FF
F1F0 85 19      STA r0
F1F2 20 B2 CA   JSR lookup
F1F5 AD 82 43   LDA filtrk
F1F8 D0 05      BNE utld00
F1FA          LF1FA:
F1FA A9 39      LDA #$39
F1FC 20 2D FF   JSR cmderr
F1FF          utld00:
F1FF 68         PLA
F200 8D 7A 43   STA f2cnt
F203 AD 82 43   LDA filtrk
F206 85 13      STA track
F208 AD 87 43   LDA filsec
F20B 85 14      STA sector
F20D A9 03      LDA #$3
F20F 20 4D DB   JSR opntyp
F212          utld10:
F212 A9 00      LDA #$0
F214 85 1A      STA r1
F216 20 73 F2   JSR gtabyt
F219 85 1B      STA r2
F21B 20 85 F2   JSR addsum
F21E 20 73 F2   JSR gtabyt
F221 85 1C      STA r3
F223 20 85 F2   JSR addsum
F226 A5 19      LDA r0
F228 F0 0A      BEQ LF234
F22A          LF22A:
F22A A5 1B      LDA r2
F22C 48         PHA
F22D A5 1C      LDA r3
F22F 48         PHA
F230 A9 00      LDA #$0
F232 85 19      STA r0
F234          LF234:
F234 20 73 F2   JSR gtabyt
F237 85 1D      STA r4
F239 20 85 F2   JSR addsum
F23C          LF23C:
F23C 20 73 F2   JSR gtabyt
F23F A0 00      LDY #$0
F241 91 1B      STA (r2),Y
F243          utld20:
F243 20 85 F2   JSR addsum
F246 A5 1B      LDA r2
F248 18         CLC
F249 69 01      ADC #$1
F24B 85 1B      STA r2
F24D 90 02      BCC LF251
F24F          LF24F:
F24F E6 1C      INC r3
F251          LF251:
F251 C6 1D      DEC r4
F253 D0 E7      BNE LF23C
F255          LF255:
F255 20 4E D2   JSR gibyte
F258 A5 18      LDA data
F25A C5 1A      CMP r1
F25C F0 08      BEQ utld50
F25E          LF25E:
F25E 20 AE DD   JSR sethdr_j
F261 A9 50      LDA #$50
F263 20 30 FF   JSR cmder2
F266          utld50:
F266 A5 AA      LDA eoiflg
F268 D0 A8      BNE utld10
F26A          LF26A:
F26A 68         PLA
F26B 85 1C      STA r3
F26D 68         PLA
F26E 85 1B      STA r2
F270 6C 1B 00   JMP (r2)
F273          gtabyt:
F273 20 4E D2   JSR gibyte
F276 A5 AA      LDA eoiflg
F278 D0 08      BNE LF282
F27A          LF27A:
F27A 20 AE DD   JSR sethdr_j
F27D A9 51      LDA #$51
F27F 20 30 FF   JSR cmder2
F282          LF282:
F282 A5 18      LDA data
F284 60         RTS
F285          addsum:
F285 18         CLC
F286 65 1A      ADC r1
F288 69 00      ADC #$0
F28A 85 1A      STA r1
F28C 60         RTS
F28D          LF28D:
F28D A2 00      LDX #$0
F290          LF290 = * + 1
              ; Instruction parameter jumped to.
F28F 2C A6 04   BIT wpsw_fdc
F292 9A         TXS
F293          LF293:
F293 BA         TSX
F294          LF294:
F294 A9 38      LDA #$38
F296 8D 82 02   STA io_dskcnt
F299 98         TYA
F29A          LF29A:
F29A 18         CLC
F29B          LF29B:
F29B 69 01      ADC #$1
F29D D0 FC      BNE LF29B
F29F          LF29F:
F29F 88         DEY
F2A0 D0 F8      BNE LF29A
F2A2          LF2A2:
F2A2 8C 82 02   STY io_dskcnt
F2A5          LF2A5:
F2A5 98         TYA
F2A6          LF2A6:
F2A6 18         CLC
F2A7          LF2A7:
F2A7 69 01      ADC #$1
F2A9 D0 FC      BNE LF2A7
F2AB          LF2AB:
F2AB 88         DEY
F2AC D0 F8      BNE LF2A6
F2AE          LF2AE:
F2AE CA         DEX
F2AF 10 E3      BPL LF294
F2B1          LF2B1:
F2B1 E0 FC      CPX #$FC
F2B3 D0 F0      BNE LF2A5
F2B5          LF2B5:
F2B5 F0 DC      BEQ LF293
F2B7          dskint:
F2B7 78         SEI
F2B8 D8         CLD
F2B9 A2 FF      LDX #$FF
F2BB 8E 02 02   STX io_ieee_data_out
F2BE 8E 03 02   STX io_ieee_data_out_ddr
F2C1 E8         INX
F2C2 8E 82 02   STX io_dskcnt
F2C5 A9 1C      LDA #$1C
F2C7 8D 80 02   STA io_ieee_ctl
F2CA A9 1F      LDA #$1F
F2CC 8D 81 02   STA io_ieee_ctl_ddr
F2CF A9 38      LDA #$38
F2D1 8D 83 02   STA io_dskcnt_ddr
F2D4 8D 83 02   STA io_dskcnt_ddr
F2D7 A0 00      LDY #$0
F2D9 A2 00      LDX #$0
F2DB          LF2DB:
F2DB 8A         TXA
F2DC 95 00      STA usrjmp,X
F2DE E8         INX
F2DF D0 FA      BNE LF2DB
F2E1          LF2E1:
F2E1 8A         TXA
F2E2 D5 00      CMP usrjmp,X
F2E4 D0 A7      BNE LF28D
F2E6          LF2E6:
F2E6 F6 00      INC usrjmp,X
F2E8 18         CLC
F2E9 69 01      ADC #$1
F2EB D5 00      CMP usrjmp,X
F2ED D0 9E      BNE LF28D
F2EF          LF2EF:
F2EF D5 01      CMP usrjmp+1,X
F2F1 D0 F3      BNE LF2E6
F2F3          LF2F3:
F2F3 8A         TXA
F2F4 69 00      ADC #$0
F2F6 D5 00      CMP usrjmp,X
F2F8 D0 93      BNE LF28D
F2FA          LF2FA:
F2FA 94 00      STY usrjmp,X
F2FC B5 00      LDA usrjmp,X
F2FE D0 8D      BNE LF28D
F300          LF300:
F300 E8         INX
F301 D0 DE      BNE LF2E1
F303          LF303:
F303 A9 78      LDA #$78
F305 8D 00 11   STA buff0
F308 A9 6C      LDA #$6C
F30A 8D 01 11   STA L1101
F30D A9 FC      LDA #$FC
F30F 8D 02 11   STA L1102
F312 A9 FF      LDA #$FF
F314 8D 03 11   STA L1103
F317 A9 D0      LDA #$D0
F319 8D 03 10   STA jobs
F31C          LF31C:
F31C E6 04      INC t0_temp
F31E 86 0B      STX ip+1
F320 A9 00      LDA #$0
F322 85 0A      STA ip
F324 A8         TAY
F325 A2 20      LDX #$20
F327 18         CLC
F328          LF328:
F328 C6 0B      DEC ip+1
F32A          LF32A:
F32A 71 0A      ADC (ip),Y
F32C C8         INY
F32D D0 FB      BNE LF32A
F32F          LF32F:
F32F CA         DEX
F330 D0 F6      BNE LF328
F332          LF332:
F332 69 00      ADC #$0
F334 AA         TAX
F335 C5 0B      CMP ip+1
F337 D0 67      BNE LF3A0
F339          LF339:
F339 E0 C0      CPX #$C0
F33B D0 DF      BNE LF31C
F33D          LF33D:
F33D A9 10      LDA #$10
F33F          LF33F:
F33F 85 0B      STA ip+1
F341 E6 04      INC t0_temp
F343 A2 04      LDX #$4
F345          LF345:
F345 98         TYA
F346 18         CLC
F347 65 0B      ADC ip+1
F349 91 0A      STA (ip),Y
F34B C8         INY
F34C D0 F7      BNE LF345
F34E          LF34E:
F34E E6 0B      INC ip+1
F350 CA         DEX
F351 D0 F2      BNE LF345
F353          LF353:
F353 A2 04      LDX #$4
F355          LF355:
F355 C6 0B      DEC ip+1
F357          LF357:
F357 88         DEY
F358 98         TYA
F359 18         CLC
F35A 65 0B      ADC ip+1
F35C D1 0A      CMP (ip),Y
F35E D0 40      BNE LF3A0
F360          LF360:
F360 49 FF      EOR #$FF
F362 91 0A      STA (ip),Y
F364 51 0A      EOR (ip),Y
F366 91 0A      STA (ip),Y
F368 D0 36      BNE LF3A0
F36A          LF36A:
F36A 98         TYA
F36B D0 EA      BNE LF357
F36D          LF36D:
F36D CA         DEX
F36E D0 E5      BNE LF355
F370          LF370:
F370 A5 0B      LDA ip+1
F372 18         CLC
F373 69 10      ADC #$10
F375 C9 50      CMP #$50
F377 D0 C6      BNE LF33F
F379          LF379:
F379 A9 04      LDA #$4
F37B 85 04      STA t0_temp
F37D A9 01      LDA #$1
F37F CD 00 10   CMP fdc_resetphase
F382 D0 1C      BNE LF3A0
F384          LF384:
F384 A0 00      LDY #$0
F386          LF386:
F386 B9 70 C3   LDA formatcode_2070,Y
F389 99 00 11   STA buff0,Y
F38C 88         DEY
F38D D0 F7      BNE LF386
F38F          LF38F:
F38F 8C 00 10   STY fdc_resetphase
F392 A9 38      LDA #$38
F394 8D 82 02   STA io_dskcnt
F397          LF397:
F397 AD 00 10   LDA fdc_resetphase
F39A F0 FB      BEQ LF397
F39C          LF39C:
F39C C9 FD      CMP #$FD
F39E 90 03      BCC nmi
F3A0          LF3A0:
F3A0 4C 90 F2   JMP LF290
F3A3          nmi:
F3A3 4C 13 C4   JMP LC413
F3A6          LF3A6:
F3A6 A9 00      LDA #$0
F3A8 85 16      STA sa
F3AA A9 01      LDA #$1
F3AC 20 30 D9   JSR getrch
F3AF A9 00      LDA #$0
F3B1 20 A0 DB   JSR setpnt
F3B4 A6 15      LDX lindx
F3B6 A9 00      LDA #$0
F3B8 95 C7      STA lstchr,X
F3BA 20 BB E8   JSR getact
F3BD AA         TAX
F3BE A5 12      LDA drvnum
F3C0 9D 50 43   STA lstjob,X
F3C3 A9 01      LDA #$1
F3C5 20 4A D7   JSR putbyt
F3C8 A9 04      LDA #$4
F3CA 20 4A D7   JSR putbyt
F3CD A9 01      LDA #$1
F3CF 20 4A D7   JSR putbyt
F3D2 20 4A D7   JSR putbyt
F3D5 AD 74 43   LDA nbtmp
F3D8 20 4A D7   JSR putbyt
F3DB A9 00      LDA #$0
F3DD 20 4A D7   JSR putbyt
F3E0 20 5E F4   JSR LF45E
F3E3 20 BB E8   JSR getact
F3E6 0A         ASL A
F3E7 AA         TAX
F3E8 D6 29      DEC buftab_0,X
F3EA D6 29      DEC buftab_0,X
F3EC A9 00      LDA #$0
F3EE 20 4A D7   JSR putbyt
F3F1          LF3F1:
F3F1 A9 01      LDA #$1
F3F3 20 4A D7   JSR putbyt
F3F6 20 4A D7   JSR putbyt
F3F9 20 34 CD   JSR getnam
F3FC 90 2C      BCC LF42A
F3FE          LF3FE:
F3FE AD 74 43   LDA nbtmp
F401 20 4A D7   JSR putbyt
F404 AD 75 43   LDA nbtmp+1
F407 20 4A D7   JSR putbyt
F40A 20 5E F4   JSR LF45E
F40D A9 00      LDA #$0
F40F 20 4A D7   JSR putbyt
F412 D0 DD      BNE LF3F1
F414          LF414:
F414 20 BB E8   JSR getact
F417 0A         ASL A
F418 AA         TAX
F419 A9 00      LDA #$0
F41B 95 29      STA buftab_0,X
F41D A9 88      LDA #$88
F41F A4 15      LDY lindx
F421 8D 49 43   STA L4349
F424 99 A2 00   STA chnrdy,Y
F427 A5 18      LDA data
F429 60         RTS
F42A          LF42A:
F42A AD 74 43   LDA nbtmp
F42D 20 4A D7   JSR putbyt
F430 AD 75 43   LDA nbtmp+1
F433 20 4A D7   JSR putbyt
F436 20 5E F4   JSR LF45E
F439 20 BB E8   JSR getact
F43C 0A         ASL A
F43D AA         TAX
F43E D6 29      DEC buftab_0,X
F440 D6 29      DEC buftab_0,X
F442 A9 00      LDA #$0
F444 20 4A D7   JSR putbyt
F447 20 4A D7   JSR putbyt
F44A 20 4A D7   JSR putbyt
F44D 20 BB E8   JSR getact
F450 0A         ASL A
F451 A8         TAY
F452 B9 29 00   LDA buftab_0,Y
F455 A6 15      LDX lindx
F457 95 C7      STA lstchr,X
F459 D6 C7      DEC lstchr,X
F45B 4C 14 F4   JMP LF414
F45E          LF45E:
F45E A0 00      LDY #$0
F460          LF460:
F460 B9 B8 43   LDA nambuf,Y
F463 20 4A D7   JSR putbyt
F466 C8         INY
F467 C0 1B      CPY #$1B
F469 D0 F5      BNE LF460
F46B          LF46B:
F46B 60         RTS
F46C          LF46C:
F46C 20 85 D8   JSR getbyt
F46F F0 01      BEQ LF472
F471          LF471:
F471 60         RTS
F472          LF472:
F472 85 18      STA data
F474 A4 15      LDY lindx
F476 B9 C7 00   LDA lstchr,Y
F479 F0 08      BEQ LF483
F47B          LF47B:
F47B A9 80      LDA #$80
F47D 99 A2 00   STA chnrdy,Y
F480 A5 18      LDA data
F482 60         RTS
F483          LF483:
F483 48         PHA
F484 20 F1 F3   JSR LF3F1
F487 68         PLA
F488 60         RTS
F489          verdir:
F489 20 36 C8   JSR simprs
F48C 20 89 D7   JSR initdr
F48F 20 73 F5   JSR LF573
F492 A6 12      LDX drvnum
F494 9D 9D 43   STA ndbl,X
F497 9D 9F 43   STA ndbh,X
F49A 20 BC F6   JSR LF6BC
F49D A9 00      LDA #$0
F49F 8D 94 43   STA delind
F4A2 20 0F CC   JSR srchst
F4A5 D0 3A      BNE LF4E1
F4A7          LF4A7:
F4A7 A9 00      LDA #$0
F4A9 85 14      STA sector
F4AB AD CA 10   LDA dirtrack
F4AE 85 13      STA track
F4B0 20 ED F4   JSR LF4ED
F4B3 A5 12      LDA drvnum
F4B5 20 7E F5   JSR LF57E
F4B8 4C FD C7   JMP endcmd
F4BB          LF4BB:
F4BB C8         INY
F4BC B1 27      LDA (dirbuf),Y
F4BE 48         PHA
F4BF C8         INY
F4C0 B1 27      LDA (dirbuf),Y
F4C2 48         PHA
F4C3 A0 13      LDY #$13
F4C5 B1 27      LDA (dirbuf),Y
F4C7 F0 0A      BEQ LF4D3
F4C9          LF4C9:
F4C9 85 13      STA track
F4CB C8         INY
F4CC B1 27      LDA (dirbuf),Y
F4CE 85 14      STA sector
F4D0 20 ED F4   JSR LF4ED
F4D3          LF4D3:
F4D3 68         PLA
F4D4 85 14      STA sector
F4D6 68         PLA
F4D7 85 13      STA track
F4D9 20 ED F4   JSR LF4ED
F4DC          LF4DC:
F4DC 20 6A CC   JSR LCC6A
F4DF F0 C6      BEQ LF4A7
F4E1          LF4E1:
F4E1 A0 00      LDY #$0
F4E3 B1 27      LDA (dirbuf),Y
F4E5 30 D4      BMI LF4BB
F4E7          LF4E7:
F4E7 20 0B CF   JSR deldir
F4EA 4C DC F4   JMP LF4DC
F4ED          LF4ED:
F4ED 20 4E DC   JSR tschk
F4F0 20 15 F5   JSR LF515
F4F3 20 4B DB   JSR opnird
F4F6          LF4F6:
F4F6 A9 00      LDA #$0
F4F8 20 A0 DB   JSR setpnt
F4FB 20 85 D8   JSR getbyt
F4FE 85 13      STA track
F500 20 85 D8   JSR getbyt
F503 85 14      STA sector
F505 A5 13      LDA track
F507 D0 03      BNE LF50C
F509          LF509:
F509 4C 74 D9   JMP frechn
F50C          LF50C:
F50C 20 15 F5   JSR LF515
F50F 20 23 DB   JSR nxtbuf
F512 4C F6 F4   JMP LF4F6
F515          LF515:
F515 A9 1C      LDA #$1C
F517 85 03      STA bmpnt+1
F519 A9 00      LDA #$0
F51B 85 02      STA bmpnt
F51D A0 05      LDY #$5
F51F          LF51F:
F51F E6 03      INC bmpnt+1
F521 AD EA 10   LDA drive_type
F524 F0 06      BEQ LF52C
F526          LF526:
F526 A5 13      LDA track
F528 D1 02      CMP (bmpnt),Y
F52A B0 F3      BCS LF51F
F52C          LF52C:
F52C 20 F2 F8   JSR LF8F2
F52F 84 04      STY t0_temp
F531 20 5B FA   JSR avck
F534 A5 14      LDA sector
F536 4A         LSR A
F537 4A         LSR A
F538 4A         LSR A
F539 38         SEC
F53A 65 04      ADC t0_temp
F53C A8         TAY
F53D A5 14      LDA sector
F53F 29 07      AND #$7
F541 AA         TAX
F542 B1 02      LDA (bmpnt),Y
F544 3D 54 F8   AND bmask,X
F547 F0 25      BEQ LF56E
F549          LF549:
F549 B1 02      LDA (bmpnt),Y
F54B 5D 54 F8   EOR bmask,X
F54E 91 02      STA (bmpnt),Y
F550 A4 04      LDY t0_temp
F552 B1 02      LDA (bmpnt),Y
F554 38         SEC
F555 E9 01      SBC #$1
F557 91 02      STA (bmpnt),Y
F559 A5 13      LDA track
F55B CD CA 10   CMP dirtrack
F55E F0 0D      BEQ LF56D
F560          LF560:
F560 A6 12      LDX drvnum
F562 BD 9D 43   LDA ndbl,X
F565 D0 03      BNE LF56A
F567          LF567:
F567 DE 9F 43   DEC ndbh,X
F56A          LF56A:
F56A DE 9D 43   DEC ndbl,X
F56D          LF56D:
F56D 60         RTS
F56E          LF56E:
F56E A9 65      LDA #$65
F570 20 30 FF   JSR cmder2
F573          LF573:
F573 A9 1D      LDA #$1D
F575 85 03      STA bmpnt+1
F577 A9 00      LDA #$0
F579 85 02      STA bmpnt
F57B 4C 1D F9   JMP clrbam_
F57E          LF57E:
F57E A9 00      LDA #$0
F580 85 19      STA r0
F582          LF582:
F582 A6 19      LDX r0
F584 BD B7 F5   LDA LF5B7,X
F587 85 AB      STA jobnum
F589 0A         ASL A
F58A 0A         ASL A
F58B 0A         ASL A
F58C A8         TAY
F58D BD C1 10   LDA L10C1,X
F590 D0 01      BNE LF593
F592          LF592:
F592 60         RTS
F593          LF593:
F593 BD C0 10   LDA bamtrack?,X
F596 99 23 10   STA hdrs_track,Y
F599 BD C5 10   LDA hwdep_bamsecs?,X
F59C 99 24 10   STA hdrs_sector,Y
F59F A5 12      LDA drvnum
F5A1 0A         ASL A
F5A2 AA         TAX
F5A3 BD 42 43   LDA dskid,X
F5A6 99 21 10   STA hdrs_dskid,Y
F5A9 BD 43 43   LDA dskid+1,X
F5AC 99 22 10   STA hdrs_dskid+1,Y
F5AF E6 19      INC r0
F5B1 20 7A DC   JSR dowrit
F5B4 4C 82 F5   JMP LF582
F5B7          LF5B7:
F5B7 00 01 02   .BYTE $0,$1,$2
F5BA 03         .BYTE $3
F5BB          new:
F5BB 20 76 C9   JSR onedrv
F5BE A5 90      LDA fildrv
F5C0 10 05      BPL LF5C7
F5C2          LF5C2:
F5C2 A9 33      LDA #$33
F5C4 4C 2D FF   JMP cmderr
F5C7          LF5C7:
F5C7 29 01      AND #$1
F5C9 85 12      STA drvnum
F5CB 20 21 FF   JSR setlda
F5CE 20 29 FA   JSR setbpt__
F5D1 A5 12      LDA drvnum
F5D3 0A         ASL A
F5D4 AA         TAX
F5D5 AC 7D 43   LDY filtbl+1
F5D8 CC 76 43   CPY cmdsiz
F5DB F0 19      BEQ LF5F6
F5DD          LF5DD:
F5DD B9 00 43   LDA cmdbuf,Y
F5E0 9D 42 43   STA dskid,X
F5E3 B9 01 43   LDA cmdbuf+1,Y
F5E6 9D 43 43   STA dskid+1,X
F5E9 20 29 DA   JSR clrchn
F5EC A2 01      LDX #$1
F5EE 86 13      STX track
F5F0 20 E7 CF   JSR format
F5F3 4C 05 F6   JMP LF605
F5F6          LF5F6:
F5F6 20 89 D7   JSR initdr
F5F9 A0 02      LDY #$2
F5FB B1 02      LDA (bmpnt),Y
F5FD CD 9F 10   CMP vernum
F600 F0 03      BEQ LF605
F602          LF602:
F602 4C 61 DC   JMP vnerr
F605          LF605:
F605 20 B3 F6   JSR LF6B3
F608 AD EA 10   LDA drive_type
F60B D0 14      BNE LF621
F60D          LF60D:
F60D 20 83 F6   JSR LF683
F610 A0 00      LDY #$0
F612 AD CA 10   LDA dirtrack
F615 91 02      STA (bmpnt),Y
F617 85 13      STA track
F619 84 14      STY sector
F61B 20 3A DB   JSR drtwrt
F61E 20 37 F7   JSR LF737
F621          LF621:
F621 20 1D F9   JSR clrbam_
F624 AD CA 10   LDA dirtrack
F627 85 13      STA track
F629 A0 01      LDY #$1
F62B 84 14      STY sector
F62D A9 FF      LDA #$FF
F62F 91 02      STA (bmpnt),Y
F631 20 3A DB   JSR drtwrt
F634 AD EA 10   LDA drive_type
F637 D0 04      BNE LF63D
F639          LF639:
F639 C6 14      DEC sector
F63B F0 13      BEQ LF650
F63D          LF63D:
F63D 20 83 F6   JSR LF683
F640 C6 14      DEC sector
F642 A5 AB      LDA jobnum
F644 20 1B FF   JSR sethdra
F647 A9 00      LDA #$0
F649 85 13      STA track
F64B 85 19      STA r0
F64D 20 3F F7   JSR LF73F
F650          LF650:
F650 AD CA 10   LDA dirtrack
F653 85 13      STA track
F655 20 29 FA   JSR setbpt__
F658 20 09 FF   JSR wused
F65B 20 4B DB   JSR opnird
F65E          LF65E:
F65E A9 00      LDA #$0
F660 20 A0 DB   JSR setpnt
F663 20 85 D8   JSR getbyt
F666 85 13      STA track
F668 20 85 D8   JSR getbyt
F66B 85 14      STA sector
F66D A5 13      LDA track
F66F F0 09      BEQ LF67A
F671          LF671:
F671 20 09 FF   JSR wused
F674 20 23 DB   JSR nxtbuf
F677 4C 5E F6   JMP LF65E
F67A          LF67A:
F67A 20 2A FF   JSR scrbam
F67D 20 BE D7   JSR nfcalc
F680 4C FD C7   JMP endcmd
F683          LF683:
F683 A5 AB      LDA jobnum
F685 A8         TAY
F686 0A         ASL A
F687 AA         TAX
F688 AD CE 10   LDA positionofdiskname
F68B 95 29      STA buftab_0,X
F68D AE 7C 43   LDX filtbl
F690 A9 1B      LDA #$1B
F692 20 D4 CC   JSR trname
F695 A0 12      LDY #$12
F697 A5 12      LDA drvnum
F699 0A         ASL A
F69A AA         TAX
F69B BD 42 43   LDA dskid,X
F69E 91 27      STA (dirbuf),Y
F6A0 C8         INY
F6A1 BD 43 43   LDA dskid+1,X
F6A4 91 27      STA (dirbuf),Y
F6A6 C8         INY
F6A7 C8         INY
F6A8 A9 32      LDA #$32
F6AA 91 27      STA (dirbuf),Y
F6AC C8         INY
F6AD AD 9F 10   LDA vernum
F6B0 91 27      STA (dirbuf),Y
F6B2 60         RTS
F6B3          LF6B3:
F6B3 20 29 FA   JSR setbpt__
F6B6 20 1D F9   JSR clrbam_
F6B9 20 BF F8   JSR bam2a=drvnum2jobnum
F6BC          LF6BC:
F6BC 20 1B FF   JSR sethdra
F6BF 20 B8 F8   JSR jobnum2hdroffset
F6C2 AD C0 10   LDA bamtrack?
F6C5 9D 23 10   STA hdrs_track,X
F6C8 AD C5 10   LDA hwdep_bamsecs?
F6CB 9D 24 10   STA hdrs_sector,X
F6CE AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F6D1 A9 01      LDA #$1
F6D3 85 13      STA track
F6D5 91 02      STA (bmpnt),Y
F6D7 A9 01      LDA #$1
F6D9 85 19      STA r0
F6DB          LF6DB:
F6DB 20 F2 F8   JSR LF8F2
F6DE B0 09      BCS LF6E9
F6E0          LF6E0:
F6E0 A8         TAY
F6E1 18         CLC
F6E2 6D CB 10   ADC bamsiz
F6E5 F0 25      BEQ LF70C
F6E7          LF6E7:
F6E7 90 23      BCC LF70C
F6E9          LF6E9:
F6E9 20 3F F7   JSR LF73F
F6EC 20 1D F9   JSR clrbam_
F6EF AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F6F2 A5 13      LDA track
F6F4 91 02      STA (bmpnt),Y
F6F6 20 B8 F8   JSR jobnum2hdroffset
F6F9 A4 19      LDY r0
F6FB B9 C0 10   LDA bamtrack?,Y
F6FE 9D 23 10   STA hdrs_track,X
F701 B9 C5 10   LDA hwdep_bamsecs?,Y
F704 9D 24 10   STA hdrs_sector,X
F707 E6 19      INC r0
F709 20 F2 F8   JSR LF8F2
F70C          LF70C:
F70C 84 1A      STY r1
F70E A5 13      LDA track
F710 20 12 FF   JSR maxsec
F713 8D 3F 43   STA lstsec?
F716 A9 00      LDA #$0
F718 85 14      STA sector
F71A          LF71A:
F71A A5 1A      LDA r1
F71C 20 3E F8   JSR LF83E
F71F 20 CF F7   JSR LF7CF
F722 E6 14      INC sector
F724 A5 14      LDA sector
F726 CD 3F 43   CMP lstsec?
F729 90 EF      BCC LF71A
F72B          LF72B:
F72B E6 13      INC track
F72D A6 13      LDX track
F72F EC E9 10   CPX maxtrk
F732 90 A7      BCC LF6DB
F734          LF734:
F734 20 3F F7   JSR LF73F
F737          LF737:
F737 A6 12      LDX drvnum
F739 A9 00      LDA #$0
F73B 9D 46 43   STA mdirty,X
F73E 60         RTS
F73F          LF73F:
F73F AD EA 10   LDA drive_type
F742 D0 03      BNE LF747
F744          LF744:
F744 68         PLA
F745 68         PLA
F746 60         RTS
F747          LF747:
F747 A6 19      LDX r0
F749 A0 00      LDY #$0
F74B BD C0 10   LDA bamtrack?,X
F74E 91 02      STA (bmpnt),Y
F750 C8         INY
F751 BD C5 10   LDA hwdep_bamsecs?,X
F754 91 02      STA (bmpnt),Y
F756 C8         INY
F757 AD 9F 10   LDA vernum
F75A 91 02      STA (bmpnt),Y
F75C C8         INY
F75D A9 00      LDA #$0
F75F 91 02      STA (bmpnt),Y
F761 A0 05      LDY #$5
F763 A5 13      LDA track
F765 91 02      STA (bmpnt),Y
F767 AD 3B 43   LDA cmdnum
F76A C9 00      CMP #$0
F76C F0 03      BEQ LF771
F76E          LF76E:
F76E 4C 7A DC   JMP dowrit
F771          LF771:
F771 E6 03      INC bmpnt+1
F773 60         RTS
F774          mapout:
F774 20 BB E8   JSR getact
F777 AA         TAX
F778 BD 50 43   LDA lstjob,X
F77B 29 01      AND #$1
F77D 85 12      STA drvnum
F77F 20 BF F8   JSR bam2a=drvnum2jobnum
F782          scrbam_j:
F782 20 29 FA   JSR setbpt__
F785 A4 12      LDY drvnum
F787 B9 46 43   LDA mdirty,Y
F78A D0 01      BNE sb10
F78C          LF78C:
F78C 60         RTS
F78D          sb10:
F78D A9 00      LDA #$0
F78F 99 46 43   STA mdirty,Y
F792 AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F795 B1 02      LDA (bmpnt),Y
F797          LF797:
F797 48         PHA
F798 20 F4 F8   JSR putbam?
F79B 20 5B FA   JSR avck
F79E 68         PLA
F79F 18         CLC
F7A0 69 01      ADC #$1
F7A2 48         PHA
F7A3 AD EA 10   LDA drive_type
F7A6 D0 08      BNE LF7B0
F7A8          LF7A8:
F7A8 68         PLA
F7A9 CD E9 10   CMP maxtrk
F7AC F0 09      BEQ LF7B7
F7AE          LF7AE:
F7AE D0 E7      BNE LF797
F7B0          LF7B0:
F7B0 68         PLA
F7B1 A0 05      LDY #$5
F7B3 D1 02      CMP (bmpnt),Y
F7B5 90 E0      BCC LF797
F7B7          LF7B7:
F7B7 4C 7A DC   JMP dowrit
F7BA          numfre:
F7BA A6 12      LDX drvnum
F7BC BD 9D 43   LDA ndbl,X
F7BF 8D 74 43   STA nbtmp
F7C2 BD 9F 43   LDA ndbh,X
F7C5 8D 75 43   STA nbtmp+1
F7C8 60         RTS
F7C9          frets_j:
F7C9 20 29 FA   JSR setbpt__
F7CC 20 3A F8   JSR freuse?
F7CF          LF7CF:
F7CF 38         SEC
F7D0 D0 22      BNE use10
F7D2          LF7D2:
F7D2 B1 02      LDA (bmpnt),Y
F7D4 1D 54 F8   ORA bmask,X
F7D7 91 02      STA (bmpnt),Y
F7D9 20 F5 F7   JSR dtybam
F7DC A4 04      LDY t0_temp
F7DE 18         CLC
F7DF B1 02      LDA (bmpnt),Y
F7E1 69 01      ADC #$1
F7E3 91 02      STA (bmpnt),Y
F7E5 A5 13      LDA track
F7E7 CD CA 10   CMP dirtrack
F7EA F0 08      BEQ use10
F7EC          LF7EC:
F7EC FE 9D 43   INC ndbl,X
F7EF D0 03      BNE use10
F7F1          LF7F1:
F7F1 FE 9F 43   INC ndbh,X
F7F4          use10:
F7F4 60         RTS
F7F5          dtybam:
F7F5 A6 12      LDX drvnum
F7F7 A9 01      LDA #$1
F7F9 9D 46 43   STA mdirty,X
F7FC 60         RTS
F7FD          wused_j:
F7FD 20 3A F8   JSR freuse?
F800 F0 37      BEQ LF839
F802          LF802:
F802 B1 02      LDA (bmpnt),Y
F804 5D 54 F8   EOR bmask,X
F807 91 02      STA (bmpnt),Y
F809 20 F5 F7   JSR dtybam
F80C A4 04      LDY t0_temp
F80E B1 02      LDA (bmpnt),Y
F810 38         SEC
F811 E9 01      SBC #$1
F813 91 02      STA (bmpnt),Y
F815 A5 13      LDA track
F817 CD CA 10   CMP dirtrack
F81A F0 0B      BEQ LF827
F81C          LF81C:
F81C BD 9D 43   LDA ndbl,X
F81F D0 03      BNE LF824
F821          LF821:
F821 DE 9F 43   DEC ndbh,X
F824          LF824:
F824 DE 9D 43   DEC ndbl,X
F827          LF827:
F827 BD 9F 43   LDA ndbh,X
F82A F0 01      BEQ LF82D
F82C          LF82C:
F82C 60         RTS
F82D          LF82D:
F82D BD 9D 43   LDA ndbl,X
F830 C9 03      CMP #$3
F832 B0 05      BCS LF839
F834          LF834:
F834 A9 72      LDA #$72
F836 20 1E FF   JSR errmsg
F839          LF839:
F839 60         RTS
F83A          freuse?:
F83A 20 5C F8   JSR setbam=getbamfortrack
F83D 98         TYA
F83E          LF83E:
F83E 85 04      STA t0_temp
F840          LF840:
F840 A5 14      LDA sector
F842 4A         LSR A
F843 4A         LSR A
F844 4A         LSR A
F845 38         SEC
F846 65 04      ADC t0_temp
F848 A8         TAY
F849 A5 14      LDA sector
F84B 29 07      AND #$7
F84D AA         TAX
F84E B1 02      LDA (bmpnt),Y
F850 3D 54 F8   AND bmask,X
F853 60         RTS
F854          bmask:
F854 01 02 04   .BYTE $1,$2,$4
F857 08 10 20   .BYTE $8,$10,$20
F85A 40 80      .BYTE $40,$80
F85C          setbam=getbamfortrack:
F85C 20 BF F8   JSR bam2a=drvnum2jobnum
F85F 20 29 FA   JSR setbpt__
F862 A5 13      LDA track
F864 F0 05      BEQ LF86B
F866          LF866:
F866 CD E9 10   CMP maxtrk
F869 90 05      BCC LF870
F86B          LF86B:
F86B A9 66      LDA #$66
F86D 20 30 FF   JSR cmder2
F870          LF870:
F870 20 B8 F8   JSR jobnum2hdroffset
F873 BD 23 10   LDA hdrs_track,X
F876 CD CA 10   CMP dirtrack
F879 D0 0D      BNE LF888
F87B          LF87B:
F87B BD 24 10   LDA hdrs_sector,X
F87E D0 08      BNE LF888
F880          LF880:
F880 AD EA 10   LDA drive_type
F883 F0 03      BEQ LF888
F885          LF885:
F885 20 DC F8   JSR LF8DC
F888          LF888:
F888 AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F88B A5 13      LDA track
F88D D1 02      CMP (bmpnt),Y
F88F B0 03      BCS LF894
F891          LF891:
F891 20 C7 F8   JSR LF8C7
F894          LF894:
F894 AD EA 10   LDA drive_type
F897 F0 0E      BEQ LF8A7
F899          LF899:
F899 A5 13      LDA track
F89B A0 05      LDY #$5
F89D D1 02      CMP (bmpnt),Y
F89F 90 06      BCC LF8A7
F8A1          LF8A1:
F8A1 20 DC F8   JSR LF8DC
F8A4 4C 94 F8   JMP LF894
F8A7          LF8A7:
F8A7 A5 13      LDA track
F8A9 AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F8AC D1 02      CMP (bmpnt),Y
F8AE B0 05      BCS LF8B5
F8B0          LF8B0:
F8B0 A9 67      LDA #$67
F8B2 20 30 FF   JSR cmder2
F8B5          LF8B5:
F8B5 4C F2 F8   JMP LF8F2
F8B8          jobnum2hdroffset:
F8B8 A5 AB      LDA jobnum
F8BA 0A         ASL A
F8BB 0A         ASL A
F8BC 0A         ASL A
F8BD AA         TAX
F8BE 60         RTS
F8BF          bam2a=drvnum2jobnum:
F8BF A5 12      LDA drvnum
F8C1 18         CLC
F8C2 69 0C      ADC #$C
F8C4 85 AB      STA jobnum
F8C6 60         RTS
F8C7          LF8C7:
F8C7 20 2A FF   JSR scrbam
F8CA 20 B8 F8   JSR jobnum2hdroffset
F8CD AD C0 10   LDA bamtrack?
F8D0 9D 23 10   STA hdrs_track,X
F8D3 AD C5 10   LDA hwdep_bamsecs?
F8D6 9D 24 10   STA hdrs_sector,X
F8D9 4C 76 DC   JMP doread
F8DC          LF8DC:
F8DC 20 2A FF   JSR scrbam
F8DF 20 B8 F8   JSR jobnum2hdroffset
F8E2 A0 00      LDY #$0
F8E4 B1 02      LDA (bmpnt),Y
F8E6 9D 23 10   STA hdrs_track,X
F8E9 C8         INY
F8EA B1 02      LDA (bmpnt),Y
F8EC 9D 24 10   STA hdrs_sector,X
F8EF 4C 76 DC   JMP doread
F8F2          LF8F2:
F8F2 A5 13      LDA track
F8F4          putbam?:
F8F4 38         SEC
F8F5 AC CD 10   LDY hwdep_10cd_bamlowtrkoff
F8F8 F1 02      SBC (bmpnt),Y
F8FA 85 23      STA accum+1
F8FC AD CB 10   LDA bamsiz
F8FF 85 04      STA t0_temp
F901 A9 00      LDA #$0
F903 4C 12 F9   JMP LF912
F906          LF906:
F906 18         CLC
F907 65 23      ADC accum+1
F909 90 05      BCC LF910
F90B          LF90B:
F90B A9 67      LDA #$67
F90D 20 30 FF   JSR cmder2
F910          LF910:
F910 06 23      ASL accum+1
F912          LF912:
F912 46 04      LSR t0_temp
F914 B0 F0      BCS LF906
F916          LF916:
F916 D0 F8      BNE LF910
F918          LF918:
F918 6D CC 10   ADC hwdep_10cc
F91B A8         TAY
F91C 60         RTS
F91D          clrbam_:
F91D A0 00      LDY #$0
F91F 98         TYA
F920          LF920:
F920 91 02      STA (bmpnt),Y
F922 C8         INY
F923 D0 FB      BNE LF920
F925          LF925:
F925 60         RTS
F926          redbam:
F926 20 BF F8   JSR bam2a=drvnum2jobnum
F929 20 2A FF   JSR scrbam
F92C AD CA 10   LDA dirtrack
F92F 85 13      STA track
F931 A9 00      LDA #$0
F933 85 14      STA sector
F935 A5 AB      LDA jobnum
F937 20 1B FF   JSR sethdra
F93A 4C 76 DC   JMP doread
F93D          setlda_j:
F93D A9 E7      LDA #$E7
F93F 2D 82 02   AND io_dskcnt
F942 48         PHA
F943 A5 12      LDA drvnum
F945 F0 05      BEQ LF94C
F947          LF947:
F947 68         PLA
F948 09 08      ORA #$8
F94A D0 03      BNE LF94F
F94C          LF94C:
F94C 68         PLA
F94D 09 10      ORA #$10
F94F          LF94F:
F94F 8D 82 02   STA io_dskcnt
F952 60         RTS
F953          erroff:
F953 AD 82 02   LDA io_dskcnt
F956 29 DF      AND #$DF
F958 8D 82 02   STA io_dskcnt
F95B 60         RTS
F95C          LF95C:
F95C 20 17 E7   JSR LE717
F95F A9 03      LDA #$3
F961 85 04      STA t0_temp
F963          LF963:
F963 A5 04      LDA t0_temp
F965 48         PHA
F966 20 5C F8   JSR setbam=getbamfortrack
F969 68         PLA
F96A 85 04      STA t0_temp
F96C B1 02      LDA (bmpnt),Y
F96E D0 39      BNE LF9A9
F970          LF970:
F970 A5 13      LDA track
F972 CD CA 10   CMP dirtrack
F975 F0 19      BEQ LF990
F977          LF977:
F977 90 1C      BCC LF995
F979          LF979:
F979 E6 13      INC track
F97B A5 13      LDA track
F97D CD E9 10   CMP maxtrk
F980 D0 E1      BNE LF963
F982          LF982:
F982 AE CA 10   LDX dirtrack
F985 CA         DEX
F986 86 13      STX track
F988 A9 00      LDA #$0
F98A 85 14      STA sector
F98C C6 04      DEC t0_temp
F98E D0 D3      BNE LF963
F990          LF990:
F990 A9 72      LDA #$72
F992 20 2D FF   JSR cmderr
F995          LF995:
F995 C6 13      DEC track
F997 D0 CA      BNE LF963
F999          LF999:
F999 AE CA 10   LDX dirtrack
F99C E8         INX
F99D 86 13      STX track
F99F A9 00      LDA #$0
F9A1 85 14      STA sector
F9A3 C6 04      DEC t0_temp
F9A5 D0 BC      BNE LF963
F9A7          LF9A7:
F9A7 F0 E7      BEQ LF990
F9A9          LF9A9:
F9A9 A5 14      LDA sector
F9AB 18         CLC
F9AC 6D F4 10   ADC secinc
F9AF 85 14      STA sector
F9B1 A5 13      LDA track
F9B3 20 12 FF   JSR maxsec
F9B6 8D 3F 43   STA lstsec?
F9B9 8D 3E 43   STA cmd
F9BC C5 14      CMP sector
F9BE B0 0C      BCS LF9CC
F9C0          LF9C0:
F9C0 38         SEC
F9C1 A5 14      LDA sector
F9C3 ED 3F 43   SBC lstsec?
F9C6 85 14      STA sector
F9C8 F0 02      BEQ LF9CC
F9CA          LF9CA:
F9CA C6 14      DEC sector
F9CC          LF9CC:
F9CC 20 35 FA   JSR getsec
F9CF F0 03      BEQ LF9D4
F9D1          LF9D1:
F9D1 4C 09 FF   JMP wused
F9D4          LF9D4:
F9D4 A9 00      LDA #$0
F9D6 85 14      STA sector
F9D8 20 35 FA   JSR getsec
F9DB D0 F4      BNE LF9D1
F9DD          LF9DD:
F9DD 4C 24 FA   JMP LFA24
F9E0          LF9E0:
F9E0 A5 19      LDA r0
F9E2 48         PHA
F9E3 A9 01      LDA #$1
F9E5 85 19      STA r0
F9E7          LF9E7:
F9E7 AD CA 10   LDA dirtrack
F9EA 38         SEC
F9EB E5 19      SBC r0
F9ED 85 13      STA track
F9EF 90 09      BCC LF9FA
F9F1          LF9F1:
F9F1 F0 07      BEQ LF9FA
F9F3          LF9F3:
F9F3 20 5C F8   JSR setbam=getbamfortrack
F9F6 B1 02      LDA (bmpnt),Y
F9F8 D0 1B      BNE LFA15
F9FA          LF9FA:
F9FA AD CA 10   LDA dirtrack
F9FD 18         CLC
F9FE 65 19      ADC r0
FA00 85 13      STA track
FA02 E6 19      INC r0
FA04 CD E9 10   CMP maxtrk
FA07 90 05      BCC LFA0E
FA09          LFA09:
FA09 A9 67      LDA #$67
FA0B 20 30 FF   JSR cmder2
FA0E          LFA0E:
FA0E 20 5C F8   JSR setbam=getbamfortrack
FA11 B1 02      LDA (bmpnt),Y
FA13 F0 D2      BEQ LF9E7
FA15          LFA15:
FA15 68         PLA
FA16 85 19      STA r0
FA18 A9 00      LDA #$0
FA1A 85 14      STA sector
FA1C 20 35 FA   JSR getsec
FA1F F0 03      BEQ LFA24
FA21          LFA21:
FA21 4C 09 FF   JMP wused
FA24          LFA24:
FA24 A9 71      LDA #$71
FA26 20 30 FF   JSR cmder2
FA29          setbpt__:
FA29 A6 12      LDX drvnum
FA2B BD 9E FF   LDA hibyteofdirbuf,X
FA2E 85 03      STA bmpnt+1
FA30 A9 00      LDA #$0
FA32 85 02      STA bmpnt
FA34 60         RTS
FA35          getsec:
FA35 20 5C F8   JSR setbam=getbamfortrack
FA38 98         TYA
FA39 48         PHA
FA3A 20 5B FA   JSR avck
FA3D A5 13      LDA track
FA3F 20 12 FF   JSR maxsec
FA42 8D 3F 43   STA lstsec?
FA45 68         PLA
FA46 85 04      STA t0_temp
FA48          LFA48:
FA48 A5 14      LDA sector
FA4A CD 3F 43   CMP lstsec?
FA4D B0 09      BCS LFA58
FA4F          LFA4F:
FA4F 20 40 F8   JSR LF840
FA52 D0 06      BNE LFA5A
FA54          LFA54:
FA54 E6 14      INC sector
FA56 D0 F0      BNE LFA48
FA58          LFA58:
FA58 A9 00      LDA #$0
FA5A          LFA5A:
FA5A 60         RTS
FA5B          avck:
FA5B A5 04      LDA t0_temp
FA5D 48         PHA
FA5E A9 00      LDA #$0
FA60 85 04      STA t0_temp
FA62 98         TYA
FA63 85 02      STA bmpnt
FA65 AC CB 10   LDY bamsiz
FA68 88         DEY
FA69          LFA69:
FA69 A2 07      LDX #$7
FA6B          LFA6B:
FA6B B1 02      LDA (bmpnt),Y
FA6D 3D 54 F8   AND bmask,X
FA70 F0 02      BEQ LFA74
FA72          LFA72:
FA72 E6 04      INC t0_temp
FA74          LFA74:
FA74 CA         DEX
FA75 10 F4      BPL LFA6B
FA77          LFA77:
FA77 88         DEY
FA78 D0 EF      BNE LFA69
FA7A          LFA7A:
FA7A B1 02      LDA (bmpnt),Y
FA7C C5 04      CMP t0_temp
FA7E D0 08      BNE LFA88
FA80          LFA80:
FA80 A9 00      LDA #$0
FA82 85 02      STA bmpnt
FA84 68         PLA
FA85 85 04      STA t0_temp
FA87 60         RTS
FA88          LFA88:
FA88 A9 71      LDA #$71
FA8A 20 30 FF   JSR cmder2
FA8D          maxsec_j:
FA8D AE A4 10   LDX nzones
FA90 CD B0 10   CMP trknum_side0?
FA93 B0 08      BCS LFA9D
FA95          LFA95:
FA95 DD AF 10   CMP trknum_side0?-1,X
FA98 CA         DEX
FA99 B0 FA      BCS LFA95
FA9B          LFA9B:
FA9B 90 06      BCC LFAA3
FA9D          LFA9D:
FA9D DD B3 10   CMP trknum_side1?-1,X
FAA0 CA         DEX
FAA1 B0 FA      BCS LFA9D
FAA3          LFAA3:
FAA3 BD 99 10   LDA hwdep_1099_maxsecperzone,X
FAA6 60         RTS
FAA7          killp_rotection:
FAA7 48         PHA
FAA8 A9 01      LDA #$1
FAAA 8D AB 10   STA killp_flag
FAAD          killp00:
FAAD AD AB 10   LDA killp_flag
FAB0 D0 FB      BNE killp00
FAB2          LFAB2:
FAB2 68         PLA
FAB3 60         RTS
FAB4          getnsides_min1:
FAB4 AD EA 10   LDA drive_type
FAB7 D0 03      BNE LFABC
FAB9          LFAB9:
FAB9 A9 FF      LDA #$FF
FABB 60         RTS
FABC          LFABC:
FABC AD A4 43   LDA 2c77_FF_2c154_00?
FABF 60         RTS
FAC0          LFAC0:
FAC0 A6 15      LDX lindx
FAC2 A9 FE      LDA #$FE
FAC4 DD D0 10   CMP L10D0,X
FAC7 D0 01      BNE LFACA
FAC9          LFAC9:
FAC9 60         RTS
FACA          LFACA:
FACA A9 80      LDA #$80
FACD          LFACD = * + 1
              ; Instruction parameter jumped to.
FACC 2C A9 90   BIT L90A9
FACF 48         PHA
FAD0 20 21 D9   JSR setdrn
FAD3 A6 15      LDX lindx
FAD5 BD E0 10   LDA L10E0,X
FAD8 85 13      STA track
FADA BD D8 10   LDA L10D8,X
FADD 85 14      STA sector
FADF A9 FF      LDA #$FF
FAE1 9D D0 10   STA L10D0,X
FAE4 B5 79      LDA ss,X
FAE6 85 AB      STA jobnum
FAE8 20 1B FF   JSR sethdra
FAEB 68         PLA
FAEC 20 7C DC   JSR LDC7C
FAEF A6 15      LDX lindx
FAF1 A9 FE      LDA #$FE
FAF3 9D D0 10   STA L10D0,X
FAF6 60         RTS
FAF7          LFAF7:
FAF7 A9 5A      LDA #$5A
FAF9 8D CF 10   STA L10CF
FAFC 20 0E FB   JSR LFB0E
FAFF D0 01      BNE LFB02
FB01          LFB01:
FB01 60         RTS
FB02          LFB02:
FB02 CE CF 10   DEC L10CF
FB05 AD CF 10   LDA L10CF
FB08 20 23 FB   JSR LFB23
FB0B D0 F5      BNE LFB02
FB0D          LFB0D:
FB0D 60         RTS
FB0E          LFB0E:
FB0E A6 15      LDX lindx
FB10 DD D0 10   CMP L10D0,X
FB13 D0 01      BNE LFB16
FB15          LFB15:
FB15 60         RTS
FB16          LFB16:
FB16 48         PHA
FB17 20 C0 FA   JSR LFAC0
FB1A          LFB1A:
FB1A 20 21 D9   JSR setdrn
FB1D A9 03      LDA #$3
FB1F 20 B7 E7   JSR LE7B7
FB22 68         PLA
FB23          LFB23:
FB23 AA         TAX
FB24 0A         ASL A
FB25 A8         TAY
FB26 B1 27      LDA (dirbuf),Y
FB28 D0 03      BNE LFB2D
FB2A          LFB2A:
FB2A 09 FF      ORA #$FF
FB2C 60         RTS
FB2D          LFB2D:
FB2D 85 13      STA track
FB2F C8         INY
FB30 B1 27      LDA (dirbuf),Y
FB32 85 14      STA sector
FB34 8A         TXA
FB35 48         PHA
FB36 A9 FF      LDA #$FF
FB38 A6 15      LDX lindx
FB3A 9D D0 10   STA L10D0,X
FB3D B5 79      LDA ss,X
FB3F 85 AB      STA jobnum
FB41 20 1B FF   JSR sethdra
FB44 A9 80      LDA #$80
FB46 20 7C DC   JSR LDC7C
FB49 A6 15      LDX lindx
FB4B 68         PLA
FB4C 9D D0 10   STA L10D0,X
FB4F A9 00      LDA #$0
FB51 60         RTS
FB52          testmaxtrksec_unused:
FB52 A5 13      LDA track
FB54 F0 10      BEQ LFB66
FB56          LFB56:
FB56 CD E9 10   CMP maxtrk
FB59 B0 0B      BCS LFB66
FB5B          LFB5B:
FB5B 20 12 FF   JSR maxsec
FB5E C5 14      CMP sector
FB60 F0 04      BEQ LFB66
FB62          LFB62:
FB62 90 02      BCC LFB66
FB64          LFB64:
FB64 18         CLC
FB65 60         RTS
FB66          LFB66:
FB66 38         SEC
FB67 60         RTS
FB68 AA AA AA   .BYTE $AA,$AA,$AA
FB6B AA AA AA   .BYTE $AA,$AA,$AA
FB6E AA AA AA   .BYTE $AA,$AA,$AA
FB71 AA AA AA   .BYTE $AA,$AA,$AA
FB74 AA AA AA   .BYTE $AA,$AA,$AA
FB77 AA AA AA   .BYTE $AA,$AA,$AA
FB7A AA AA AA   .BYTE $AA,$AA,$AA
FB7D AA AA AA   .BYTE $AA,$AA,$AA
FB80 AA AA AA   .BYTE $AA,$AA,$AA
FB83 AA AA AA   .BYTE $AA,$AA,$AA
FB86 AA AA AA   .BYTE $AA,$AA,$AA
FB89 AA AA AA   .BYTE $AA,$AA,$AA
FB8C AA AA AA   .BYTE $AA,$AA,$AA
FB8F AA AA AA   .BYTE $AA,$AA,$AA
FB92 AA AA AA   .BYTE $AA,$AA,$AA
FB95 AA AA AA   .BYTE $AA,$AA,$AA
FB98 AA AA AA   .BYTE $AA,$AA,$AA
FB9B AA AA AA   .BYTE $AA,$AA,$AA
FB9E AA AA AA   .BYTE $AA,$AA,$AA
FBA1 AA AA AA   .BYTE $AA,$AA,$AA
FBA4 AA AA AA   .BYTE $AA,$AA,$AA
FBA7 AA AA AA   .BYTE $AA,$AA,$AA
FBAA AA AA AA   .BYTE $AA,$AA,$AA
FBAD AA AA AA   .BYTE $AA,$AA,$AA
FBB0 AA AA AA   .BYTE $AA,$AA,$AA
FBB3 AA AA AA   .BYTE $AA,$AA,$AA
FBB6 AA AA AA   .BYTE $AA,$AA,$AA
FBB9 AA AA AA   .BYTE $AA,$AA,$AA
FBBC AA AA AA   .BYTE $AA,$AA,$AA
FBBF AA AA AA   .BYTE $AA,$AA,$AA
FBC2 AA AA AA   .BYTE $AA,$AA,$AA
FBC5 AA AA AA   .BYTE $AA,$AA,$AA
FBC8 AA AA AA   .BYTE $AA,$AA,$AA
FBCB AA AA AA   .BYTE $AA,$AA,$AA
FBCE AA AA AA   .BYTE $AA,$AA,$AA
FBD1 AA AA AA   .BYTE $AA,$AA,$AA
FBD4 AA AA AA   .BYTE $AA,$AA,$AA
FBD7 AA AA AA   .BYTE $AA,$AA,$AA
FBDA AA AA AA   .BYTE $AA,$AA,$AA
FBDD AA AA AA   .BYTE $AA,$AA,$AA
FBE0 AA AA AA   .BYTE $AA,$AA,$AA
FBE3 AA AA AA   .BYTE $AA,$AA,$AA
FBE6 AA AA AA   .BYTE $AA,$AA,$AA
FBE9 AA AA AA   .BYTE $AA,$AA,$AA
FBEC AA AA AA   .BYTE $AA,$AA,$AA
FBEF AA AA AA   .BYTE $AA,$AA,$AA
FBF2 AA AA AA   .BYTE $AA,$AA,$AA
FBF5 AA AA AA   .BYTE $AA,$AA,$AA
FBF8 AA AA AA   .BYTE $AA,$AA,$AA
FBFB AA AA AA   .BYTE $AA,$AA,$AA
FC00          itop_fdc = * + 2
FBFE AA AA AA   .BYTE $AA,$AA,$AA
FC02          ierrr_fdc = * + 1
FC01 AA AA AA   .BYTE $AA,$AA,$AA
FC06          lcc_fdc = * + 2
FC04 AA AA AA   .BYTE $AA,$AA,$AA
FC07 AA AA AA   .BYTE $AA,$AA,$AA
FC0A AA AA AA   .BYTE $AA,$AA,$AA
FC0D AA AA AA   .BYTE $AA,$AA,$AA
FC10 AA AA AA   .BYTE $AA,$AA,$AA
FC13 AA AA AA   .BYTE $AA,$AA,$AA
FC17          top_fdc = * + 1
FC16 AA AA AA   .BYTE $AA,$AA,$AA
FC19          cont10_fdc:
FC19 AA AA AA   .BYTE $AA,$AA,$AA
FC1C AA AA AA   .BYTE $AA,$AA,$AA
FC1F AA AA AA   .BYTE $AA,$AA,$AA
FC22 AA AA AA   .BYTE $AA,$AA,$AA
FC25 AA AA AA   .BYTE $AA,$AA,$AA
FC29          cont30_fdc = * + 1
FC28 AA AA AA   .BYTE $AA,$AA,$AA
FC2B AA AA AA   .BYTE $AA,$AA,$AA
FC2E AA AA AA   .BYTE $AA,$AA,$AA
FC31 AA AA AA   .BYTE $AA,$AA,$AA
FC34 AA AA AA   .BYTE $AA,$AA,$AA
FC37 AA AA AA   .BYTE $AA,$AA,$AA
FC3A AA AA AA   .BYTE $AA,$AA,$AA
FC3D AA AA AA   .BYTE $AA,$AA,$AA
FC40 AA AA AA   .BYTE $AA,$AA,$AA
FC43 AA AA AA   .BYTE $AA,$AA,$AA
FC46 AA AA AA   .BYTE $AA,$AA,$AA
FC49 AA AA AA   .BYTE $AA,$AA,$AA
FC4C AA AA AA   .BYTE $AA,$AA,$AA
FC4F AA AA AA   .BYTE $AA,$AA,$AA
FC52 AA AA AA   .BYTE $AA,$AA,$AA
FC55 AA AA AA   .BYTE $AA,$AA,$AA
FC58 AA AA AA   .BYTE $AA,$AA,$AA
FC5D          que05_fdc? = * + 2
FC5B AA AA AA   .BYTE $AA,$AA,$AA
FC5E AA AA AA   .BYTE $AA,$AA,$AA
FC61 AA AA AA   .BYTE $AA,$AA,$AA
FC64 AA AA AA   .BYTE $AA,$AA,$AA
FC67 AA AA AA   .BYTE $AA,$AA,$AA
FC6A AA AA AA   .BYTE $AA,$AA,$AA
FC6D AA AA AA   .BYTE $AA,$AA,$AA
FC70 AA AA AA   .BYTE $AA,$AA,$AA
FC73 AA AA AA   .BYTE $AA,$AA,$AA
FC76 AA AA AA   .BYTE $AA,$AA,$AA
FC79 AA AA AA   .BYTE $AA,$AA,$AA
FC7D          que20_fdc = * + 1
FC7C AA AA AA   .BYTE $AA,$AA,$AA
FC7F AA AA AA   .BYTE $AA,$AA,$AA
FC82 AA AA AA   .BYTE $AA,$AA,$AA
FC85 AA AA AA   .BYTE $AA,$AA,$AA
FC88 AA AA AA   .BYTE $AA,$AA,$AA
FC8B AA AA AA   .BYTE $AA,$AA,$AA
FC8E AA AA AA   .BYTE $AA,$AA,$AA
FC91 AA AA AA   .BYTE $AA,$AA,$AA
FC94 AA AA AA   .BYTE $AA,$AA,$AA
FC97 AA AA AA   .BYTE $AA,$AA,$AA
FC9A AA AA AA   .BYTE $AA,$AA,$AA
FC9D AA AA AA   .BYTE $AA,$AA,$AA
FCA0 AA AA AA   .BYTE $AA,$AA,$AA
FCA3 AA AA AA   .BYTE $AA,$AA,$AA
FCA6 AA AA AA   .BYTE $AA,$AA,$AA
FCA9 AA AA AA   .BYTE $AA,$AA,$AA
FCAC AA AA AA   .BYTE $AA,$AA,$AA
FCAF AA AA AA   .BYTE $AA,$AA,$AA
FCB2 AA AA AA   .BYTE $AA,$AA,$AA
FCB5 AA AA AA   .BYTE $AA,$AA,$AA
FCB8 AA AA AA   .BYTE $AA,$AA,$AA
FCBB AA AA AA   .BYTE $AA,$AA,$AA
FCBF          gotu_fdc = * + 1
FCBE AA AA AA   .BYTE $AA,$AA,$AA
FCC1 AA AA AA   .BYTE $AA,$AA,$AA
FCC4 AA AA AA   .BYTE $AA,$AA,$AA
FCC7 AA AA AA   .BYTE $AA,$AA,$AA
FCCA AA AA AA   .BYTE $AA,$AA,$AA
FCCD AA AA AA   .BYTE $AA,$AA,$AA
FCD0 AA AA AA   .BYTE $AA,$AA,$AA
FCD3 AA AA AA   .BYTE $AA,$AA,$AA
FCD6 AA AA AA   .BYTE $AA,$AA,$AA
FCD9 AA AA AA   .BYTE $AA,$AA,$AA
FCDC AA AA AA   .BYTE $AA,$AA,$AA
FCDF AA AA AA   .BYTE $AA,$AA,$AA
FCE2 AA AA AA   .BYTE $AA,$AA,$AA
FCE5 AA AA AA   .BYTE $AA,$AA,$AA
FCE8 AA AA AA   .BYTE $AA,$AA,$AA
FCEB AA AA AA   .BYTE $AA,$AA,$AA
FCEE AA AA AA   .BYTE $AA,$AA,$AA
FCF1 AA AA AA   .BYTE $AA,$AA,$AA
FCF4 AA AA AA   .BYTE $AA,$AA,$AA
FCF7          exe_fdc:
FCF7 AA AA AA   .BYTE $AA,$AA,$AA
FCFA AA AA AA   .BYTE $AA,$AA,$AA
FCFE          ex_fdc = * + 1
FCFD AA AA AA   .BYTE $AA,$AA,$AA
FD00 AA AA AA   .BYTE $AA,$AA,$AA
FD03 AA AA AA   .BYTE $AA,$AA,$AA
FD08          bmp_fdc = * + 2
FD06 AA AA AA   .BYTE $AA,$AA,$AA
FD09 AA AA AA   .BYTE $AA,$AA,$AA
FD0C AA AA AA   .BYTE $AA,$AA,$AA
FD0F AA AA AA   .BYTE $AA,$AA,$AA
FD12 AA AA AA   .BYTE $AA,$AA,$AA
FD15 AA AA AA   .BYTE $AA,$AA,$AA
FD18 AA AA AA   .BYTE $AA,$AA,$AA
FD1B AA AA AA   .BYTE $AA,$AA,$AA
FD20          setjb_fdc = * + 2
FD1E AA AA AA   .BYTE $AA,$AA,$AA
FD22          setjb_y_fdc = * + 1
FD21 AA AA AA   .BYTE $AA,$AA,$AA
FD24 AA AA AA   .BYTE $AA,$AA,$AA
FD27 AA AA AA   .BYTE $AA,$AA,$AA
FD2A AA AA AA   .BYTE $AA,$AA,$AA
FD2D AA AA AA   .BYTE $AA,$AA,$AA
FD30 AA AA AA   .BYTE $AA,$AA,$AA
FD33 AA AA AA   .BYTE $AA,$AA,$AA
FD36 AA AA AA   .BYTE $AA,$AA,$AA
FD39 AA AA AA   .BYTE $AA,$AA,$AA
FD3C          wsect_fdc?:
FD3C AA AA AA   .BYTE $AA,$AA,$AA
FD3F AA AA AA   .BYTE $AA,$AA,$AA
FD42 AA AA AA   .BYTE $AA,$AA,$AA
FD45 AA AA AA   .BYTE $AA,$AA,$AA
FD48 AA AA AA   .BYTE $AA,$AA,$AA
FD4B          l_460_fdc:
FD4B AA AA AA   .BYTE $AA,$AA,$AA
FD4E AA AA AA   .BYTE $AA,$AA,$AA
FD53          l_480_fdc = * + 2
FD51 AA AA AA   .BYTE $AA,$AA,$AA
FD54 AA AA AA   .BYTE $AA,$AA,$AA
FD57 AA AA AA   .BYTE $AA,$AA,$AA
FD5A AA AA AA   .BYTE $AA,$AA,$AA
FD5D AA AA AA   .BYTE $AA,$AA,$AA
FD60 AA AA AA   .BYTE $AA,$AA,$AA
FD63 AA AA AA   .BYTE $AA,$AA,$AA
FD66 AA AA AA   .BYTE $AA,$AA,$AA
FD69 AA AA AA   .BYTE $AA,$AA,$AA
FD6C AA AA AA   .BYTE $AA,$AA,$AA
FD6F AA AA AA   .BYTE $AA,$AA,$AA
FD72 AA AA AA   .BYTE $AA,$AA,$AA
FD77          l_465_fdc = * + 2
FD75 AA AA AA   .BYTE $AA,$AA,$AA
FD78 AA AA AA   .BYTE $AA,$AA,$AA
FD7B          doitt_fdc:
FD7B AA AA AA   .BYTE $AA,$AA,$AA
FD7E AA AA AA   .BYTE $AA,$AA,$AA
FD81 AA AA AA   .BYTE $AA,$AA,$AA
FD84          l_470_fdc:
FD84 AA AA AA   .BYTE $AA,$AA,$AA
FD87 AA AA AA   .BYTE $AA,$AA,$AA
FD8A AA AA AA   .BYTE $AA,$AA,$AA
FD8D AA AA AA   .BYTE $AA,$AA,$AA
FD90 AA AA AA   .BYTE $AA,$AA,$AA
FD93 AA AA AA   .BYTE $AA,$AA,$AA
FD98          reed_fdc = * + 2
FD96 AA AA AA   .BYTE $AA,$AA,$AA
FD99 AA AA AA   .BYTE $AA,$AA,$AA
FD9C          read01_fdc:
FD9C AA AA AA   .BYTE $AA,$AA,$AA
FD9F AA AA AA   .BYTE $AA,$AA,$AA
FDA2 AA AA AA   .BYTE $AA,$AA,$AA
FDA5 AA AA AA   .BYTE $AA,$AA,$AA
FDA9          read_checksum_fdc = * + 1
FDA8 AA AA AA   .BYTE $AA,$AA,$AA
FDAB AA AA AA   .BYTE $AA,$AA,$AA
FDAE AA AA AA   .BYTE $AA,$AA,$AA
FDB1 AA AA AA   .BYTE $AA,$AA,$AA
FDB4 AA AA AA   .BYTE $AA,$AA,$AA
FDB7 AA AA AA   .BYTE $AA,$AA,$AA
FDBA AA AA AA   .BYTE $AA,$AA,$AA
FDBD AA AA AA   .BYTE $AA,$AA,$AA
FDC0 AA AA AA   .BYTE $AA,$AA,$AA
FDC3 AA AA AA   .BYTE $AA,$AA,$AA
FDC7          dstrt_fdc = * + 1
FDC6 AA AA AA   .BYTE $AA,$AA,$AA
FDC9 AA AA AA   .BYTE $AA,$AA,$AA
FDCC AA AA AA   .BYTE $AA,$AA,$AA
FDCF AA AA AA   .BYTE $AA,$AA,$AA
FDD2          wright_fdc:
FDD2 AA AA AA   .BYTE $AA,$AA,$AA
FDD5 AA AA AA   .BYTE $AA,$AA,$AA
FDD8 AA AA AA   .BYTE $AA,$AA,$AA
FDDB AA AA AA   .BYTE $AA,$AA,$AA
FDDE AA AA AA   .BYTE $AA,$AA,$AA
FDE1          wrt10_fdc:
FDE1 AA AA AA   .BYTE $AA,$AA,$AA
FDE4 AA AA AA   .BYTE $AA,$AA,$AA
FDE7 AA AA AA   .BYTE $AA,$AA,$AA
FDEA AA AA AA   .BYTE $AA,$AA,$AA
FDED AA AA AA   .BYTE $AA,$AA,$AA
FDF0 AA AA AA   .BYTE $AA,$AA,$AA
FDF3 AA AA AA   .BYTE $AA,$AA,$AA
FDF6 AA AA AA   .BYTE $AA,$AA,$AA
FDF9 AA AA AA   .BYTE $AA,$AA,$AA
FDFC AA AA AA   .BYTE $AA,$AA,$AA
FDFF AA AA AA   .BYTE $AA,$AA,$AA
FE02 AA AA AA   .BYTE $AA,$AA,$AA
FE05 AA AA AA   .BYTE $AA,$AA,$AA
FE08 AA AA AA   .BYTE $AA,$AA,$AA
FE0B AA AA AA   .BYTE $AA,$AA,$AA
FE0E AA AA AA   .BYTE $AA,$AA,$AA
FE11 AA AA AA   .BYTE $AA,$AA,$AA
FE14 AA AA AA   .BYTE $AA,$AA,$AA
FE17 AA AA AA   .BYTE $AA,$AA,$AA
FE1A AA AA AA   .BYTE $AA,$AA,$AA
FE1D AA AA AA   .BYTE $AA,$AA,$AA
FE20 AA AA AA   .BYTE $AA,$AA,$AA
FE23 AA AA AA   .BYTE $AA,$AA,$AA
FE26 AA AA AA   .BYTE $AA,$AA,$AA
FE29 AA AA AA   .BYTE $AA,$AA,$AA
FE2C AA AA AA   .BYTE $AA,$AA,$AA
FE2F AA AA AA   .BYTE $AA,$AA,$AA
FE32 AA AA AA   .BYTE $AA,$AA,$AA
FE35 AA AA AA   .BYTE $AA,$AA,$AA
FE38 AA AA AA   .BYTE $AA,$AA,$AA
FE3B          vrfy_fdc:
FE3B AA AA AA   .BYTE $AA,$AA,$AA
FE3E AA AA AA   .BYTE $AA,$AA,$AA
FE41 AA AA AA   .BYTE $AA,$AA,$AA
FE44 AA AA AA   .BYTE $AA,$AA,$AA
FE47 AA AA AA   .BYTE $AA,$AA,$AA
FE4A AA AA AA   .BYTE $AA,$AA,$AA
FE4D AA AA AA   .BYTE $AA,$AA,$AA
FE50 AA AA AA   .BYTE $AA,$AA,$AA
FE55          sectsk_fdc = * + 2
FE53 AA AA AA   .BYTE $AA,$AA,$AA
FE56 AA AA AA   .BYTE $AA,$AA,$AA
FE5A          seak_fdc = * + 1
FE59 AA AA AA   .BYTE $AA,$AA,$AA
FE5C AA AA AA   .BYTE $AA,$AA,$AA
FE5F AA AA AA   .BYTE $AA,$AA,$AA
FE62 AA AA AA   .BYTE $AA,$AA,$AA
FE65 AA AA AA   .BYTE $AA,$AA,$AA
FE68 AA AA AA   .BYTE $AA,$AA,$AA
FE6B AA AA AA   .BYTE $AA,$AA,$AA
FE6E AA AA AA   .BYTE $AA,$AA,$AA
FE71 AA AA AA   .BYTE $AA,$AA,$AA
FE74 AA AA AA   .BYTE $AA,$AA,$AA
FE77 AA AA AA   .BYTE $AA,$AA,$AA
FE7A AA AA AA   .BYTE $AA,$AA,$AA
FE7D AA AA AA   .BYTE $AA,$AA,$AA
FE80 AA AA AA   .BYTE $AA,$AA,$AA
FE83 AA AA AA   .BYTE $AA,$AA,$AA
FE86 AA AA AA   .BYTE $AA,$AA,$AA
FE89 AA AA AA   .BYTE $AA,$AA,$AA
FE8C AA AA AA   .BYTE $AA,$AA,$AA
FE8F AA AA AA   .BYTE $AA,$AA,$AA
FE92 AA AA AA   .BYTE $AA,$AA,$AA
FE95          eseek_fdc:
FE95 AA AA AA   .BYTE $AA,$AA,$AA
FE98 AA AA AA   .BYTE $AA,$AA,$AA
FE9B AA AA AA   .BYTE $AA,$AA,$AA
FE9F          done_fdc = * + 1
FE9E AA AA AA   .BYTE $AA,$AA,$AA
FEA1 AA AA AA   .BYTE $AA,$AA,$AA
FEA5          badid_fdc = * + 1
FEA4 AA AA AA   .BYTE $AA,$AA,$AA
FEA7 AA AA AA   .BYTE $AA,$AA,$AA
FEAA          srch_fdc:
FEAA AA AA AA   .BYTE $AA,$AA,$AA
FEAD AA AA AA   .BYTE $AA,$AA,$AA
FEB2          modlst = * + 2
FEB0 AA AA AA   .BYTE $AA,$AA,$AA
FEB3 AA AA AA   .BYTE $AA,$AA,$AA
FEB6          tplst:
FEB6 AA AA AA   .BYTE $AA,$AA,$AA
FEB9 AA AA AA   .BYTE $AA,$AA,$AA
FEBC AA AA AA   .BYTE $AA,$AA,$AA
FEBF AA AA AA   .BYTE $AA,$AA,$AA
FEC2 AA AA AA   .BYTE $AA,$AA,$AA
FEC5 AA AA AA   .BYTE $AA,$AA,$AA
FEC8 AA AA AA   .BYTE $AA,$AA,$AA
FECB AA AA AA   .BYTE $AA,$AA,$AA
FECE AA AA AA   .BYTE $AA,$AA,$AA
FED1 AA AA AA   .BYTE $AA,$AA,$AA
FED5          wait_for_hdrblock_fdc = * + 1
FED4 AA AA AA   .BYTE $AA,$AA,$AA
FED7 AA AA AA   .BYTE $AA,$AA,$AA
FEDB          errr_fdc = * + 1
FEDA AA AA AA   .BYTE $AA,$AA,$AA
FEDD AA AA AA   .BYTE $AA,$AA,$AA
FEE0 AA AA AA   .BYTE $AA,$AA,$AA
FEE3 AA AA AA   .BYTE $AA,$AA,$AA
FEE6 AA AA AA   .BYTE $AA,$AA,$AA
FEE9 AA AA AA   .BYTE $AA,$AA,$AA
FEEC AA AA AA   .BYTE $AA,$AA,$AA
FEEF AA AA AA   .BYTE $AA,$AA,$AA
FEF2 AA AA AA   .BYTE $AA,$AA,$AA
FEF7          sync?_fdc = * + 2
FEF5 AA AA AA   .BYTE $AA,$AA,$AA
FEF8 AA AA AA   .BYTE $AA,$AA,$AA
FEFB AA AA AA   .BYTE $AA,$AA,$AA
FEFE AA AA      .BYTE $AA,$AA
FF00          getbuf:
FF00 4C D9 D9   JMP getbuf_not
FF03          frebuf:
FF03 4C 15 DA   JMP frebuf_j
FF06          frets:
FF06 4C C9 F7   JMP frets_j
FF09          wused:
FF09 4C FD F7   JMP wused_j
FF0C          LFF0C:
FF0C 4C 5C F9   JMP LF95C
FF0F          LFF0F:
FF0F 4C E0 F9   JMP LF9E0
FF12          maxsec:
FF12 4C 8D FA   JMP maxsec_j
FF15          error:
FF15 4C 6B F0   JMP error_j
FF18          autoi:
FF18 4C A3 CC   JMP autoi_j
FF1B          sethdra:
FF1B 4C B1 DD   JMP sethdra_j
FF1E          errmsg:
FF1E 4C 50 F1   JMP errmsg_j
FF21          setlda:
FF21 4C 3D F9   JMP setlda_j
FF24          testmaxtrksec_j_unused:
FF24 4C 52 FB   JMP testmaxtrksec_unused
FF27          idle:
FF27 6C F6 10   JMP (iidle)
FF2A          scrbam:
FF2A 4C 82 F7   JMP scrbam_j
FF2D          cmderr:
FF2D 4C 2D C8   JMP cmderr_j
FF30          cmder2:
FF30 4C AA F0   JMP cmder2_j
FF33          tstjob:
FF33 4C 96 DC   JMP tstjob_j
FF36          chkblk_fdc:
FF36 AA AA AA   .BYTE $AA,$AA,$AA
FF39 AA AA AA   .BYTE $AA,$AA,$AA
FF3C AA AA AA   .BYTE $AA,$AA,$AA
FF3F          irq_fdc:
FF3F AA AA AA   .BYTE $AA,$AA,$AA
FF42 AA AA AA   .BYTE $AA,$AA,$AA
FF45 AA AA AA   .BYTE $AA,$AA,$AA
FF48 AA AA AA   .BYTE $AA,$AA,$AA
FF4B AA AA AA   .BYTE $AA,$AA,$AA
FF50          rom_bamsiz = * + 2
FF4E AA AA 04   .BYTE $AA,$AA,$4
FF52          rom_hwdep_10cc = * + 1
FF51 05 04 06   .BYTE $5,$4,$6
FF54          rom_hwdep_10cd:
FF56          rom_positionofdiskname = * + 2
FF54 01 04 90   .BYTE $1,$4,$90
FF58          cmdtbl = * + 1
FF57 06 56 49   .BYTE $6,$56,$49
FF5A 44 4D 42   .BYTE $44,$4D,$42
FF5D 55 50 26   .BYTE $55,$50,$26
FF60 43 52 53   .BYTE $43,$52,$53
FF64          cjumpl = * + 1
FF63 4E 89 5E   .BYTE $4E,$89,$5E
FF66 16 0E 2C   .BYTE $16,$E,$2C
FF69 71 1B DD   .BYTE $71,$1B,$DD
FF6C 2C 9F 89   .BYTE $2C,$9F,$89
FF70          cjumph = * + 1
FF6F BB F4 D7   .BYTE $BB,$F4,$D7
FF74          LFF74 = * + 2
FF72 CF D3 D4   .BYTE $CF,$D3,$D4
FF75 D3 EB F1   .BYTE $D3,$EB,$F1
FF78 D0 D2 CE   .BYTE $D0,$D2,$CE
FF7B F5 51 DD   .BYTE $F5,$51,$DD
FF7E 1C 9E 1C   .BYTE $1C,$9E,$1C
FF81          LFF81:
FF81 52 57 41   .BYTE $52,$57,$41
FF85          LFF85 = * + 1
FF84 4D 44 53   .BYTE $4D,$44,$53
FF87 50 55 4C   .BYTE $50,$55,$4C
FF8A          type_dspur:
FF8A 44 53 50   .BYTE $44,$53,$50
FF8F          type_dspur2 = * + 2
FF8D 55 52 45   .BYTE $55,$52,$45
FF90 45 52 53   .BYTE $45,$52,$53
FF94          type_dspur3 = * + 1
FF93 45 4C 51   .BYTE $45,$4C,$51
FF96 47 52 4C   .BYTE $47,$52,$4C
FF99          er00:
FF9A          LFF9A = * + 1
FF9B          LFF9B = * + 2
FF99 00 3F 7F   .BYTE $0,$3F,$7F
FF9C          LFF9C:
FF9D          LFF9D = * + 1
FF9E          hibyteofdirbuf = * + 2
FF9C BF FF 41   .BYTE $BF,$FF,$41
FFA0          LFFA0 = * + 1
FF9F 42 24 1F   .BYTE $42,$24,$1F
FFA2          LFFA2:
FFA4          rom_2a_maxsecperzone = * + 2
FFA2 19 12 11   .BYTE $19,$12,$11
FFA5 12 13 15   .BYTE $12,$13,$15
FFA8 09 04 FF   .BYTE $9,$4,$FF
FFAB          LFFAB:
FFAB 4E 41 36   .BYTE $4E,$41,$36
FFAE 28 9B 8E   .BYTE $28,$9B,$8E
FFB3          rom_2c_maxsecperzone = * + 2
FFB1 83 75 17   .BYTE $83,$75,$17
FFB4 19 1B 1D   .BYTE $19,$1B,$1D
FFB7 13 12 4C   .BYTE $13,$12,$4C
FFBA          rom_77_bamdirtracks?:
FFBA 26 26 27   .BYTE $26,$26,$27
FFBD          rom_77_bamdirsecs?:
FFBD 00 03 01   .BYTE $0,$3,$1
FFC0          rom_154_bamdirtracks?:
FFC0 26 26 26   .BYTE $26,$26,$26
FFC5          rom_154_bamdirsecs? = * + 2
FFC3 26 27 00   .BYTE $26,$27,$0
FFC6 03 06 09   .BYTE $3,$6,$9
FFCA          LFFCA = * + 1
FFC9 01 04 03   .BYTE $1,$4,$3
FFCC 01 01 00   .BYTE $1,$1,$0
FFCF 00 07 00   .BYTE $0,$7,$0
FFD2          offset:
FFD2 01 FF FF   .BYTE $1,$FF,$FF
FFD5 01 02 FE   .BYTE $1,$2,$FE
FFD8 FE 02 00   .BYTE $FE,$2,$0
FFDB AA AA AA   .BYTE $AA,$AA,$AA
FFE0          phase_maskrest_fdc = * + 2
FFDE AA AA AA   .BYTE $AA,$AA,$AA
FFE2          phase_2_fdc = * + 1
FFE1 AA AA AA   .BYTE $AA,$AA,$AA
FFE4          phase_3_fdc:
FFE6          phase_1_fdc = * + 2
FFE4 AA AA AA   .BYTE $AA,$AA,$AA
FFE7          nnmi:
FFE7 6C F0 10   JMP (i2nmi)
FFEA          iublkrd:
FFEA 6B D5      .WORD ublkrd
FFEC          iublkwt:
FFEC A5 D5      .WORD ublkwt
FFEE          iu3:
FFF0          iu4 = * + 2
FFEE 00 13 03   .BYTE $0,$13,$3
FFF2          iu5 = * + 1
FFF1 13 06 13   .BYTE $13,$6,$13
FFF4          iu6:
FFF6          iu7 = * + 2
FFF4 09 13 0C   .BYTE $9,$13,$C
FFF8          iu8 = * + 1
FFF7 13 0F 13   .BYTE $13,$F,$13
FFFA          innmi:
FFFC          idskint = * + 2
FFFA E7 FF B7   .BYTE $E7,$FF,$B7
FFFE          isysirq = * + 1
FFFD F2 11 C6   .BYTE $F2,$11,$C6
